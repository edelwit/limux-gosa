<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux (vers 25 March 2009), see www.w3.org" />
  <meta content="text/html; charset=us-ascii" http-equiv=
  "content-type" />
  <style type="text/css">
/*<![CDATA[*/
  .lst-kix_ufzf1orjb24z-4>li:before{content:"\0025cb  "}.lst-kix_herycab31j2a-0>li:before{content:"\0025cf  "}.lst-kix_ufzf1orjb24z-3>li:before{content:"\0025cf  "}.lst-kix_ufzf1orjb24z-7>li:before{content:"\0025cb  "}.lst-kix_ufzf1orjb24z-0>li:before{content:"\0025cf  "}.lst-kix_ufzf1orjb24z-8>li:before{content:"\0025a0  "}.lst-kix_herycab31j2a-5>li:before{content:"\0025a0  "}.lst-kix_ufzf1orjb24z-2>li:before{content:"\0025a0  "}.lst-kix_herycab31j2a-6>li:before{content:"\0025cf  "}.lst-kix_ufzf1orjb24z-1>li:before{content:"\0025cb  "}.lst-kix_herycab31j2a-4>li:before{content:"\0025cb  "}.lst-kix_herycab31j2a-3>li:before{content:"\0025cf  "}.lst-kix_herycab31j2a-1>li:before{content:"\0025cb  "}.lst-kix_herycab31j2a-2>li:before{content:"\0025a0  "}.lst-kix_16eukovhtu33-4>li:before{content:"\0025cb  "}.lst-kix_16eukovhtu33-5>li:before{content:"\0025a0  "}.lst-kix_16eukovhtu33-6>li:before{content:"\0025cf  "}.lst-kix_td5fvkhbf6hv-1>li:before{content:"\0025cb  "}.lst-kix_16eukovhtu33-7>li:before{content:"\0025cb  "}.lst-kix_td5fvkhbf6hv-0>li:before{content:"\0025cf  "}.lst-kix_5ix422mr1rnq-0>li:before{content:"\0025cf  "}.lst-kix_5ix422mr1rnq-1>li:before{content:"\0025cb  "}.lst-kix_16eukovhtu33-8>li:before{content:"\0025a0  "}.lst-kix_5ix422mr1rnq-2>li:before{content:"\0025a0  "}.lst-kix_ufzf1orjb24z-6>li:before{content:"\0025cf  "}.lst-kix_ufzf1orjb24z-5>li:before{content:"\0025a0  "}.lst-kix_5ix422mr1rnq-8>li:before{content:"\0025a0  "}ul.lst-kix_jvri6di0i9ru-1{list-style-type:none}ul.lst-kix_jvri6di0i9ru-0{list-style-type:none}ul.lst-kix_jvri6di0i9ru-3{list-style-type:none}.lst-kix_5ix422mr1rnq-6>li:before{content:"\0025cf  "}ul.lst-kix_jvri6di0i9ru-2{list-style-type:none}ul.lst-kix_jvri6di0i9ru-5{list-style-type:none}ul.lst-kix_jvri6di0i9ru-4{list-style-type:none}ul.lst-kix_ufzf1orjb24z-4{list-style-type:none}.lst-kix_5ix422mr1rnq-4>li:before{content:"\0025cb  "}.lst-kix_5ix422mr1rnq-5>li:before{content:"\0025a0  "}ul.lst-kix_ufzf1orjb24z-5{list-style-type:none}ul.lst-kix_ufzf1orjb24z-6{list-style-type:none}ul.lst-kix_ufzf1orjb24z-7{list-style-type:none}ul.lst-kix_ufzf1orjb24z-0{list-style-type:none}.lst-kix_5ix422mr1rnq-3>li:before{content:"\0025cf  "}ul.lst-kix_ufzf1orjb24z-1{list-style-type:none}ul.lst-kix_ufzf1orjb24z-2{list-style-type:none}ul.lst-kix_ufzf1orjb24z-3{list-style-type:none}ul.lst-kix_ufzf1orjb24z-8{list-style-type:none}.lst-kix_td5fvkhbf6hv-2>li:before{content:"\0025a0  "}.lst-kix_td5fvkhbf6hv-3>li:before{content:"\0025cf  "}ul.lst-kix_jvri6di0i9ru-7{list-style-type:none}ul.lst-kix_jvri6di0i9ru-6{list-style-type:none}ul.lst-kix_jvri6di0i9ru-8{list-style-type:none}.lst-kix_td5fvkhbf6hv-5>li:before{content:"\0025a0  "}.lst-kix_16eukovhtu33-3>li:before{content:"\0025cf  "}.lst-kix_5ix422mr1rnq-7>li:before{content:"\0025cb  "}.lst-kix_td5fvkhbf6hv-4>li:before{content:"\0025cb  "}.lst-kix_td5fvkhbf6hv-7>li:before{content:"\0025cb  "}.lst-kix_16eukovhtu33-1>li:before{content:"\0025cb  "}.lst-kix_16eukovhtu33-2>li:before{content:"\0025a0  "}.lst-kix_16eukovhtu33-0>li:before{content:"\0025cf  "}.lst-kix_td5fvkhbf6hv-6>li:before{content:"\0025cf  "}ul.lst-kix_5ix422mr1rnq-6{list-style-type:none}ul.lst-kix_5ix422mr1rnq-7{list-style-type:none}ul.lst-kix_5ix422mr1rnq-4{list-style-type:none}ul.lst-kix_td5fvkhbf6hv-7{list-style-type:none}ul.lst-kix_5ix422mr1rnq-5{list-style-type:none}ul.lst-kix_td5fvkhbf6hv-8{list-style-type:none}ul.lst-kix_16eukovhtu33-8{list-style-type:none}ul.lst-kix_5ix422mr1rnq-2{list-style-type:none}ul.lst-kix_td5fvkhbf6hv-5{list-style-type:none}ul.lst-kix_16eukovhtu33-7{list-style-type:none}ul.lst-kix_5ix422mr1rnq-3{list-style-type:none}ul.lst-kix_td5fvkhbf6hv-6{list-style-type:none}ul.lst-kix_16eukovhtu33-6{list-style-type:none}ul.lst-kix_5ix422mr1rnq-0{list-style-type:none}ul.lst-kix_td5fvkhbf6hv-3{list-style-type:none}.lst-kix_td5fvkhbf6hv-8>li:before{content:"\0025a0  "}ul.lst-kix_16eukovhtu33-5{list-style-type:none}ul.lst-kix_5ix422mr1rnq-1{list-style-type:none}ul.lst-kix_td5fvkhbf6hv-4{list-style-type:none}.lst-kix_herycab31j2a-7>li:before{content:"\0025cb  "}ul.lst-kix_16eukovhtu33-4{list-style-type:none}ul.lst-kix_td5fvkhbf6hv-1{list-style-type:none}ul.lst-kix_16eukovhtu33-3{list-style-type:none}ul.lst-kix_td5fvkhbf6hv-2{list-style-type:none}ul.lst-kix_16eukovhtu33-2{list-style-type:none}ul.lst-kix_16eukovhtu33-1{list-style-type:none}ul.lst-kix_td5fvkhbf6hv-0{list-style-type:none}ul.lst-kix_16eukovhtu33-0{list-style-type:none}.lst-kix_herycab31j2a-8>li:before{content:"\0025a0  "}.lst-kix_nxjzkw9ekwnk-6>li:before{content:"\0025cf  "}.lst-kix_nxjzkw9ekwnk-4>li:before{content:"\0025cb  "}.lst-kix_nxjzkw9ekwnk-8>li:before{content:"\0025a0  "}.lst-kix_nxjzkw9ekwnk-2>li:before{content:"\0025a0  "}.lst-kix_k3rdkuom7ijv-5>li:before{content:"\0025a0  "}ul.lst-kix_5ix422mr1rnq-8{list-style-type:none}.lst-kix_k3rdkuom7ijv-7>li:before{content:"\0025cb  "}ul.lst-kix_qcfysk3gr1ej-2{list-style-type:none}ul.lst-kix_qcfysk3gr1ej-3{list-style-type:none}ul.lst-kix_qcfysk3gr1ej-0{list-style-type:none}ul.lst-kix_qcfysk3gr1ej-1{list-style-type:none}ul.lst-kix_qcfysk3gr1ej-6{list-style-type:none}.lst-kix_k3rdkuom7ijv-1>li:before{content:"\0025cb  "}ul.lst-kix_qcfysk3gr1ej-7{list-style-type:none}.lst-kix_6cm39fkb7m42-3>li:before{content:"\0025cf  "}ul.lst-kix_qcfysk3gr1ej-4{list-style-type:none}ul.lst-kix_qcfysk3gr1ej-5{list-style-type:none}.lst-kix_k3rdkuom7ijv-3>li:before{content:"\0025cf  "}ul.lst-kix_qcfysk3gr1ej-8{list-style-type:none}.lst-kix_6cm39fkb7m42-1>li:before{content:"\0025cb  "}.lst-kix_nxjzkw9ekwnk-0>li:before{content:"\0025cf  "}.lst-kix_7o9ou2w0r811-7>li:before{content:"\0025cb  "}.lst-kix_6cm39fkb7m42-5>li:before{content:"\0025a0  "}.lst-kix_6cm39fkb7m42-7>li:before{content:"\0025cb  "}.lst-kix_jvri6di0i9ru-3>li:before{content:"\0025cf  "}.lst-kix_jvri6di0i9ru-5>li:before{content:"\0025a0  "}ul.lst-kix_utsbfkm2i00z-8{list-style-type:none}.lst-kix_jvri6di0i9ru-2>li:before{content:"\0025a0  "}.lst-kix_jvri6di0i9ru-6>li:before{content:"\0025cf  "}ul.lst-kix_7o9ou2w0r811-6{list-style-type:none}ul.lst-kix_nxjzkw9ekwnk-2{list-style-type:none}ul.lst-kix_7o9ou2w0r811-5{list-style-type:none}ul.lst-kix_nxjzkw9ekwnk-3{list-style-type:none}.lst-kix_utsbfkm2i00z-6>li:before{content:"\0025cf  "}ul.lst-kix_7o9ou2w0r811-4{list-style-type:none}ul.lst-kix_nxjzkw9ekwnk-4{list-style-type:none}ul.lst-kix_7o9ou2w0r811-3{list-style-type:none}ul.lst-kix_nxjzkw9ekwnk-5{list-style-type:none}.lst-kix_jvri6di0i9ru-1>li:before{content:"\0025cb  "}.lst-kix_jvri6di0i9ru-7>li:before{content:"\0025cb  "}.lst-kix_utsbfkm2i00z-5>li:before{content:"\0025a0  "}ul.lst-kix_7o9ou2w0r811-2{list-style-type:none}ul.lst-kix_7o9ou2w0r811-1{list-style-type:none}ul.lst-kix_7o9ou2w0r811-0{list-style-type:none}ul.lst-kix_nxjzkw9ekwnk-0{list-style-type:none}ul.lst-kix_nxjzkw9ekwnk-1{list-style-type:none}.lst-kix_jvri6di0i9ru-0>li:before{content:"\0025cf  "}.lst-kix_jvri6di0i9ru-8>li:before{content:"\0025a0  "}.lst-kix_utsbfkm2i00z-3>li:before{content:"\0025cf  "}.lst-kix_utsbfkm2i00z-2>li:before{content:"\0025a0  "}.lst-kix_utsbfkm2i00z-4>li:before{content:"\0025cb  "}ul.lst-kix_7o9ou2w0r811-8{list-style-type:none}ul.lst-kix_7o9ou2w0r811-7{list-style-type:none}ul.lst-kix_utsbfkm2i00z-4{list-style-type:none}ul.lst-kix_utsbfkm2i00z-5{list-style-type:none}.lst-kix_utsbfkm2i00z-0>li:before{content:"\0025cf  "}ul.lst-kix_utsbfkm2i00z-6{list-style-type:none}ul.lst-kix_utsbfkm2i00z-7{list-style-type:none}ul.lst-kix_utsbfkm2i00z-0{list-style-type:none}.lst-kix_utsbfkm2i00z-1>li:before{content:"\0025cf  "}ul.lst-kix_utsbfkm2i00z-1{list-style-type:none}ul.lst-kix_utsbfkm2i00z-2{list-style-type:none}ul.lst-kix_utsbfkm2i00z-3{list-style-type:none}ul.lst-kix_nxjzkw9ekwnk-6{list-style-type:none}ul.lst-kix_nxjzkw9ekwnk-7{list-style-type:none}ul.lst-kix_nxjzkw9ekwnk-8{list-style-type:none}.lst-kix_7o9ou2w0r811-5>li:before{content:"\0025a0  "}.lst-kix_qcfysk3gr1ej-6>li:before{content:"\0025cf  "}.lst-kix_qcfysk3gr1ej-8>li:before{content:"\0025a0  "}.lst-kix_7o9ou2w0r811-3>li:before{content:"\0025cf  "}.lst-kix_7o9ou2w0r811-4>li:before{content:"\0025cb  "}.lst-kix_qcfysk3gr1ej-7>li:before{content:"\0025cb  "}ul.lst-kix_6cm39fkb7m42-7{list-style-type:none}.lst-kix_7o9ou2w0r811-1>li:before{content:"\0025cb  "}.lst-kix_7o9ou2w0r811-2>li:before{content:"\0025a0  "}ul.lst-kix_6cm39fkb7m42-6{list-style-type:none}ul.lst-kix_6cm39fkb7m42-8{list-style-type:none}.lst-kix_qcfysk3gr1ej-4>li:before{content:"\0025cb  "}.lst-kix_qcfysk3gr1ej-5>li:before{content:"\0025a0  "}ul.lst-kix_herycab31j2a-7{list-style-type:none}ul.lst-kix_herycab31j2a-6{list-style-type:none}ul.lst-kix_6cm39fkb7m42-1{list-style-type:none}ul.lst-kix_herycab31j2a-8{list-style-type:none}ul.lst-kix_6cm39fkb7m42-0{list-style-type:none}ul.lst-kix_6cm39fkb7m42-3{list-style-type:none}.lst-kix_7o9ou2w0r811-0>li:before{content:"\0025cf  "}ul.lst-kix_6cm39fkb7m42-2{list-style-type:none}ul.lst-kix_6cm39fkb7m42-5{list-style-type:none}ul.lst-kix_6cm39fkb7m42-4{list-style-type:none}ul.lst-kix_herycab31j2a-1{list-style-type:none}ul.lst-kix_herycab31j2a-0{list-style-type:none}ul.lst-kix_herycab31j2a-3{list-style-type:none}ul.lst-kix_herycab31j2a-2{list-style-type:none}ul.lst-kix_herycab31j2a-5{list-style-type:none}ul.lst-kix_herycab31j2a-4{list-style-type:none}.lst-kix_qcfysk3gr1ej-0>li:before{content:"\0025cf  "}.lst-kix_qcfysk3gr1ej-3>li:before{content:"\0025cf  "}.lst-kix_utsbfkm2i00z-7>li:before{content:"\0025cb  "}.lst-kix_utsbfkm2i00z-8>li:before{content:"\0025a0  "}.lst-kix_qcfysk3gr1ej-2>li:before{content:"\0025a0  "}.lst-kix_jvri6di0i9ru-4>li:before{content:"\0025cb  "}.lst-kix_qcfysk3gr1ej-1>li:before{content:"\0025cb  "}.lst-kix_nxjzkw9ekwnk-7>li:before{content:"\0025cb  "}.lst-kix_nxjzkw9ekwnk-3>li:before{content:"\0025cf  "}.lst-kix_nxjzkw9ekwnk-1>li:before{content:"\0025cb  "}.lst-kix_k3rdkuom7ijv-6>li:before{content:"\0025cf  "}.lst-kix_k3rdkuom7ijv-4>li:before{content:"\0025cb  "}.lst-kix_k3rdkuom7ijv-8>li:before{content:"\0025a0  "}.lst-kix_nxjzkw9ekwnk-5>li:before{content:"\0025a0  "}.lst-kix_k3rdkuom7ijv-0>li:before{content:"\0025cf  "}.lst-kix_6cm39fkb7m42-4>li:before{content:"\0025cb  "}.lst-kix_k3rdkuom7ijv-2>li:before{content:"\0025a0  "}.lst-kix_6cm39fkb7m42-2>li:before{content:"\0025a0  "}.lst-kix_6cm39fkb7m42-0>li:before{content:"\0025cf  "}.lst-kix_7o9ou2w0r811-6>li:before{content:"\0025cf  "}.lst-kix_7o9ou2w0r811-8>li:before{content:"\0025a0  "}ul.lst-kix_k3rdkuom7ijv-7{list-style-type:none}ul.lst-kix_k3rdkuom7ijv-8{list-style-type:none}ul.lst-kix_k3rdkuom7ijv-5{list-style-type:none}ul.lst-kix_k3rdkuom7ijv-6{list-style-type:none}ul.lst-kix_k3rdkuom7ijv-3{list-style-type:none}ul.lst-kix_k3rdkuom7ijv-4{list-style-type:none}ul.lst-kix_k3rdkuom7ijv-1{list-style-type:none}ul.lst-kix_k3rdkuom7ijv-2{list-style-type:none}.lst-kix_6cm39fkb7m42-6>li:before{content:"\0025cf  "}.lst-kix_6cm39fkb7m42-8>li:before{content:"\0025a0  "}ul.lst-kix_k3rdkuom7ijv-0{list-style-type:none}ol{margin:0;padding:0}table td,table th{padding:0}.c12{color:#666666;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Arial";font-style:normal}.c8{color:#000000;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c13{color:#1155cc;text-decoration:underline;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c30{color:#000000;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Arial";font-style:normal}.c29{color:#000000;text-decoration:none;vertical-align:baseline;font-size:18pt;font-family:"Arial";font-style:normal}.c2{color:#000000;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Courier New";font-style:normal}.c25{color:#000000;text-decoration:none;vertical-align:baseline;font-size:30pt;font-family:"Arial";font-style:normal}.c15{color:#000000;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:"Arial";font-style:normal}.c38{color:#000000;text-decoration:none;vertical-align:baseline;font-size:14pt;font-style:normal}.c43{color:#000000;text-decoration:none;font-size:11pt;font-style:normal}.c28{color:#000000;text-decoration:none;vertical-align:baseline;font-size:11pt}.c3{margin-left:108pt;padding-top:0pt;padding-bottom:0pt}.c22{padding-top:18pt;padding-bottom:4pt;height:14pt}.c44{background-color:#ffffff;max-width:523.3pt;padding:36pt 36pt 36pt 36pt}.c21{padding:0;margin:0}.c27{padding-top:14pt;padding-bottom:4pt}.c4{font-weight:700;font-family:"Courier New"}.c35{padding-top:24pt;padding-bottom:6pt}.c17{color:#1155cc;text-decoration:underline}.c24{padding-top:18pt;padding-bottom:4pt}.c9{color:inherit;text-decoration:inherit}.c14{padding-top:0pt;padding-bottom:0pt}.c42{height:18pt}.c37{line-height:1.0}.c1{margin-left:72pt}.c7{height:11pt}.c11{padding-left:0pt}.c5{font-family:"Courier New"}.c16{margin-left:108pt}.c39{height:12pt}.c40{text-align:center}.c0{font-weight:400}.c41{height:14pt}.c10{margin-left:36pt}.c32{padding-top:18pt}.c20{margin-left:54pt}.c34{vertical-align:sub}.c6{font-weight:700}.c23{margin-left:144pt}.c26{margin-left:18pt}.c31{font-family:"Arial"}.c18{font-style:italic}.c19{line-height:1.15}.c33{margin-left:180pt}.c36{padding-top:14pt}.title{padding-top:24pt;color:#000000;font-weight:700;font-size:30pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;text-align:left}.subtitle{padding-top:18pt;color:#666666;font-size:24pt;padding-bottom:4pt;font-family:"Georgia";line-height:1.15;font-style:italic;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:24pt;color:#000000;font-weight:700;font-size:18pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;text-align:left}h2{padding-top:18pt;color:#000000;font-weight:700;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;text-align:left}h3{padding-top:14pt;color:#666666;font-weight:700;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;text-align:left}h4{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:2pt;font-family:"Arial";line-height:1.15;font-style:italic;text-align:left}h5{padding-top:11pt;color:#666666;font-weight:700;font-size:10pt;padding-bottom:2pt;font-family:"Arial";line-height:1.15;text-align:left}h6{padding-top:10pt;color:#666666;font-size:10pt;padding-bottom:2pt;font-family:"Arial";line-height:1.15;font-style:italic;text-align:left}
  /*]]>*/
  </style>

  <title></title>
</head>

<body class="c44">
  <p class=" title" id="h.vqantooav6cy"><span class=
  "c6 c25">GO-SUSI Operator&#8217;s Manual</span></p>

  <p class="c26"><span class="c17 c0"><a class="c9" href=
  "#h.qpuowmrty7yb">Overview</a></span></p>

  <p class="c26"><span class="c17 c0"><a class="c9" href=
  "#h.u0s09hxn0kr0">Invocation</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.noyiy3hxsuzj">Background operation</a></span></p>

  <p class="c26"><span class="c17 c0"><a class="c9" href=
  "#h.kargb81n8lw4">Configuration</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.vv09slb55j">DNS configuration</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.bqrhjen52ghs">TCP Keep-Alive</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.rhxe5y7vanz9">Configuration file
  /etc/gosa-si/server.conf</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.7fa10jpoaora">Configuration file
  /etc/gosa-si/client.conf</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.bf0dgl3dgls6">Configuration file
  /etc/gosa/ou=servers.conf</a></span></p>

  <p class="c26"><span class="c17 c0"><a class="c9" href=
  "#h.v12xmehtov9u">Hooks</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.emgj929gpns8">Hook environment</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.uflhopltjofk">kernel-list-hook</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.lcg0co1fq2xh">package-list-hook</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.jl9h7nlx12bl">user-msg-hook</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.3eksnwm3fz5s">pxelinux-cfg-hook</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.4xal5cuhnf5d">TFTP hooks</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.tmddyclmp68v">new-config-hook</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.ajcepjvthivg">trigger-action-hook</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.kha1w05s1k8z">registered-hook</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.aksqy9t8gyyf">activated-hook</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.ujvi2n3gkv1g">detect-hardware-hook</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.i2wshb9a7t92">fai-progress-hook</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.md5sni9nns2l">fai-savelog-hook</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.3mo9jc2jx47x">fai-audit-hook</a></span></p>

  <p class="c26"><span class="c17 c0"><a class="c9" href=
  "#h.hzdxkgexaqdo">Interfacing with go-susi</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.36xshbk95lq">TCP connection to [server]/port</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.99ysh1gd1xn3">TCP connection to [faimon]/port</a></span></p>

  <p class="c10"><span class="c0 c17"><a class="c9" href=
  "#h.ue6pv2ufxyrz">TFTP server on [tftp]/port (UDP)</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.l0vggs5nqxsf">Signals</a></span></p>

  <p class="c26"><span class="c17 c0"><a class="c9" href=
  "#h.3dolgdo847j1">/var/lib/go-susi database</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.4alj9q9r8lq3">jobdb.xml</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.50wdi3uufl9n">serverdb.xml</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.q5bbvyapnxmg">clientdb.xml</a></span></p>

  <p class="c26"><span class="c17 c0"><a class="c9" href=
  "#h.ed4sng37wuoy">Messages</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.yo95uphqjhiy">Modern communication protocol (go-susi
  only)</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.cd7ky6j7y55t">Legacy communication protocol (compatible with
  gosa-si)</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.q0xsu7rifamf">Message structure and common
  elements</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.v3ibvnwfeq4q">Reply structure</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.sh9p65qhzwco">Error replies</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.1tre848fj84d">Encryption keys</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.o2gkp1mdgfab">Jobs</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.lytqmekfw49">job_trigger_action_*</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.18ajv1iep81s">gosa_trigger_action_*</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.rfc7061kx2wn">job_trigger_activate_new</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.b1cynga2n4f7">gosa_set_activated_for_installation</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.vc4zvgp0v9ry">job_set_activated_for_installation</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.y5al68gnxmpw">job_send_user_msg</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.wj0yc4cuajj2">gosa_query_jobdb</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.am3mtnji9zso">gosa_delete_jobdb_entry</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.aa2wm0ojc2ux">gosa_update_status_jobdb_entry</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.n1abt4rakrkh">Server - Server</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.ggvkhagjviu">new_server</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.t6s5fv3aa5zt">confirm_new_server</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.d21gga45wxtz">foreign_job_updates</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.4o43ycaft42x">new_foreign_client</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.z3ec199pha6w">trigger_wake</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.w73b9qoqu5cg">Client - Server</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.w909y3vom7bh">here_i_am</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.uw29iuabpm6q">new_key</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.w5skplmpyja8">registered</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.adu9m7a7h8yw">deregistered</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.l3p6rg78vgh1">new_ldap_config</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.gprzmis7xdu9">new_ntp_config</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.hoqs75a5zaxq">detect_hardware</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.ylkn6o4e9qjp">detected_hardware</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.ylgwskj1nfmx">trigger_action_*</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.g0n6u5xsrhzi">Installation and Softupdate</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.finq4l4vjm98">set_activated_for_installation</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.ntyp12z772rh">CLMSG_PROGRESS</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.n5rmujuoqo6x">CLMSG_GOTOACTIVATION</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.95smg2f0t4s6">CLMSG_save_fai_log</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.g7r8biivaqpb">CLMSG_&lt;FAI MONITOR EVENT&gt;</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.69oiwe17guu6">CLMSG_TASKBEGIN / CLMSG_TASKERROR /
  CLMSG_TASKEND</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.2sm8tu2tcdzu">CLMSG_TASKDIE</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.z4re866t15e6">CLMSG_check</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.p40mxwr1vmxg">Query various information</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.vnc6qrea3m0g">gosa_query_fai_server</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.1c4dc8mqlioo">gosa_query_fai_release</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.k0ukjz6z8za5">gosa_query_packages_list</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.3ws61p27du89">gosa_get_available_kernel</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.n4mrnc8f9h1c">gosa_show_log_by_mac</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.mgjs4al2n8iv">gosa_show_log_files_by_date_and_mac</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.87z05qg5bmin">gosa_get_log_file_by_date_and_mac</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.pff3kf2jf7hm">gosa_query_audit</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.2t7lsoilmbdq">gosa_query_audit_aggregate</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.mehsqejmttjq">Miscellaneous</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.lysjsrs0l1xj">gosa_ping</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.sp869tnshz6d">panic</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.1f6kgewdm74c">sistats</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.4syp8tvmprfx">gosa_trigger_reload_ldap_config</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.9n1vwe81fzyi">gosa_recreate_fai_release_db</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.fn2pc4k1bcbp">Deprecated</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.itw5nv66zjdc">CLMSG_CURRENTLY_LOGGED_IN</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.p7etfjet6df2">CLMSG_LOGIN</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.o8zsmxn55w4">CLMSG_LOGOUT</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.1nxkurs4dznc">information_sharing</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.le5ca3ebk6m4">usr_msg</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.tjnsr0p4y1zm">confirm_usr_msg</a></span></p>

  <p class="c26"><span class="c17 c0"><a class="c9" href=
  "#h.7g7l42ni6zqg">Appendix</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.bumhouula4zt">sibridge</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.gieyvwnkib9d">SYNOPSIS</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.uveotml3h6xt">DESCRIPTION</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.n3hj3y4xe5mb">OPTIONS</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.6rx898z6itc8">TLS CERTIFICATES</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.p43j0wkucxlz">generate_package_list</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.7kplqidsegca">SYNOPSIS</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.4p55nppm0mq2">DESCRIPTION</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.80bfn3ok2vz7">WARNING</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.pw7zmxe7trmy">ENVIRONMENT</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.3chfrh90z9ft">initrd_autopack</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.b4p9n1w3grfh">SYNOPSIS</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.9u6o9qfwa26i">DESCRIPTION</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.dqyfzc39cpkr">OPTIONS</a></span></p>

  <p class="c10"><span class="c17 c0"><a class="c9" href=
  "#h.fiklmh4wvmzp">TLS Certificates</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.o7klfc2r3utv">DESCRIPTION</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.7y1jg8wwidfm">subjectAltName</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.8cv517swdkbd">Connection and data transfer
  limits</a></span></p>

  <p class="c20"><span class="c17 c0"><a class="c9" href=
  "#h.exo83ys82p8g">Access control by feature</a></span></p>

  <p class="c26"><span class="c17 c0"><a class="c9" href=
  "#h.jjoyi1fwsh2p">License</a></span></p>
  <hr style="page-break-before:always;display:none;" />

  <h1 class="c42" id="h.nl56x0kbrp6g"></h1><a id="id.jes9sqqlstzn"
  name="id.jes9sqqlstzn"></a>

  <h1 class="" id="h.qpuowmrty7yb"><span class=
  "c29 c6">Overview</span></h1><a id="id.hjmnt8awkh8s" name=
  "id.hjmnt8awkh8s"></a>

  <p class=""><span class="c8 c0">go-susi is a daemon that performs
  the following functions:</span></p>

  <ul class="c21 lst-kix_ufzf1orjb24z-0 start">
    <li class="c11 c10"><span class="c8 c0">Maintain various
    databases for GOsa. For instance go-susi manages a database of
    Debian packages that GOsa presents to the user for creating
    package lists.</span></li>

    <li class="c11 c10"><span class="c8 c0">Send messages to
    clients on behalf of GOsa to trigger some action such as
    wake-on-lan.</span></li>

    <li class="c11 c10"><span class="c8 c0">Maintain a schedule of
    jobs and trigger their execution at the appropriate
    time.</span></li>

    <li class="c11 c10"><span class="c8 c0">Monitor the progress of
    long-running jobs such as installations.</span></li>

    <li class="c11 c10"><span class="c8 c0">Communicate the job
    schedule and progress to other servers so that each instance of
    GOsa can query up-to-date data from its respective go-susi
    instance.</span></li>

    <li class="c11 c10"><span class="c8 c0">Collect data from
    clients and make it available to GOsa (e.g. installation
    logs).</span></li>

    <li class="c10 c11"><span class="c8 c0">Query an LDAP directory
    on behalf of GOsa.</span></li>

    <li class="c11 c10"><span class="c8 c0">Make changes to LDAP
    data on behalf of GOsa or in reaction to other events (such as
    job completion).</span></li>
  </ul>

  <h1 class="" id="h.u0s09hxn0kr0"><span class=
  "c29 c6">Invocation</span></h1>

  <p class=""><span class="c0">Most of the time you would not
  invoke go-susi directly. The preferred way to invoke go-susi is
  to use appropriate Upstart/SystemD jobs</span><span class=
  "c8 c0">.</span></p>

  <p class=""><span class="c0">When invoked directly,</span>
  <span class="c8 c0">go-susi understands the following command
  line arguments:</span></p><a id="id.7rmu3qjxnnyy" name=
  "id.7rmu3qjxnnyy"></a>

  <p class=""><span class="c4">--help</span></p><a id=
  "id.f852w3yjg198" name="id.f852w3yjg198"></a>

  <p class="c10"><span class="c8 c0">print usage and
  exit.</span></p>

  <p class=""><span class="c2 c6">--version</span></p>

  <p class="c10"><span class="c8 c0">print version and
  exit.</span></p>

  <p class=""><span class="c2 c6">--stats</span></p>

  <p class="c10"><span class="c0">send a running go-susi process
  an</span> <span class="c5 c0">sistats</span><span class=
  "c8 c0">&#160;message, print out the returned data and
  exit.</span></p>

  <p class=""><span class="c2 c6">-c &lt;file&gt;</span></p>

  <p class="c10"><span class="c8 c0">go-susi will read its
  configuration from &lt;file&gt; instead of the default location.
  If both --test and -c are specified, the last switch on the
  command line will determine the config file location.</span></p>

  <p class=""><span class="c2 c6">-f</span></p>

  <p class="c10"><span class="c0">start with a fresh database.
  go-susi will not load data from</span> <span class=
  "c5 c0">/var/lib/go-susi.</span></p>

  <p class=""><span class="c2 c6">-v</span></p>

  <p class="c10"><span class="c8 c0">go-susi will log INFO level
  log messages (by default only ERRORs are logged). INFO level
  messages may aid the administrator in debugging
  problems.</span></p>

  <p class=""><span class="c2 c6">-vv</span></p>

  <p class="c10"><span class="c8 c0">go-susi will log INFO and
  DEBUG level log messages. DEBUG level messages are useful only
  for developers and may produce so much data that it affects
  performance. They also contain cleartext passwords.</span></p>

  <p class=""><span class="c2 c6">--test=&lt;dir&gt;</span></p>

  <ul class="c21 lst-kix_utsbfkm2i00z-1 start">
    <li class="c1 c11"><span class="c0">go-susi will read
    configuration files from &lt;dir&gt; instead of</span>
    <span class="c5 c0">/etc/gosa-si.</span></li>

    <li class="c1 c11"><span class="c0">the default log file will
    be</span> <span class=
    "c5 c0">&lt;dir&gt;/go-susi.log.</span></li>

    <li class="c1 c11"><span class="c0">the database files will be
    stored in</span> <span class=
    "c5 c0">&lt;dir&gt;</span><span class="c0">&#160;instead
    of</span> <span class="c5 c0">/var/lib/go-susi.</span></li>

    <li class="c1 c11"><span class="c0">installation/softupdate
    logs will be stored in</span> <span class=
    "c5 c0">&lt;dir&gt;</span><span class="c0">&#160;instead
    of</span> <span class="c5 c0">/var/log/fai.</span></li>
  </ul>

  <h2 class="" id="h.noyiy3hxsuzj"><span class="c15 c6">Background
  operation</span></h2>

  <p class=""><span class="c0">go-susi does not put itself into the
  background, does not create a new session and does not ignore
  SIGHUP. Nor does go-susi create a PID file. If you want to do any
  of these things from a shell script (e.g. a classic init script),
  use utilities such as setsid(1), nohup(1) and
  start-stop-daemon(8) in combination with the shell's &amp;
  operator, subshells, exec and variables like $BASHPID (which
  gives the PID of the subshell unlike $$). Note that none of these
  things is necessary when go-susi is invoked by
  Upstart/SystemD.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h1 class="" id="h.kargb81n8lw4"><span class=
  "c29 c6">Configuration</span></h1>

  <h2 class="" id="h.vv09slb55j"><span class="c15 c6">DNS
  configuration</span></h2>

  <p class=""><span class="c0">go-susi will use DNS to locate other
  go-susi and gosa-si instances. When go-susi starts it will
  contact other servers listed in DNS to update its job schedule
  and announce its presence so that the other servers will pass on
  future information to the new go-susi instance. This can be
  disabled via</span> <span class=
  "c2 c0">[ServerPackages]/dns-lookup.</span></p>

  <p class=""><span class="c8 c0">To list a server in DNS, create
  an SRV record for the service "gosa-si" and protocol "tcp" within
  the same subdomain of the go-susi that should pick it
  up.</span></p>

  <h2 class="" id="h.bqrhjen52ghs"><span class="c15 c6">TCP
  Keep-Alive</span></h2>

  <p class=""><span class="c8 c0">In order to keep its job database
  consistent with its peers, go-susi needs to detect when a peer is
  unreachable. Error conditions that close the TCP connection to
  the peer, such as when the peer process crashes or is shut down,
  are always detected reliably. However error conditions at the
  network level, such as a broken network cable, can only be
  detected if TCP keep-alive is properly configured.</span></p>

  <p class=""><span class="c8 c0">By default the Linux kernel will
  not send the first keep-alive packet until hours after the last
  data transmission. This is too long if you want go-susi to have
  an accurate up-to-date view of peer jobs. The following commands
  configure the kernel to start keep-alive when no data has been
  transmitted for 30s, to wait 10s between keep-alive packets and
  to mark the connection as broken if 5 keep-alive packets remain
  unanswered. This causes broken connections to be detected after
  about 1 &#189; minutes.</span></p>

  <p class="c7"></p>

  <p class="c10"><span class="c2 c0">echo 30
  &gt;/proc/sys/net/ipv4/tcp_keepalive_time</span></p>

  <p class="c10"><span class="c2 c0">echo 10
  &gt;/proc/sys/net/ipv4/tcp_keepalive_intvl</span></p>

  <p class="c10"><span class="c5 c0">echo &#160;5
  &gt;/proc/sys/net/ipv4/tcp_keepalive_probes</span></p><a id=
  "id.ghm1et7cq23q" name="id.ghm1et7cq23q"></a>

  <h2 class="" id="h.rhxe5y7vanz9"><span class=
  "c6 c15">Configuration file /etc/gosa-si/server.conf</span></h2>

  <p class=""><span class="c8 c0">/etc/gosa-si/server.conf
  configures various aspects of go-susi's behaviour. It has the
  following general structure:</span></p>

  <p class="c7"></p><a id="id.w63fd9fui69z" name=
  "id.w63fd9fui69z"></a>

  <p class="c10"><span class="c2 c0">[section1]</span></p>

  <p class="c10"><span class="c2 c0">param1 = value1</span></p>

  <p class="c10"><span class="c2 c0">param2 = value2</span></p>

  <p class="c10"><span class="c2 c0">...</span></p>

  <p class="c7 c10"></p>

  <p class="c10"><span class="c2 c0">[section2]</span></p>

  <p class="c10"><span class="c2 c0">...</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c0">go-susi evaluates the following
  sections/parameters from this file. All other sections/parameters
  are ignored.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c2 c6">[any section]</span></p>

  <p class="c10"><span class="c2 c6">key</span></p>

  <p class="c1"><span class="c8 c0">go-susi collects all keys from
  all sections and will use them to decrypt messages.</span></p>

  <p class=""><span class="c2 c6">[general]</span></p>

  <p class="c10"><span class="c2 c6">log-file</span></p>

  <p class="c1"><span class="c0">The path of go-susi&#8217;s log
  file. Default is</span> <span class=
  "c5 c0">/var/log/go-susi.log.</span></p>

  <p class="c10"><span class="c2 c6">fai-log-dir</span></p>

  <p class="c1"><span class="c0">The directory where the
  subdirectories for client log files received via</span>
  <span class="c5 c0">CLMSG_save_fai_log</span><span class=
  "c0">&#160;will be created. Default is</span> <span class=
  "c5 c0">/var/log/fai.</span></p>

  <p class="c10"><span class=
  "c2 c6">kernel-list-hook</span></p><a id="id.3uhjxiaklp5d" name=
  "id.3uhjxiaklp5d"></a>

  <p class="c1"><span class="c0">The path of a program that
  generates a list of kernels supported for each release. See the
  section</span> <span class=
  "c4">kernel-list-hook</span><span class="c0">&#160;further below.
  Default is</span> <span class=
  "c5 c0">/usr/lib/go-susi/generate_kernel_list.</span></p>

  <p class="c10"><span class="c2 c6">package-list-hook</span></p>

  <p class="c1"><span class="c0">The path of a program that
  generates a list of packages included in each release. See the
  section</span> <span class=
  "c4">package-list-hook</span><span class="c0">&#160;further
  below. Default is</span> <span class=
  "c5 c0">/usr/lib/go-susi/generate_package_list.</span></p>

  <p class="c10"><span class="c2 c6">user-msg-hook</span></p>

  <p class="c1"><span class="c0">The path of a program to
  handle</span> <span class=
  "c5 c0">job_send_user_msg</span><span class="c0">&#160;messages.
  See the section</span> <span class=
  "c4">user-msg-hook</span><span class="c0">&#160;further below.
  Default is</span> <span class=
  "c5 c0">/usr/lib/go-susi/send_user_msg.</span></p>

  <p class="c10"><span class="c2 c6">pxelinux-cfg-hook</span></p>

  <p class="c1"><span class="c0 c18">(deprecated, see [tftp]//path
  for the replacement feature)</span><span class="c0">&#160;The
  path of a program that will be called when go-susi's TFTP server
  is asked for a file that matches "</span><span class=
  "c5 c0">pxelinux.cfg/01-&lt;MAC&gt;</span><span class="c0">". See
  the section</span> <span class=
  "c4">pxelinux-cfg-hook</span><span class="c0">&#160;further
  below. Default is</span> <span class=
  "c5 c0">/usr/lib/go-susi/generate_pxelinux_cfg.</span></p>

  <p class="c10"><span class="c2 c6">new-config-hook</span></p>

  <p class="c1"><span class="c0">The path of a program that will be
  called when go-susi receives a message of type</span>
  <span class="c5 c0">new_foo_config</span><span class=
  "c0">&#160;(for all kinds of "foo"). See the section</span>
  <span class="c4">new-config-hook</span><span class=
  "c0">&#160;further below. Default is</span> <span class=
  "c2 c0">/usr/lib/go-susi/update_config_files.</span></p>

  <p class="c10"><span class="c2 c6">trigger-action-hook</span></p>

  <p class="c1"><span class="c0">The path of a program that will be
  called when go-susi receives a message of type</span>
  <span class="c5 c0">trigger_action_foo</span><span class=
  "c0">&#160;(for all kinds of "foo"). See the section</span>
  <span class="c4">trigger-action-hook</span><span class=
  "c0">&#160;further below. Default is</span> <span class=
  "c2 c0">/usr/lib/go-susi/trigger_action.</span></p>

  <p class="c10"><span class="c2 c6">registered-hook</span></p>

  <p class="c1"><span class="c0">The path of a program that will be
  called when go-susi has completed a successful registration at an
  si-server. See the section</span> <span class=
  "c4">registered-hook</span><span class="c0">&#160;further below.
  Default is</span> <span class=
  "c2 c0">/usr/lib/go-susi/registered.</span></p>

  <p class="c10"><span class="c2 c6">activated-hook</span></p>

  <p class="c1"><span class="c0">The path of a program that will be
  called when go-susi receives a</span> <span class=
  "c5 c0">set_activated_for_installation</span><span class=
  "c0">&#160;message. See the section</span> <span class=
  "c4">activated-hook</span><span class="c0">&#160;further below.
  Default is</span> <span class=
  "c2 c0">/usr/lib/go-susi/activated.</span></p>

  <p class="c10"><span class=
  "c2 c6">detect-hardware-hook</span></p>

  <p class="c1"><span class="c0">The path of a program that will be
  called when go-susi receives a</span> <span class=
  "c5 c0">detect_hardware</span><span class="c0">&#160;message. See
  the section</span> <span class=
  "c4">detect-hardware-hook</span><span class="c0">&#160;further
  below. Default is</span> <span class=
  "c2 c0">/usr/lib/go-susi/detect_hardware.</span></p>

  <p class="c10"><span class="c2 c6">fai-progress-hook</span></p>

  <p class="c1"><span class="c0">The path of a program that go-susi
  will launch and whose output it will read continually to provide
  FAI progress events that go-susi will convert into</span>
  <span class="c5 c0">CLMSG_*</span><span class=
  "c0">&#160;messages. See the section</span> <span class=
  "c4">fai-progress-hook</span><span class="c0">&#160;further
  below. Default is</span> <span class=
  "c2 c0">/usr/lib/go-susi/fai_progress.</span></p>

  <p class="c10"><span class="c2 c6">fai-savelog-hook</span></p>

  <p class="c1"><span class="c0">The path of a program go-susi
  calls when it sees</span> <span class="c5 c0">"TASKEND
  savelog"</span><span class="c0">&#160;in the output from
  fai-progress-hook. The output from this program is sent as</span>
  <span class="c5 c0">CLMSG_save_fai_log</span><span class=
  "c0">&#160;to the registration server. See the section</span>
  <span class="c4">fai-savelog-hook</span><span class=
  "c0">&#160;further below. Default is</span> <span class=
  "c2 c0">/usr/lib/go-susi/fai_savelog.</span></p>

  <p class="c10"><span class="c2 c6">fai-audit-hook</span></p>

  <p class="c1"><span class="c0">The path of a program go-susi
  calls when it sees</span> <span class="c5 c0">"TASKEND
  audit"</span><span class="c0">&#160;in the output from
  fai-progress-hook. The output from this program is sent as</span>
  <span class="c5 c0">CLMSG_save_fai_log</span><span class=
  "c0">&#160;to the registration server. See the section</span>
  <span class="c4">fai-audit-hook</span><span class=
  "c0">&#160;further below. Default is</span> <span class=
  "c2 c0">/usr/lib/go-susi/fai_audit.</span></p>

  <p class="c7"></p>

  <p class="c7"></p>

  <p class=""><span class="c2 c6">[server]</span></p>

  <p class="c10"><span class="c2 c6">port</span></p>

  <p class="c1"><span class="c8 c0">The port the server should
  listen at for XML messages. Default is 20081.</span></p>

  <p class="c10"><span class="c2 c6">ldap-uri</span></p>

  <p class="c1"><span class="c0">URI for connecting with the LDAP
  server. Default is</span> <span class=
  "c2 c0">ldap://localhost:389.</span></p>

  <p class="c10"><span class="c2 c6">ldap-base</span></p>

  <p class="c1"><span class="c0">A DN. LDAP lookups will be
  restricted to the subtree rooted here. Default is</span>
  <span class="c2 c0">c=de.</span></p>

  <p class="c10"><span class="c2 c6">new-systems-base</span></p>

  <p class="c1"><span class="c0">Full DN or partial DN ending in
  ",". In the latter case</span> <span class=
  "c4">ldap-base</span><span class="c0">&#160;will be appended.
  LDAP objects for new systems will be created under this base.
  Default is "</span><span class="c2 c0">ou=incoming,".</span></p>

  <p class="c10"><span class="c2 c6">ldap-admin-dn</span></p>

  <p class="c1"><span class="c8 c0">DN of the account to use for
  write access to LDAP. There is no default value. If this option
  is not set, go-susi will function in client-only mode, i.e.
  basically behave like a gosa-si-client, whereas otherwise it
  would behave like a combination of gosa-si-server and
  gosa-si-client.</span></p>

  <p class="c10"><span class="c2 c6">ldap-admin-password</span></p>

  <p class="c1"><span class="c0">Password of the account to use for
  LDAP write access. Default is</span> <span class=
  "c2 c0">"password".</span></p>

  <p class="c10"><span class="c2 c6">ldap-user-dn</span></p>

  <p class="c1"><span class="c8 c0">DN of the account to use for
  read access to LDAP. Default is empty which means anonymous
  access.</span></p>

  <p class="c10"><span class="c2 c6">ldap-user-password</span></p>

  <p class="c1"><span class="c8 c0">Password of the account to use
  for LDAP read access. Default is empty.</span></p>

  <p class="c10"><span class="c2 c6">ip</span></p>

  <p class="c1"><span class="c0">Name or IP address with or without
  port of the preferred server to register at when operating in
  client-only mode. If go-susi operates as a full server, it
  ignores this setting and only registers at itself. If no port is
  specified,</span> <span class=
  "c5 c0">[server]/port</span><span class="c8 c0">&#160;is
  used.</span></p>

  <p class="c1"><span class="c0">If registration at this server
  fails and</span> <span class=
  "c5 c0">[ServerPackages]/address</span><span class=
  "c0">&#160;lists servers, these will be tried and if</span>
  <span class=
  "c5 c0">[ServerPackages]/dns-lookup</span><span class="c8 c0">&#160;is
  true, servers listed in DNS will be tried, too.</span></p>

  <p class="c10"><span class="c4">dns-lookup</span></p>

  <p class="c1"><span class="c0">See</span> <span class=
  "c5 c0">[ServerPackages]/dns-lookup.</span><span class=
  "c0">&#160;The option may be specified in either section,
  but</span> <span class=
  "c5 c0">[ServerPackages]</span><span class="c8 c0">&#160;takes
  precedence.</span></p>

  <p class=""><span class="c2 c6">[client]</span></p>

  <p class="c10"><span class="c2 c6">port</span></p>

  <p class="c1"><span class="c0">A list of port numbers separated
  by commas and/or whitespace. The server expects standard clients
  to listen on one of these ports. Clients listening on other ports
  will be considered test clients and some functionality will be
  disabled for them. The</span> <span class=
  "c5 c0">[server]/port</span><span class="c0">&#160;is
  automatically appended to this list. Default is 20083,</span>
  <span class="c2 c0">[server]/port.</span></p>

  <p class=""><span class="c2 c6">[faimon]</span></p>

  <p class="c10"><span class="c2 c6">port</span></p>

  <p class="c1"><span class="c8 c0">The TCP port go-susi will
  listen on for FAI status messages. Default is
  &#8220;disabled&#8221;.</span></p>

  <p class=""><span class="c2 c6">[tls]</span></p>

  <p class="c10"><span class="c2 c6">ca-certificate</span></p>

  <p class="c1"><span class="c0">The path of the certificate in PEM
  format used to authenticate certificates presented by parties
  connecting to go-susi via TLS. Default is</span> <span class=
  "c5 c0">/etc/gosa-si/ca.cert.</span></p>

  <p class="c10"><span class="c2 c6">certificate</span></p>

  <p class="c1"><span class="c0">The path to the certificate in PEM
  format go-susi will present to the other party when connecting to
  them via TLS. Default is</span> <span class=
  "c5 c0">/etc/gosa-si/si.cert.</span></p>

  <p class="c10"><span class="c2 c6">keyfile</span></p>

  <p class="c1"><span class="c0">The path to the PKCS#8 private key
  in PEM format that corresponds to</span> <span class=
  "c5 c0">certificate</span><span class="c0">. Default is</span>
  <span class="c2 c0">/etc/gosa-si/si.key.</span></p>

  <p class=""><span class="c2 c6">[tftp]</span></p>

  <p class="c10"><span class="c2 c6">port</span></p>

  <p class="c1"><span class="c8 c0">The UDP port for go-susi's
  built-in TFTP server. Default is 69. Use &#8220;disable&#8221;,
  &#8220;none&#8221; or anything else that is not a valid port to
  disable the functionality.</span></p>

  <p class="c10"><span class="c2 c6">/path</span></p>

  <p class="c1"><span class="c0">Every parameter in the</span>
  <span class="c5 c0">[tftp]</span><span class=
  "c8 c0">&#160;section that starts with a slash "/" specifies a
  mapping from a virtual path that may be requested from the TFTP
  server (without the leading slash) to the data the TFTP server
  should send in response.</span></p>

  <p class="c1"><span class="c8 c0">If there is nothing on the
  right side of the "=" for the parameter, the TFTP server will
  respond with a "File not found" error, however this will be
  logged as an INFO! rather than an ERROR!.</span></p>

  <p class="c1"><span class="c0">If the value on the right side of
  the "=" does</span> <span class="c0 c18">not</span><span class=
  "c8 c0">&#160;start with "|", it is the actual filesystem path of
  the file whose contents should be returned.</span></p>

  <p class="c1"><span class="c0">If the value on the right side of
  the "="</span> <span class="c0 c18">does</span><span class=
  "c8 c0">&#160;start with "|", it is the path of a hook to
  execute.</span></p>

  <p class="c1"><span class="c0">See the section</span>
  <span class="c0 c18">TFTP hooks</span><span class=
  "c8 c0">&#160;for details.</span></p>

  <p class="c10"><span class="c2 c6">/^path_regex</span></p>

  <p class="c1"><span class="c0">Like</span> <span class=
  "c5 c0">/path</span><span class="c0">&#160;(see above) but</span>
  <span class="c5 c0">^path_regex</span><span class=
  "c8 c0">&#160;is treated as a regular expression (including the
  "^" which means that the regex has to match at the start of the
  TFTP request).</span></p>

  <p class="c1"><span class="c0">If the value on the right side of
  the "="</span> <span class="c0 c18">does</span><span class=
  "c8 c0">&#160;start with "|", it is the path of a hook to
  execute, optionally followed by arguments to pass. The stdout of
  that hook will be sent as response to the TFTP
  request.</span></p>

  <p class="c1"><span class="c0">The value to the left of the "="
  may contain references to capturing groups in the regex.</span>
  <span class="c5 c0">${1}, ${2}, ${3},...</span><span class=
  "c0">&#160;refer to the 1st, 2nd, 3rd,... capturing group.</span>
  <span class="c5 c0">${name}</span><span class="c0">&#160;refers
  to a named capturing group. A literal</span> <span class=
  "c5 c0">$</span><span class="c0">&#160;has to be written
  as</span> <span class="c5 c0">$$.</span><span class=
  "c0">&#160;The curly braces may be omitted, but be aware that
  e.g.</span> <span class="c5 c0">"$1x"</span> <span class="c0">is
  interpreted as</span> <span class=
  "c5 c0">"${1x}"</span><span class="c8 c0">&#160;which is probably
  not what you want.</span></p>

  <p class="c1"><span class="c0">If multiple</span> <span class=
  "c5 c0">/path</span><span class="c0">&#160;and/or</span>
  <span class="c5 c0">/^path_regex</span><span class=
  "c0">&#160;lines in the</span> <span class=
  "c5 c0">[tftp]</span><span class="c0">&#160;section match an
  incoming TFTP request, the</span> <span class=
  "c0 c18">last</span><span class="c0">&#160;one wins.</span></p>

  <p class=""><span class="c2 c6">[ServerPackages]</span></p>

  <p class="c10"><span class="c2 c6">address</span></p>

  <p class="c1"><span class="c0">A list of peer servers
  (format</span> <span class="c0 c18">host:port</span><span class=
  "c8 c0">) separated by commas and/or whitespace to communicate
  with in addition to those listed in DNS.</span></p>

  <p class="c10"><span class="c4">dns-lookup</span></p>

  <p class="c1"><span class="c0">If</span> <span class=
  "c5 c0">false</span><span class="c0">, then SRV records from DNS
  for tcp/gosa-si servers will be ignored. Note, however, that if
  another server contacts go-susi of its own accord, go-susi will
  start talking to this peer regardless of</span> <span class=
  "c2 c0">dns-lookup.</span></p>

  <p class="c10"><span class="c2 c6">domains</span></p>

  <p class="c1"><span class="c8 c0">When looking up machine names
  (e.g. for wake-on-lan) that are not fully qualified, if DNS can
  not resolve the name, re-attempt with each of the domains from
  this list appended. The list&#8217;s entries may be separated by
  commas or spaces and each entry may or may not start with a
  dot.</span></p>

  <h2 class="" id="h.7fa10jpoaora"><span class=
  "c15 c6">Configuration file /etc/gosa-si/client.conf</span></h2>

  <p class=""><span class="c0">For backwards compatibility with
  gosa-si-client, go-susi reads the configuration file</span>
  <span class="c5 c0">/etc/gosa-si/client.conf</span><span class=
  "c0">&#160;in addition to</span> <span class=
  "c5 c0">server.conf.</span><span class="c0">&#160;Both files are
  interpreted exactly the same. If both are present, settings from
  server.conf override conflicting settings from</span>
  <span class="c2 c0">client.conf.</span></p>

  <h2 class="c24" id="h.bf0dgl3dgls6"><span class=
  "c15 c6">Configuration file /etc/gosa/ou=servers.conf</span></h2>

  <p class=""><span class="c0">If this file exists, each line is
  interpreted as a DN. Whenever go-susi looks for repository
  servers, it will in addition to searching the complete tree
  under</span> <span class=
  "c5 c0">[server]/ldap-base</span><span class="c0">&#160;also
  search under each of the DNs listed in this file with one-level
  scope. The same configuration file is used by</span> <span class=
  "c5 c0">ldap2fai.php</span><span class="c0">&#160;from the</span>
  <span class="c5 c0">gosa-fai-helpers</span><span class=
  "c0">&#160;package. Use this file if you have repository server
  objects located in a part of the LDAP tree that is not
  under</span> <span class=
  "c5 c0">[server]/ldap-base.</span><span class=
  "c0">&#160;</span></p>
  <hr style="page-break-before:always;display:none;" />
  <a id="id.3yfqzfegrde0" name="id.3yfqzfegrde0"></a>

  <h1 class="" id="h.v12xmehtov9u"><span class=
  "c29 c6">Hooks</span></h1>

  <p class=""><span class="c0">go-susi outsources several functions
  that are directly integrated into gosa-si-server to external
  programs. These hook programs are configured in</span>
  <span class="c5 c0">server.conf</span><span class="c0">. To
  disable a hook completely, set it to</span> <span class=
  "c5 c0">"/bin/true".</span> <span class="c0">Do</span>
  <span class="c0 c18">not</span><span class="c0">&#160;use</span>
  <span class="c5 c0">"/dev/null"</span><span class="c0">! That
  will cause unnecessary ERROR messages. Only use</span>
  <span class="c5 c0">"/dev/null"</span><span class="c0">&#160;in
  places where a</span> <span class="c0 c18">non</span><span class=
  "c0">-executable file is to be suppressed</span><span class=
  "c8 c0">.</span></p>

  <h2 class="" id="h.emgj929gpns8"><span class="c15 c6">Hook
  environment</span></h2>

  <p class=""><span class="c8 c0">All hooks get a standard set of
  environment variables:</span></p>

  <p class=""><span class="c5 c0">MAC, IPADDRESS, SERVERPORT,
  HOSTNAME</span> <span class="c0">and</span><span class=
  "c5 c0">&#160;FQDN.</span><span class="c8 c0">&#160;All of these
  refer to the machine running the hook.</span></p>

  <p class="c7"></p>

  <h2 class="" id="h.uflhopltjofk"><span class=
  "c15 c6">kernel-list-hook</span></h2>

  <p class=""><span class="c0">go-susi relies on an external
  program to provide the list of kernels supported for each release
  (see message</span> <span class=
  "c5 c0">gosa_get_available_kernel</span><span class="c0">).
  go-susi calls this program after calling</span> <span class=
  "c5 c0">package-list-hook</span><span class="c0">&#160;and passes
  it the same</span> <span class=
  "c6">PackageListCacheDir</span><span class="c0">&#160;environment
  variable, so the</span> <span class=
  "c5 c0">kernel-list-hook</span><span class="c0">&#160;may use the
  cache created by</span> <span class=
  "c2 c0">package-list-hook.</span></p>

  <p class=""><span class="c0">The hook is</span> <span class=
  "c0">expected to print to standard output a list in LDIF format
  that lists all supported releases with all supported kernels.
  Each supported release should have at least one entry
  called</span> <span class="c5 c0">"default"</span><span class=
  "c8 c0">. The following example demonstrates the
  syntax:</span></p>

  <p class="c7 c10"></p>

  <p class="c10"><span class="c2 c0">dn:
  cn=vmlinuz-3.0.0-16-generic,ou=kernels,ou=4.1.0,ou=plophos,ou=fai</span></p>

  <p class="c10"><span class="c2 c0">cn:
  vmlinuz-3.0.0-16-generic</span></p>

  <p class="c10"><span class="c2 c0">release:
  plophos/4.1.0</span></p>

  <p class="c7 c10"></p>

  <p class="c10"><span class="c2 c0">dn:
  cn=default,ou=kernels,ou=4.1.0,ou=plophos,ou=fai</span></p>

  <p class="c10"><span class="c2 c0">cn: default</span></p>

  <p class="c10"><span class="c2 c0">release:
  plophos/4.1.0</span></p>

  <p class="c7 c10"></p>

  <p class="c10"><span class="c2 c0">dn:
  cn=default,ou=kernels,ou=plophos,ou=fai</span></p>

  <p class="c10"><span class="c2 c0">cn: default</span></p>

  <p class="c10"><span class="c2 c0">release: plophos</span></p>

  <p class="c7 c10"></p>

  <p class=""><span class="c0">The above example lists two
  releases. Release</span> <span class=
  "c5 c0">plophos/4.1.0</span><span class="c0">&#160;has two
  available kernel options. Release</span> <span class=
  "c5 c0">plophos</span><span class="c0">&#160;on the other hand
  has only the</span> <span class=
  "c5 c0">default</span><span class="c8 c0">&#160;option.</span></p>

  <p class=""><span class="c8 c0">The DNs are arbitrary and not
  evaluated by go-susi. They can even be left out
  completely.</span></p>

  <p class=""><span class="c8 c0">The attribute names are not
  case-sensitive.</span></p>

  <p class=""><span class="c0">You can use base64-encoding with
  LDIF&#8217;s double-colon syntax.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h2 class="" id="h.lcg0co1fq2xh"><span class=
  "c15 c6">package-list-hook</span></h2>

  <p class=""><span class="c0">go-susi relies on an external
  program to provide the list of packages included in each release
  and which debconf parameters they support (see message</span>
  <span class="c5 c0">gosa_query_packages_list</span><span class=
  "c0">). go-susi calls this hook on startup and when it receives
  the</span> <span class="c4">SIGUSR2</span><span class=
  "c8 c0">&#160;signal. The hook is expected to print to standard
  output a list in LDIF format that contains the complete package
  database. The hook will receive the following environment
  variables:</span></p>

  <p class="c7"></p>

  <p class="c10"><span class=
  "c8 c6">PackageListCacheDir:</span></p>

  <p class="c1"><span class="c0">If the hook maintains a package
  cache, it should store it in this directory. Note that this
  directory contains other go-susi files that the hook must not
  touch.</span></p>

  <p class="c10"><span class="c8 c6">PackageListDebconf:</span></p>

  <p class="c1"><span class="c0">When go-susi calls the hook for
  the first time on startup it passes the value</span> <span class=
  "c5 c0">"cache"</span><span class="c8 c0">&#160;in this variable.
  This tells the hook that it should not perform time-consuming
  scans of packages to extract debconf templates. It should only
  report templates if it can do so from cached data. The purpose is
  to get the list of packages as quickly as possible.</span></p>

  <p class="c1"><span class="c0">When the hook has finished
  executing the</span> <span class=
  "c5 c0">"cache"</span><span class="c0">&#160;run, go-susi will
  immediately call the hook again, this time with the value</span>
  <span class="c5 c0">"depends"</span><span class="c0">&#160;in
  this variable. This tells the hook that it may perform package
  scans to extract debconf templates, but should restrict itself to
  scanning packages whose entry in the Packages file includes the
  sub-string</span> <span class=
  "c5 c0">"debconf"</span><span class="c0">&#160;on the</span>
  <span class="c5 c0">Depends</span><span class=
  "c0">&#160;or</span> <span class=
  "c5 c0">Pre-Depends</span><span class="c8 c0">&#160;line. The
  purpose of this hook call is to get a mostly complete list of
  debconf templates as quickly as possible.</span></p>

  <p class="c1"><span class="c0">When go-susi calls the hook in
  reaction to a</span> <span class="c4">SIGUSR2</span><span class=
  "c0">&#160;signal, it passes the value</span> <span class=
  "c5 c0">"all"</span><span class="c0">&#160;in this variable. At
  this point the hook may want to scan all packages for debconf
  templates to be able to report a complete list. However the hook
  should still return in a reasonable time. It is recommended that
  after a maximum of 1h running time the hook should present the
  results it has and make a note of any packages that are still
  unscanned so that it can continue the scan the next time
  the</span> <span class="c4">SIGUSR2</span><span class=
  "c0">&#160;signal is sent (which typically happens each night via
  a cron job).</span></p>

  <p class="c10"><span class=
  "c8 c6">PackageListFAIrepository:</span></p>

  <p class="c1"><span class="c0">This variable contains a space
  separated list of all FAIrepository attributes from LDAP
  (e.g.</span> <span class=
  "c5 c0">"http://ftp.debian.org/debian|none|jessie|main,contrib")</span><span class="c0">&#160;and
  tells the hook which repositories it should scan for
  packages.</span></p>

  <p class="c7"></p>

  <p class="c7"></p>
  <hr style="page-break-before:always;display:none;" />

  <p class="c7"></p>

  <p class=""><span class="c8 c6">Example ouput from
  hook:</span></p>

  <p class="c7"></p>

  <p class="c10"><span class="c2 c0">Package:
  console-setup</span></p>

  <p class="c10"><span class="c2 c0">Release: plophos</span></p>

  <p class="c10"><span class="c2 c0">Version:
  1.34ubuntu15</span></p>

  <p class="c10"><span class="c2 c0">Version: 1.35</span></p>

  <p class="c10"><span class="c2 c0">Section: utils</span></p>

  <p class="c10"><span class="c2 c0">Release:
  plophos/4.1.0</span></p>

  <p class="c10"><span class="c2 c0">Version: 1.36</span></p>

  <p class="c10"><span class="c2 c0">Section: main</span></p>

  <p class="c10"><span class="c2 c0">Description: console font and
  keymap setup program</span></p>

  <p class="c10"><span class="c2 c0">Templates::
  ClRlbXBsYXRlOi...wgdXNlCgo=</span></p>

  <p class="c7 c10"></p>

  <p class="c10"><span class="c2 c0">Release: plophos</span></p>

  <p class="c10"><span class="c2 c0">Repository:
  plophos-backports</span></p>

  <p class="c10"><span class="c2 c0">Repository:
  plophos-updates</span></p>

  <p class="c10"><span class="c2 c0">Repository:
  plophos-security</span></p>

  <p class="c7 c10"></p>

  <p class="c10"><span class="c2 c0">Package: sed</span></p>

  <p class="c10"><span class="c2 c0">Release: plophos</span></p>

  <p class="c10"><span class="c2 c0">Repository:
  plophos-security</span></p>

  <p class="c10"><span class="c2 c0">Section: lhm/utils</span></p>

  <p class="c10"><span class="c2 c0">Version:
  4.2.1-6lhm2</span></p>

  <p class="c10"><span class="c2 c0">Description: The GNU sed
  stream editor</span></p>

  <p class="c7 c10"></p>

  <p class="c7"></p>

  <p class=""><span class="c0">The attributes</span> <span class=
  "c5 c0">Package</span><span class="c0">,</span> <span class=
  "c5 c0">Section</span><span class="c0">,</span> <span class=
  "c5 c0">Version</span><span class="c0">&#160;and</span>
  <span class="c5 c0">Description</span><span class=
  "c0">&#160;correspond directly to their counterparts from the
  Debian</span> <span class="c5 c0">control</span><span class=
  "c0">&#160;file. The</span> <span class=
  "c5 c0">Release</span><span class="c0">&#160;attribute specifies
  the release (aka "distribution") to which the entry belongs.
  Multiple</span> <span class="c5 c0">Version</span><span class=
  "c8 c0">&#160;attributes may be present if multiple versions are
  available for the same release.</span></p>

  <p class=""><span class="c0">The</span> <span class=
  "c5 c0">Templates</span><span class="c0">&#160;attribute
  (</span><span class="c5 c0">"Template"</span><span class=
  "c0">&#160;without</span> <span class=
  "c5 c0">"s"</span><span class="c0">&#160;is accepted as an alias)
  is the complete contents of the</span> <span class=
  "c5 c0">templates</span><span class="c8 c0">&#160;file describing
  the debconf parameters of the package (if it has any).</span></p>

  <p class=""><span class="c0">The</span> <span class=
  "c5 c0">Repository</span><span class="c0">&#160;attribute, if
  present, informs go-susi that the entry refers to a (version of
  a) package that is not found in the main repository for the
  respective release. All</span> <span class=
  "c5 c0">Repository</span><span class="c0">&#160;values are
  collected and added (with a "+" prefix) to the list of available
  FAI classes for the corresponding release. The FAI backend
  recognizes these pseudo-FAI classes and creates
  appropriate</span> <span class=
  "c5 c0">/etc/apt/sources.list.d/</span><span class=
  "c8 c0">&#160;files for them.</span></p>

  <p class=""><span class="c0">The hook may include</span>
  <span class="c5 c0">Release/Repository</span><span class=
  "c8 c0">&#160;groups in its output without any package
  information to inform go-susi about existing repository paths
  even if they do not (yet) contain packages.</span></p>

  <p class=""><span class="c0">To reduce go-susi's memory usage and
  improve its performance, it is possible to combine the
  information for multiple releases for the same package into a
  single entry. Such an entry must start with the</span>
  <span class="c5 c0">Package</span><span class=
  "c0">&#160;attribute and must be followed by at least one</span>
  <span class="c5 c0">Release</span><span class=
  "c0">&#160;attribute. In order to determine the attribute values
  for attribute</span> <span class="c5 c0">A</span><span class=
  "c0">&#160;for release</span> <span class=
  "c5 c0">R</span><span class="c0">, the lines following</span>
  <span class="c5 c0">Package</span><span class="c0">&#160;will be
  scanned for the first</span> <span class="c5 c0">Release:
  R</span><span class="c0">&#160;line and then for the first</span>
  <span class="c5 c0">A</span><span class="c0">&#160;attribute line
  after that. This and all following</span> <span class=
  "c5 c0">A</span><span class="c0">&#160;attribute lines up to the
  next</span> <span class="c5 c0">Release</span><span class=
  "c0">&#160;line are</span> <span class=
  "c5 c0">A</span><span class="c0">&#160;attribute values
  for</span> <span class="c5 c0">R</span><span class=
  "c8 c0">.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <p class="c7"></p>

  <h2 class="c24" id="h.jl9h7nlx12bl"><span class=
  "c15 c6">user-msg-hook</span></h2>

  <p class=""><span class="c0">go-susi relies on an external
  program to process user notifications from</span> <span class=
  "c5 c0">job_send_user_msg</span> <span class="c0">and</span>
  <span class="c5 c0">usr_msg</span><span class="c0">. When
  a</span> <span class="c5 c0">job_send_user_msg</span><span class=
  "c0">&#160;is up for execution or when a</span> <span class=
  "c5 c0">usr_msg</span><span class="c0">&#160;message is received,
  go-susi calls the program configured in</span> <span class=
  "c5 c0">[general]/user-msg-hook</span><span class="c8 c0">. The
  hook will receive the following environment variables:</span></p>

  <p class="c7"></p>

  <p class="c10"><span class="c8 c6">job:</span></p>

  <p class="c1"><span class="c0">The XML of the job entry as
  returned by</span> <span class=
  "c5 c0">gosa_query_jobdb</span><span class="c0">&#160;message
  (with either</span> <span class=
  "c5 c0">&lt;job&gt;</span><span class="c0">&#160;or</span>
  <span class="c5 c0">&lt;xml&gt;</span><span class=
  "c8 c0">&#160;as the outermost tag).</span></p>

  <p class="c10"><span class="c8 c6">foo:</span></p>

  <p class="c1"><span class="c0">For each child element</span>
  <span class="c5 c0">&lt;foo&gt;</span><span class=
  "c0">&#160;of</span> <span class=
  "c5 c0">&lt;xml&gt;</span><span class="c0">&#160;there will be a
  corresponding environment variable with the element's text
  content (</span><span class="c0 c18">not</span><span class=
  "c0">&#160;using XML escaping like</span> <span class=
  "c5 c0">&amp;lt;</span><span class="c8 c0">). If there are
  multiple child elements with the same name, their text values
  will be concatenated separated by newlines.</span></p>

  <p class="c1 c7"></p>

  <p class=""><span class="c8 c6">Example:</span></p>

  <p class="c10"><span class="c8 c0">The following hook script
  transmits messages to users via email.</span></p>

  <p class="c7"></p>

  <p class="c10"><span class="c2 c0"># The environment variables
  $user, $subject, $group and $message</span></p>

  <p class="c10"><span class="c2 c0"># come from the elements of
  the job_send_user_msg &lt;xml&gt; message.</span></p>

  <p class="c7 c10"></p>

  <p class="c10"><span class="c2 c0">users="$user"</span></p>

  <p class="c7 c10"></p>

  <p class="c10"><span class="c2 c0">for g in $group ;
  do</span></p>

  <p class="c10"><span class="c2 c0">&#160;
  filter="(&amp;(cn=$g)(objectClass=posixGroup))"</span></p>

  <p class="c10"><span class="c2 c0">&#160; members="$(ldapsearch
  -x -LLL "$filter" memberUid)"</span></p>

  <p class="c10"><span class="c2 c0">&#160; users="$users $(echo
  "$members" | sed -n 's/memberUid: //p')"</span></p>

  <p class="c10"><span class="c2 c0">done</span></p>

  <p class="c7 c10"></p>

  <p class="c10"><span class="c2 c0">for user in $users;
  do</span></p>

  <p class="c10"><span class="c2 c0">&#160; address=$(ldapsearch -x
  -LLL cn=$user mail | sed -n 's/mail: //p')</span></p>

  <p class="c10"><span class="c2 c0">&#160; echo "$message" | mail
  -s "$subject" "$address"</span></p>

  <p class="c10"><span class="c2 c0">done</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h2 class="c22" id="h.rz53ht8cs0me"></h2>

  <h2 class="c24" id="h.3eksnwm3fz5s"><span class=
  "c15 c6">pxelinux-cfg-hook</span></h2>

  <p class="c14"><span class="c8 c0">This configuration option is
  deprecated. It is converted to the following settings:</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c2 c0">[tftp]</span></p>

  <p class="c14"><span class=
  "c2 c0">/^pxelinux.cfg/[0-9a-f]{8}(-[0-9a-f]{4}){3}-[0-9a-f]{12}$
  = # suppress ERROR!</span></p>

  <p class="c14"><span class=
  "c2 c0">/^pxelinux.cfg/01-(?P&lt;macaddress&gt;[0-9a-f]{2}(-[0-9a-f]{2}){5})$
  = |&lt;hookpath&gt;</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c0">These settings are assumed to be
  at the very top of the configuration file so that they will only
  be used for requests that have no matching pattern in the</span>
  <span class="c5 c0">[tftp]</span><span class="c0">&#160;section.
  See the section</span> <span class="c0 c18">TFTP
  hooks</span><span class="c8 c0">&#160;for more
  information.</span></p>

  <p class="c14"><span class="c8 c0">If you need to disable this
  backwards-compatibility behaviour completely, use</span></p>

  <p class="c7"></p>

  <p class=""><span class="c2 c0">[general]</span></p>

  <p class=""><span class="c2 c0">pxelinux-cfg-hook = # disable
  backwards-compatibility rules</span></p>

  <p class="c14 c7"></p>
  <hr style="page-break-before:always;display:none;" />

  <p class="c14 c1 c7"></p>

  <h2 class="c24" id="h.4xal5cuhnf5d"><span class="c15 c6">TFTP
  hooks</span></h2>

  <p class=""><span class="c0">When go-susi's built-in TFTP server
  is asked for a file that matches</span> <span class=
  "c5 c0">/path</span><span class="c0">&#160;or</span> <span class=
  "c5 c0">/^path_regex</span><span class="c0">&#160;in the</span>
  <span class="c5 c0">[tftp]</span><span class=
  "c8 c0">&#160;section and the mapping on the right side of the
  "=" starts with "|", the remainder is used as the path of a hook
  to execute. If the program exits with 0 status its standard
  output is sent as response to the TFTP request.</span></p>

  <p class=""><span class="c8 c0">The hook will receive the
  following environment variables:</span></p>

  <p class="c7"></p>

  <p class="c10"><span class="c6">tftp_request:</span> <span class=
  "c0">(</span><span class="c0 c18">always
  present</span><span class="c8 c0">)</span></p>

  <p class="c1"><span class="c8 c0">The path requested in the TFTP
  request. Note that this path does not usually start with
  "/".</span></p>

  <p class="c10"><span class="c8 c6">groupname:</span></p>

  <p class="c1"><span class="c0">If the hook was called because the
  request was matched by a</span> <span class=
  "c5 c0">/^path_regex</span><span class="c0">&#160;and</span>
  <span class="c5 c0">path_regex</span><span class=
  "c0">&#160;contains named capturing groups, the captured
  subexpressions will be passed in environment variables whose
  names correspond to the group names.</span></p>

  <p class="c10"><span class="c6">macaddress:</span></p>

  <p class="c1"><span class="c8 c0">A named capturing group (see
  previous paragraph) whose name is "macaddress" gets special
  treatment. All characters that are not hex digits will be removed
  from the captured subexpression, it will be converted &#160;to
  lower case and 0-padded or truncated to 12 characters. Colons
  will be inserted to form a MAC address in canonical
  syntax.</span></p>

  <p class="c10"><span class="c8 c6">dn, faistate,...:</span></p>

  <p class="c1"><span class="c0">If a capturing group with name
  "macaddress" was matched (see previous paragraph) and an LDAP
  object exists for that MAC address, its attributes will be passed
  in environment variables named after the attributes (in all lower
  case). The</span> <span class="c5 c0">dn</span><span class=
  "c8 c0">&#160;is always present in that case. The set of other
  attributes may vary.</span></p>

  <p class="c7"></p>
  <hr style="page-break-before:always;display:none;" />

  <p class="c14 c1 c7"></p>

  <h2 class="c24" id="h.tmddyclmp68v"><span class=
  "c15 c6">new-config-hook</span></h2>

  <p class=""><span class="c0">When go-susi receives a</span>
  <span class="c5 c0">new_foo_config</span><span class=
  "c0">&#160;message (e.g.</span> <span class=
  "c5 c0">new_ldap_config</span><span class="c8 c0">) it calls this
  hook to update system configuration files.</span></p>

  <p class=""><span class="c8 c0">Depending on the received message
  the hook will receive some of the following environment
  variables:</span></p>

  <p class="c7"></p>

  <p class="c10"><span class="c6">new_ldap_config:</span></p>

  <p class="c1"><span class="c0">When this variable is non-empty,
  it means that LDAP configuration should be updated. The following
  environment variables may be present in that case, depending on
  whether the corresponding elements were part of the</span>
  <span class="c5 c0">new_ldap_config</span><span class=
  "c8 c0">&#160;message that triggered the hook:</span></p>

  <p class="c1"><span class="c6">admin_base, department, ldap_base,
  ldap_uri, release, unit_tag:</span></p>

  <p class="c16"><span class="c0">See the description of</span>
  <span class="c5 c0">new_ldap_config</span><span class=
  "c8 c0">&#160;for details.</span></p>

  <p class="c1"><span class="c6">Note:</span></p>

  <p class="c16"><span class="c0">Multiple</span> <span class=
  "c6">ldap_uri</span><span class="c0">&#160;values may be present.
  If so they will be separated by newlines in the</span>
  <span class="c6">ldap_uri</span><span class=
  "c8 c0">&#160;environment variable.</span></p>

  <p class="c10"><span class="c8 c6">new_ntp_config:</span></p>

  <p class="c1"><span class="c0">When this variable is non-empty,
  it means that NTP configuration should be updated. The following
  environment variable will usually be present (but may not be in
  case the</span> <span class=
  "c5 c0">new_ntp_config</span><span class="c8 c0">&#160;did not
  contain any servers):</span></p>

  <p class="c1"><span class="c8 c6">server:</span></p>

  <p class="c16"><span class="c0">If present and non-empty this is
  a newline-separated list of NTP servers.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h2 class="c24" id="h.ajcepjvthivg"><span class=
  "c15 c6">trigger-action-hook</span></h2>

  <p class="c14"><span class="c0">Client messages of the
  type</span> <span class=
  "c5 c0">trigger_action_*</span><span class="c0">&#160;are usually
  intended to trigger a popup message to inform the user about an
  imminent action. go-susi calls the program configured as</span>
  <span class=
  "c5 c0">[general]/trigger-action-hook</span><span class=
  "c0">&#160;to perform these actions.</span></p>

  <p class="c14"><span class="c8 c0">The hook will receive the
  following environment variables in addition to the standard
  variables:</span></p>

  <p class="c14 c7"></p>

  <p class="c14 c10"><span class="c8 c6">xml:</span></p>

  <p class="c14 c1"><span class="c0">The XML of the</span>
  <span class="c5 c0">trigger_action_*</span><span class=
  "c8 c0">&#160;message.</span></p>

  <p class="c14 c10"><span class="c8 c6">foo:</span></p>

  <p class="c14 c1"><span class="c0">For each child element</span>
  <span class="c5 c0">&lt;foo&gt;</span><span class=
  "c0">&#160;of</span> <span class=
  "c5 c0">&lt;xml&gt;</span><span class="c0">&#160;there will be a
  corresponding environment variable with the element's text
  content (</span><span class="c0 c18">not</span><span class=
  "c0">&#160;using XML escaping like</span> <span class=
  "c5 c0">&amp;lt;</span><span class="c8 c0">). If there are
  multiple child elements with the same name, their text values
  will be concatenated separated by newlines.</span></p>

  <h2 class="c24" id="h.kha1w05s1k8z"><span class=
  "c15 c6">registered-hook</span></h2>

  <p class="c14"><span class="c0">Whenever go-susi has successfully
  registered at a server (via</span> <span class=
  "c5 c0">here_i_am/registered</span><span class="c0">), it calls
  the hook configured as</span> <span class=
  "c5 c0">[general]/registered-hook.</span><span class=
  "c0">&#160;The hook will not be called for erroneous</span>
  <span class="c5 c0">registered</span><span class=
  "c8 c0">&#160;messages. Note that this does not mean that the
  registration server has changed. The hook will receive the
  following environment variables in addition to the standard
  variables:</span></p>

  <p class="c14 c7"></p>

  <p class="c14 c10"><span class="c8 c6">xml:</span></p>

  <p class="c14 c1"><span class="c0">The XML of the</span>
  <span class="c5 c0">registered</span><span class=
  "c8 c0">&#160;message from the successful
  registration.</span></p>

  <p class="c14 c10"><span class="c8 c6">foo:</span></p>

  <p class="c14 c1"><span class="c0">For each child element</span>
  <span class="c5 c0">&lt;foo&gt;</span><span class=
  "c0">&#160;of</span> <span class=
  "c5 c0">&lt;xml&gt;</span><span class="c0">&#160;there will be a
  corresponding environment variable with the element's text
  content (</span><span class="c0 c18">not</span><span class=
  "c0">&#160;using XML escaping like</span> <span class=
  "c5 c0">&amp;lt;</span><span class="c8 c0">). If there are
  multiple child elements with the same name, their text values
  will be concatenated separated by newlines.</span></p>

  <h2 class="c22" id="h.s846ecbynk1m"></h2>

  <h2 class="c24" id="h.aksqy9t8gyyf"><span class=
  "c15 c6">activated-hook</span></h2>

  <p class=""><span class="c0">When go-susi receives a</span>
  <span class=
  "c5 c0">set_activated_for_installation</span><span class=
  "c0">&#160;message, it calls the hook configured as</span>
  <span class="c5 c0">[general]/activated-hook.</span><span class=
  "c8 c0">&#160;The hook will receive the following environment
  variables in addition to the standard variables:</span></p>

  <p class="c7"></p>

  <p class="c10"><span class="c8 c6">xml:</span></p>

  <p class="c1"><span class="c0">The XML of the</span> <span class=
  "c5 c0">set_activated_for_installation</span><span class=
  "c8 c0">&#160;message.</span></p>

  <p class="c10"><span class="c8 c6">faistate:</span></p>

  <p class="c1"><span class="c0">This reflects the</span>
  <span class="c5 c0">&lt;faistate&gt;</span><span class=
  "c0">&#160;element of the message. The sending server sets this
  to the value of the</span> <span class=
  "c5 c0">FAIstate</span><span class="c0">&#160;attribute of the
  target machine's LDAP object.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h2 class="c24" id="h.ujvi2n3gkv1g"><span class=
  "c15 c6">detect-hardware-hook</span></h2>

  <p class="c14"><span class="c0">When go-susi receives a</span>
  <span class="c5 c0">detect_hardware</span><span class=
  "c0">&#160;message, it calls the hook configured as</span>
  <span class=
  "c5 c0">[general]/detect-hardware-hook.</span><span class=
  "c0">&#160;The hook only receives standard environment variables.
  The hook is expected to print on its standard output the system's
  hardware configuration in LDIF format. The DN is ignored and may
  be omitted. The output from the hook will be sent back to the
  si-server in a</span> <span class=
  "c5 c0">detected_hardware</span><span class=
  "c8 c0">&#160;message.</span></p>

  <p class="c14"><span class="c0">Be careful when including
  attributes like</span> <span class=
  "c5 c0">"cn"</span><span class="c0">&#160;or</span> <span class=
  "c5 c0">"ipHostNumber".</span><span class="c0">&#160;go-susi
  permits changing these via</span> <span class=
  "c5 c0">detected_harware</span><span class=
  "c8 c0">&#160;messages.</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">Attention:</span></p>

  <p class="c14 c10"><span class="c0">The hook is expected to
  complete quickly. If it takes too long, go-susi will time out,
  ignore the hook's output and send an empty</span> <span class=
  "c5 c0">detected_hardware</span><span class="c8 c0">&#160;message
  to the server, so that a pending installation does not
  stall.</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">Example hook
  output:</span></p>

  <p class="c10"><span class="c2 c0">dn:
  cn=foomachine,ou=somewhere,c=de</span></p>

  <p class="c10"><span class="c2 c0">ghCpuType::
  WjgwLCA0TUh6Cg==</span></p>

  <p class="c10"><span class="c2 c0">gotoModules: ppdev</span></p>

  <p class="c10"><span class="c2 c0">gotoModules:
  gameport</span></p>

  <p class="c10"><span class="c5 c0">...</span></p>

  <h2 class="c22" id="h.me83wdi39akx"></h2>
  <hr style="page-break-before:always;display:none;" />

  <h2 class="c22" id="h.85n1xfgyaz2l"></h2>

  <h2 class="c24" id="h.i2wshb9a7t92"><span class=
  "c15 c6">fai-progress-hook</span></h2>

  <p class=""><span class="c0">When</span> <span class="c0">go-susi
  starts up, it will launch the program configured as</span>
  <span class=
  "c5 c0">[general]/fai-progress-hook</span><span class="c0">&#160;and
  will continually read its standard output line by line and will
  translate each line to a corresponding</span> <span class=
  "c5 c0">CLMSG_*</span> <span class="c8 c0">message that it will
  send to the si-server where it is currently
  registered.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">Example:</span></p>

  <p class="c10"><span class="c2 c0">TASKBEGIN extrbase</span></p>

  <p class="c7 c10"></p>

  <p class=""><span class="c8 c0">is converted into</span></p>

  <p class="c7"></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">CLMSG_TASKBEGIN</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.146:20083</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.85:20081</span><span class=
  "c4">&lt;/target&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;CLMSG_TASKBEGIN&gt;</span><span class=
  "c5 c0">extrbase</span><span class=
  "c2 c6">&lt;/CLMSG_TASKBEGIN&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;timestamp&gt;</span><span class=
  "c5 c0">20130305113331</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c10"><span class="c4">&lt;/xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">Example:</span></p>

  <p class="c10"><span class="c2 c0">TASKERROR instsoft 421
  warn:install_packages: packages missing</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c0">is converted into</span></p>

  <p class="c7 c10"></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">CLMSG_TASKERROR</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.146:20083</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.85:20081</span><span class=
  "c4">&lt;/target&gt;</span></p>

  <p class="c1"><span class=
  "c2 c6">&lt;CLMSG_TASKERROR&gt;</span></p>

  <p class="c1"><span class="c2 c0">&#160; instsoft 421
  warn:install_packages: packages missing</span></p>

  <p class="c1"><span class=
  "c2 c6">&lt;/CLMSG_TASKERROR&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;timestamp&gt;</span><span class=
  "c5 c0">20130305113331</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml</span></p>

  <h2 class="c22" id="h.24ioy4w0e22"></h2>
  <hr style="page-break-before:always;display:none;" />

  <h2 class="c22" id="h.tjar8ca0ne17"></h2>

  <h2 class="c24" id="h.md5sni9nns2l"><span class=
  "c15 c6">fai-savelog-hook</span></h2>

  <p class=""><span class="c0">go-susi launches the program
  configured as</span> <span class=
  "c5 c0">[general]/fai-savelog-hook</span><span class=
  "c0">&#160;when it sees</span> <span class="c5 c0">"TASKEND
  savelog"</span><span class="c0">&#160;in the output from</span>
  <span class=
  "c5 c0">[general]/fai-progress-hook.</span><span class=
  "c0">&#160;If the hook writes to its standard output data in the
  format described below, it will be passed on to the registration
  server in a</span> <span class=
  "c5 c0">CLMSG_save_fai_log</span><span class=
  "c8 c0">&#160;message. When the logs have been transferred to the
  server, the hook will receive a newline on its standard
  input.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">Hook output example:</span></p>

  <p class="c10"><span class=
  "c2 c0">log_file:fstab:IyAvZXRjL2...c2RhNQo=<br />
  log_file:format.log:U3Rhc...M2I5ODEK<br />
  &#8230;</span></p>

  <p class="c10"><span class="c2 c0">install</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">Format Explanation:</span></p>

  <p class="c10"><span class="c0">Each line in the output begins
  with the string</span> <span class=
  "c5 c0">"log_file:"</span><span class="c0">&#160;followed by the
  name of a log file, followed by</span> <span class=
  "c5 c0">":"</span><span class="c0">&#160;followed by the base64
  encoded contents of the log file. Newline signals the end of the
  base64 block, so make sure that the base64 encoder used does not
  wrap the data. The final line of the output has to be
  either</span> <span class="c5 c0">"install"</span><span class=
  "c0">&#160;or</span> <span class=
  "c5 c0">"softupdate"</span><span class="c8 c0">&#160;and
  specifies the type of job the logs are for. The final line has to
  be terminated by a newline. Any further output past that will be
  ignored.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h2 class="c41" id="h.5ljeu4lqambh"></h2>

  <h2 class="" id="h.3mo9jc2jx47x"><span class=
  "c15 c6">fai-audit-hook</span></h2>

  <p class=""><span class="c0">go-susi launches the program
  configured as</span> <span class=
  "c5 c0">[general]/fai-audit-hook</span><span class=
  "c0">&#160;when it sees</span> <span class="c5 c0">"TASKEND
  audit"</span><span class="c0">&#160;in the output from</span>
  <span class=
  "c5 c0">[general]/fai-progress-hook.</span><span class=
  "c0">&#160;The hook works the same way as</span> <span class=
  "c5 c0">fai-savelog-hook,</span><span class="c0">&#160;except
  that the final line of output has to be</span> <span class=
  "c5 c0">"audit".</span></p>

  <p class=""><span class="c0">While there are no restrictions on
  the file names and formats that may be transmitted to the server
  using this hook, only XML files with the</span> <span class=
  "c5 c0">".xml"</span><span class="c0">&#160;file extension that
  have the proper audit file format can be queried using</span>
  <span class="c5 c0">gosa_query_audit</span><span class=
  "c0">&#160;and</span> <span class=
  "c5 c0">gosa_query_audit_aggregate.</span> <span class=
  "c8 c0">The following example illustrates the audit file format
  these functions can use:</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">Audit file example:</span></p>

  <p class=""><span class="c2 c0">&lt;audit&gt;</span></p>

  <p class="c10"><span class=
  "c2 c0">&lt;timestamp&gt;20160601070000&lt;/timestamp&gt;</span></p>

  <p class="c7 c10"></p>

  <p class="c10"><span class=
  "c2 c0">&lt;macaddress&gt;11:22:33:44:55:66&lt;/macaddress&gt;</span></p>

  <p class="c10"><span class=
  "c2 c0">&lt;hostname&gt;foo&lt;/hostname&gt;</span></p>

  <p class="c10"><span class=
  "c2 c0">&lt;ipaddress&gt;1.2.3.4&lt;/ipaddress&gt;</span></p>

  <p class="c7 c10"></p>

  <p class="c10"><span class="c2 c0">&lt;entry&gt;</span></p>

  <p class="c1"><span class=
  "c2 c0">&lt;key&gt;key1&lt;/key&gt;</span></p>

  <p class="c1"><span class=
  "c2 c0">&lt;column1&gt;value_1_1&lt;/column1&gt;</span></p>

  <p class="c1"><span class=
  "c2 c0">&lt;column2&gt;value_1_2&lt;/column2&gt;</span></p>

  <p class="c1"><span class="c2 c0">&#8230;</span></p>

  <p class="c10"><span class="c2 c0">&lt;/entry&gt;</span></p>

  <p class="c7 c10"></p>

  <p class="c10"><span class="c2 c0">&lt;entry&gt;</span></p>

  <p class="c1"><span class=
  "c2 c0">&lt;key&gt;key2&lt;/key&gt;</span></p>

  <p class="c1"><span class=
  "c2 c0">&lt;column1&gt;value_2_1&lt;/column1&gt;</span></p>

  <p class="c1"><span class=
  "c2 c0">&lt;column2&gt;value_2_2&lt;/column2&gt;</span></p>

  <p class="c1"><span class="c5 c0">&#8230;</span></p>

  <p class="c10"><span class="c2 c0">&lt;/entry&gt;</span></p>

  <p class="c10"><span class="c2 c0">&#8230;</span></p>

  <p class=""><span class="c2 c0">&lt;/audit&gt;</span></p>

  <p class=""><span class="c6">The elements have the following
  meaning:</span><span class="c8 c0">&#160; &#160;
  &#160;</span></p>

  <p class=""><span class="c6">&lt;audit&gt;</span><span class=
  "c0">&#160;Mandatory root element for files to be queried
  with</span> <span class="c2 c0">gosa_query_audit.</span></p>

  <p class=""><span class="c6">&lt;timestamp&gt;</span>
  <span class="c0 c18">(optional)</span><span class=
  "c8 c0">&#160;This element is not used by go-susi but is
  recommended for human consumption.</span></p>

  <p class=""><span class=
  "c6">&lt;macaddress&gt;,&lt;hostname&gt;,&lt;ipaddress&gt;</span>
  <span class="c0 c18">(optional)</span></p>

  <p class="c10"><span class="c0">If known, these values should be
  added to the audit file. Values that are not known must not be
  added to the audit file (no dummy values or empty elements!). If
  a value is omitted, go-susi may either fill it in from another
  source when queried or it will be missing from the query result.
  Applications using</span> <span class=
  "c5 c0">gosa_query_audit</span><span class="c8 c0">&#160;must be
  able to cope with either situation.</span></p>

  <p class=""><span class="c6">&lt;entry&gt;</span><span class=
  "c0">&#160;</span><span class="c28 c0 c31 c18">(1 or
  more)</span></p>

  <p class="c10"><span class="c0">Each piece of audit data must be
  inside an</span> <span class=
  "c6">&lt;entry&gt;</span><span class="c0">&#160;element.
  All</span> <span class="c6">&lt;entry&gt;</span><span class=
  "c0">&#160;elements must have the same set of child elements
  (referred to as "columns" in this documentation because
  conceptionally audit data is a table). At least one</span>
  <span class="c6">&lt;entry&gt;</span><span class=
  "c8 c0">&#160;must be present or the audit file will be
  ignored.</span></p>

  <p class=""><span class="c6">&lt;key&gt;</span><span class=
  "c0">&#160;</span><span class=
  "c0 c18">(required)</span><span class="c0">&#160;Each</span>
  <span class="c6">&lt;entry&gt;</span><span class="c0">&#160;must
  have exactly one</span> <span class=
  "c6">&lt;key&gt;.</span><span class="c8 c0">&#160; Keys in the
  same audit file must be unique.</span></p>

  <p class=""><span class="c6">&lt;columnX&gt;</span></p>

  <p class="c10"><span class="c0">You can choose the names of child
  elements other than</span> <span class=
  "c6">&lt;key&gt;</span><span class="c0">&#160;as you see fit. The
  same</span> <span class="c6">&lt;columnX&gt;</span><span class=
  "c0">&#160;must not appear more than once within an</span>
  <span class="c6">&lt;entry&gt;.</span><span class="c0">&#160;The
  value of &lt;columnX&gt; may be empty but must not contain child
  elements.</span></p>
  <hr style="page-break-before:always;display:none;" />
  <a id="id.bajdikkyilhk" name="id.bajdikkyilhk"></a>

  <h1 class="" id="h.hzdxkgexaqdo"><span class="c0">Interfacing
  with go-susi</span></h1>

  <h2 class="c24" id="h.36xshbk95lq"><span class="c0">TCP
  connection to</span> <span class=
  "c38 c4">[server]/port</span></h2>

  <p class="c14"><span class="c0">The main way of accessing
  go-susi's functionality is by connecting to it via TCP on the
  port configured in</span> <span class=
  "c5 c0">[server]/port</span><span class="c8 c0">&#160;and sending
  XML-formatted requests. Depending on the kind of request go-susi
  may return an XML-formatted answer. Separate go-susi instances
  will communicate via TCP connections. GOsa also uses TCP to
  interface with go-susi.</span></p>

  <h2 class="" id="h.99ysh1gd1xn3"><span class="c0">TCP connection
  to</span> <span class="c4 c38">[faimon]/port</span></h2>

  <p class="c14"><span class="c0">go-susi listens on the TCP port
  configured as</span> <span class=
  "c5 c0">[faimon]/port</span><span class="c8 c0">&#160;and logs
  messages received there if the loglevel is set to DEBUG. Nothing
  else is done with these messages.</span></p>

  <h2 class="" id="h.ue6pv2ufxyrz"><span class="c0">TFTP server
  on</span> <span class="c5 c0">[tftp]/port</span><span class=
  "c15 c6">&#160;(UDP)</span></h2>

  <p class="c14"><span class="c0">go-susi runs a read-only TFTP
  service. This service supports the</span> <span class=
  "c5 c0">tsize</span><span class="c0">&#160;and</span>
  <span class="c5 c0">blksize</span><span class="c0">&#160;options.
  It serves 2 kinds of files. The first are those pre-configured in
  the</span> <span class="c5 c0">[tftp]</span><span class=
  "c0">&#160;section of the configuration. In addition to these,
  go-susi will call the</span> <span class=
  "c5 c0">[general]/pxelinux-cfg-hook</span><span class=
  "c0">&#160;program to generate</span> <span class=
  "c5 c0">pxelinux</span><span class="c0">&#160;configuration files
  on the fly. See the section</span> <span class=
  "c6">pxelinux-cfg-hook</span><span class="c0">&#160;for more
  details.</span></p>

  <h2 class="c24" id="h.l0vggs5nqxsf"><span class=
  "c15 c6">Signals</span></h2>

  <p class="c14"><span class="c4">SIGUSR2</span><span class=
  "c0">&#160;- this signal causes go-susi to call the</span>
  <span class="c6">kernel-list-hook</span><span class=
  "c0">&#160;and</span> <span class=
  "c6">package-list-hook</span><span class="c8 c0">&#160;programs
  to rebuild the kernel and packages databases. While the databases
  are being rebuilt, the old data continues to be available. This
  is different from gosa-si-server.</span></p>

  <p class="c14"><span class="c4">SIGUSR1</span><span class=
  "c8 c0">&#160;- ignored</span></p>

  <p class="c14"><span class="c4">SIGHUP, SIGINT, SIGQUIT,
  SIGTERM</span><span class="c0">&#160;- these signals cause a
  clean shutdown of go-susi after all persistent databases have
  been saved.</span><span class="c2 c0">&#160;</span></p>

  <p class="c14"><span class="c4">SIGABRT</span><span class=
  "c0">&#160;- causes an immediate unclean exit with backtraces of
  all goroutines. Useful for debugging.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h1 class="c35" id="h.3dolgdo847j1"><span class=
  "c5 c0">/var/lib/go-susi</span><span class=
  "c29 c6">&#160;database</span></h1>

  <p class=""><span class="c0">go-susi maintains its database in
  memory but copies changes to XML files stored in the
  directory</span> <span class=
  "c5 c0">/var/lib/go-susi</span><span class="c8 c0">. When go-susi
  starts up, it will populate its internal database with the data
  from these files. This allows data to be persistent across
  restarts of the go-susi daemon.</span></p>

  <p class=""><span class="c8 c6">Tip:</span></p>

  <p class="c10"><span class="c0">Use the command line tool</span>
  <span class="c5 c0">tidy</span><span class="c8 c0">&#160;to view
  database files. E.g.:</span></p>

  <p class="c10"><span class="c2 c0">tidy -xml -indent
  /var/lib/go-susi/clientdb.xml</span></p>

  <h2 class="c24" id="h.4alj9q9r8lq3"><span class=
  "c15 c6">jobdb.xml</span></h2>

  <p class=""><span class="c8 c0">This file stores jobs scheduled
  to be executed at a later time as well as progress information
  for long-running jobs such as installations.</span></p>

  <p class=""><span class="c0">Each entry in</span> <span class=
  "c5 c0">jobdb.xml</span><span class="c0">&#160;has the same
  structure as an</span> <span class=
  "c5 c0">&lt;answerX&gt;</span><span class="c0">&#160;element from
  a reply to the</span> <span class=
  "c5 c0">gosa_query_jobdb</span><span class="c8 c0">&#160;message.
  See that message's description for details.</span></p>

  <h2 class="c24" id="h.50wdi3uufl9n"><span class=
  "c15 c6">serverdb.xml</span></h2>

  <p class=""><span class="c8 c0">This file stores the other
  servers known to go-susi as well as the current encryption keys
  used for communicating with them.</span></p>

  <p class=""><span class="c0">Each entry in</span> <span class=
  "c5 c0">serverdb.xml</span><span class="c0">&#160;has the same
  structure as a</span> <span class=
  "c5 c0">new_server</span><span class="c0">&#160;message. See that
  message's description for details. Note, however, that
  only</span> <span class="c5 c0">&lt;source&gt;</span><span class=
  "c0">&#160;and</span> <span class=
  "c5 c0">&lt;key&gt;</span><span class="c0">&#160;are required
  elements in a</span> <span class=
  "c5 c0">serverdb.xml</span><span class="c0">&#160;entry. The
  other elements described at</span> <span class=
  "c5 c0">new_server</span><span class="c8 c0">&#160;may or may not
  be present.</span></p>

  <h2 class="c24" id="h.q5bbvyapnxmg"><span class=
  "c15 c6">clientdb.xml</span></h2>

  <p class=""><span class="c8 c0">This file stores both the clients
  registered at this server as well as clients registered at
  peers.</span></p>

  <p class=""><span class="c0">Each entry in</span> <span class=
  "c5 c0">clientdb.xml</span><span class="c0">&#160;has the same
  structure as a</span> <span class=
  "c5 c0">new_foreign_client</span><span class="c0">&#160;message.
  See that message's description for details.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h1 class="" id="h.ed4sng37wuoy"><span class=
  "c6 c29">Messages</span></h1>

  <p class=""><span class="c8 c0">This chapter lists the XML
  messages exchanged between the various parties communicating with
  go-susi. The messages are grouped into topics with their own
  sub-sections.</span></p>

  <h2 class="" id="h.yo95uphqjhiy"><span class="c15 c6">Modern
  communication protocol (go-susi only)</span></h2>

  <p class=""><span class="c8 c0">This communication protocol is
  not compatible with gosa-si. It offers better security and should
  be used whenever compatibility with legacy clients is not
  required. In order to use the modern protocol you need to create
  and configure TLS certificates.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c0">Communication begins with one party
  connecting to go-susi's TCP port. The party that initiates the
  connection sends the string</span> <span class=
  "c5 c0">"STARTTLS"</span><span class="c0">&#160;followed
  by</span> <span class="c5 c0">LF</span> <span class=
  "c0">(</span><span class="c5 c0">"\n"</span><span class="c0">)
  or</span> <span class="c5 c0">CRLF</span><span class=
  "c0">&#160;(</span><span class="c5 c0">"\r\n"</span><span class=
  "c8 c0">). Then both parties perform the TLS handshake. The party
  that initiated the connection acts as the client and the other
  party as the server. These designations are purely for purposes
  of the TLS handshake. The party initiating the connection will
  often be a server instance of go-susi but will act as the TLS
  client during the TLS handshake.</span></p>

  <p class=""><span class="c8 c0">TLS client authentication is
  required in all cases. This means that both the party initiating
  the connection and the other party need to present a certificate
  to the other party. Certificate verification is symmetrical as
  far as go-susi is confirmed. Both parties perform the exact same
  checks on each other's certificate.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c0">Once TLS handshake has succeeded,
  the party that initiated the connection may send messages and
  potentially received replies. Each message and reply is an XML
  fragment sent as plain text in UTF-8 encoding. Each message or
  reply is terminated by</span> <span class="c5 c0">LF</span>
  <span class="c0">(</span><span class=
  "c5 c0">"\n"</span><span class="c0">) or</span> <span class=
  "c5 c0">CRLF</span><span class="c0">&#160;(</span><span class=
  "c5 c0">"\r\n"</span><span class="c8 c0">). The message itself
  must not contain any "\n" characters, but other whitespace
  characters are permitted.</span></p>

  <p class=""><span class="c8 c0">Multiple messages may be sent
  over the same TCP connection. It is the responsibility of the
  process initiating the connection (i.e. the sender of the 1st
  message) to close it when it has finished sending all of its
  messages and reading all replies. However, if any party detects
  an error, it should drop the connection as soon as possible
  (after possibly returning an error reply) to avoid
  lockups.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c6">Security notes:</span><span class=
  "c0">&#160;The protocol intentionally does not provide for a
  downgrading mechanism if TLS negotiation fails or the receiving
  party does not understand "STARTTLS". Such downgrading would be a
  security risk. If a modern go-susi is configured without
  certificates (and hence cannot do TLS) and receives a "STARTTLS"
  it will treat it as a garbage message and will drop the
  connection. If a modern go-susi initiates a TLS connection and it
  fails, it will not try again without TLS even if</span>
  <span class="c5 c0">key=...</span><span class="c8 c0">&#160;lines
  are present in the configuration. However, if a modern go-susi
  receives a connection without "STARTTLS" it will remember that
  the connecting party does not understand TLS and will use the
  legacy protocol when contacting that party, provided that the
  configuration file provides keys for the legacy
  protocol.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c0">sibridge has a more lenient
  approach when contacting the target server. If both certificates
  and legacy keys are configured, sibridge will attempt a TLS
  connection first and if that fails will try to contact the target
  server with the legacy protocol.</span></p>

  <h2 class="" id="h.cd7ky6j7y55t"><span class="c15 c6">Legacy
  communication protocol (compatible with gosa-si)</span></h2>

  <p class=""><span class="c0">This communication protocol is still
  supported by go-susi if the configuration file contains at least
  one</span> <span class="c5 c0">key=...</span><span class=
  "c0">&#160;line. Because this weakens security, it is recommended
  to disable the legacy protocol by removing all</span>
  <span class="c5 c0">key=...</span><span class="c8 c0">&#160;lines
  from the configuration, unless you have actual legacy clients on
  your network.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c0">Every message and reply is the
  base64-encoding of an encrypted XML fragment. The encryption key
  used depends on the kind of message. See the code in</span>
  <span class="c5 c0">message/process_msg.go</span><span class=
  "c0">&#160;in the functions</span> <span class=
  "c5 c0">GosaEncrypt()</span><span class="c0">&#160;and</span>
  <span class="c5 c0">GosaDecrypt()</span><span class=
  "c8 c0">&#160;for details on the encryption scheme.</span></p>

  <p class=""><span class="c0">Each message or reply is terminated
  by</span> <span class="c5 c0">LF</span> <span class=
  "c0">(</span><span class="c5 c0">"\n"</span><span class=
  "c0">)</span><span class="c0">&#160;or</span> <span class=
  "c5 c0">CRLF</span><span class="c0">&#160;(</span><span class=
  "c5 c0">"\r\n"</span><span class="c8 c0">) following the
  base64-text (which must not be broken by whitespace). It is
  permissible to send multiple messages over the same TCP
  connection. It is the responsibility of the process initiating
  the connection (i.e. the sender of the 1st message) to close it
  when it has finished sending all of its messages and reading all
  replies. However, if any party detects an error, it should drop
  the connection as soon as possible (after possibly returning an
  error reply) to avoid lockups.</span></p>

  <h2 class="" id="h.q0xsu7rifamf"><span class="c15 c6">Message
  structure and common elements</span></h2>

  <p class=""><span class="c8 c0">Note that for readability all XML
  in this manual will be formatted with line breaks. However
  embedded line breaks are not permitted in messages when
  transmitted with the modern protocol.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c0">Most messages follow a common
  structure and share common elements.</span></p>

  <p class="c7"></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">prefix</span><span class=
  "c5 c0">_foo_bar</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">GOSA</span><span class="c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">123.123.123.123:20081</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7 c10"></p>

  <p class=""><span class="c8 c0">The message elements have the
  following meaning:</span></p>

  <p class=""><span class="c8 c6">&lt;header&gt;</span></p>

  <p class="c10"><span class="c0">This identifies the type of
  message. Most headers have a</span> <span class=
  "c5 c0">"prefix_"</span><span class="c0">&#160;component that a
  group of related messages share. A frequent prefix is</span>
  <span class="c5 c0">"gosa_"</span><span class="c8 c0">&#160;which
  is used by messages sent by GOsa.</span></p>

  <p class=""><span class="c6">&lt;source&gt;</span></p>

  <p class="c10"><span class="c0">The sender of the message. Most
  of the time this is an</span> <span class=
  "c5 c0">IP:PORT</span><span class="c0">&#160;address of an
  si-server or client. However if the message is sent by GOsa,
  the</span> <span class="c6">&lt;source&gt;</span><span class=
  "c0">&#160;is</span> <span class="c2 c0">"GOSA".</span></p>

  <p class="c10"><span class="c0">Developers wishing to interface
  with go-susi should always fill in an</span> <span class=
  "c5 c0">IP:PORT</span><span class="c0">&#160;address with the
  proper IP of the sending computer. Because the</span>
  <span class="c6">&lt;source&gt;</span><span class="c0">&#160;is
  used as a key in some places the same sender should always use
  the exact same</span> <span class=
  "c6">&lt;source&gt;</span><span class="c0">.</span></p>

  <p class=""><span class="c6">&lt;target&gt;</span></p>

  <p class="c10"><span class="c0">The counterpart of</span>
  <span class="c6">&lt;source&gt;</span><span class="c0">. Most of
  the time this is simply the</span> <span class=
  "c5 c0">IP:PORT</span><span class="c0">&#160;of the recipient,
  but some message types have the MAC address of an affected system
  in the</span> <span class="c6">&lt;target&gt;</span><span class=
  "c0">&#160;element and GOsa, for whatever reasons, usually
  sets</span> <span class="c6">&lt;target&gt;</span><span class=
  "c0">&#160;to</span> <span class=
  "c5 c0">"GOSA"</span><span class="c8 c0">, even though this makes
  no sense.</span></p>

  <p class="c10"><span class="c0">Because</span> <span class=
  "c6">&lt;target&gt;</span><span class="c0">&#160;is</span>
  <span class="c0 c18">not</span><span class="c8 c0">&#160;used for
  message forwarding, it is basically useless.</span></p>

  <p class="c10"><span class="c0">Developers wishing to interface
  with go-susi should always fill in the</span> <span class=
  "c5 c0">IP:PORT</span><span class="c0">&#160;address of the
  go-susi process they target.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h2 class="" id="h.v3ibvnwfeq4q"><span class="c15 c6">Reply
  structure</span></h2>

  <p class=""><span class="c8 c0">The term reply as used in this
  manual refers only to something that is sent back over the same
  TCP connection as the message the reply refers to. Most messages
  do not have replies and the sender typically closes the
  connection after sending the message. Some messages trigger
  return messages sent over a new connection initiated by the
  recipient of the first message. These return messages are not
  referred to as replies in this manual.</span></p>

  <p class=""><span class="c8 c0">Like messages in general, most
  replies follow a common structure.</span></p>

  <p class="c7 c10"></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">foo_bar</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">0.0.0.0:20081</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">GOSA</span><span class="c2 c6">&lt;/target&gt;</span></p>

  <p class="c1"><span class="c4">&lt;answer1&gt;</span><span class=
  "c5 c0">...</span><span class="c2 c6">&lt;/answer1&gt;</span></p>

  <p class="c1"><span class=
  "c2 c6">&lt;foo_bar&gt;&lt;/foo_bar&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;session_id&gt;</span><span class=
  "c5 c0">5352</span><span class=
  "c2 c6">&lt;/session_id&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c0">The message elements have the
  following meaning:</span></p>

  <p class=""><span class="c6">&lt;header&gt;</span></p>

  <p class="c10"><span class="c0">The header is often derived from
  the message the reply is answering by dropping the</span>
  <span class="c2 c0">"prefix_".</span></p>

  <p class=""><span class="c8 c6">&lt;source&gt;,
  &lt;target&gt;</span></p>

  <p class="c10"><span class="c8 c0">While these are often simply
  the swapped values of the corresponding elements from the initial
  message, as the example shows they can be even more
  meaningless.</span></p>

  <p class=""><span class="c8 c6">&lt;foo_bar&gt;</span></p>

  <p class="c10"><span class="c8 c0">Many replies feature empty
  elements named like the header.</span></p>

  <p class=""><span class="c8 c6">&lt;session_id&gt;</span></p>

  <p class="c10"><span class="c8 c0">An implementation detail from
  gosa-si-server that may be useful in log entries. For
  compatibility reasons go-susi adds this element to replies but
  the contained value is arbitrary.</span></p>

  <p class=""><span class="c8 c6">&lt;answer1&gt;</span></p>

  <p class="c10"><span class="c0">When a reply may contain multiple
  datasets with the same structure, they are usually wrapped
  in</span> <span class="c6">&lt;answerX&gt;</span><span class=
  "c0">&#160;elements where</span> <span class=
  "c6">X</span><span class="c0">&#160;is the index of the
  answer.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h2 class="" id="h.sh9p65qhzwco"><span class="c15 c6">Error
  replies</span></h2>

  <p class=""><span class="c8 c0">If an error occurs while
  processing a request, the si-server may send an error reply.
  Usually this is only done for messages that have regular replies,
  in particular for messages sent by GOsa. GOsa understands error
  replies with the following structure and may present the
  contained error message as a popup to the user.</span></p>

  <p class="c7"></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">answer</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">123.123.123.123:20081</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">GOSA</span><span class="c2 c6">&lt;/target&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;error_string&gt;</span><span class="c5 c0">Number out of
  range</span><span class="c2 c6">&lt;/error_string&gt;</span></p>

  <p class="c1"><span class="c4">&lt;answer1&gt;</span><span class=
  "c5 c0">1</span><span class="c2 c6">&lt;/answer1&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7 c10"></p>

  <p class=""><span class="c8 c0">The message elements have the
  following meaning:</span></p>

  <p class=""><span class="c6">&lt;header&gt;</span><span class=
  "c0">&#160;always</span> <span class="c2 c0">"answer".</span></p>

  <p class=""><span class="c6">&lt;source&gt;</span><span class=
  "c8 c0">&#160;the sending server</span></p>

  <p class=""><span class="c6">&lt;target&gt;</span><span class=
  "c0">&#160;always</span> <span class="c5 c0">"GOSA".</span></p>

  <p class=""><span class="c6">&lt;answer1&gt;</span><span class=
  "c8 c0">&#160;always "1".</span></p>

  <p class=""><span class="c6">&lt;error_string&gt;</span></p>

  <p class="c10"><span class="c8 c0">A human-readable description
  of the error. The presence of this element, and not
  &lt;answer1&gt;1&lt;/answer1&gt;, is the best indicator of an
  error.</span></p>

  <p class="c7"></p>

  <h2 class="" id="h.1tre848fj84d"><span class="c15 c6">Encryption
  keys</span></h2>

  <p class=""><span class="c8 c0">Messages are encrypted with
  different keys depending on sender and recipient. Unlike
  gosa-si-server go-susi accepts all messages encrypted with all
  keys. When sending, go-susi will follow the gosa-si-server rules
  on choosing the key to encrypt the message.</span></p>

  <p class=""><span class="c6">GOsa &#11020; Server:</span></p>

  <p class="c10"><span class="c0">Messages by GOsa to the si-server
  and the server's replies are encrypted with the</span>
  <span class="c6">[GOsaPackages]</span><span class=
  "c8 c0">&#160;key.</span></p>

  <p class=""><span class="c6">Server &#10132; Client:</span></p>

  <p class="c10"><span class="c0">Messages sent by the si-server to
  si-clients registered at that server are always encrypted with
  the key from the most recent</span> <span class=
  "c5 c0">here_i_am</span><span class="c0">&#160;or</span>
  <span class="c5 c0">new_key</span><span class=
  "c8 c0">&#160;message sent by the client.</span></p>

  <p class=""><span class="c8 c6">Server &#10132;
  Server:</span></p>

  <p class="c10"><span class="c0">Messages sent from one server to
  another are encrypted with the most recent key exchanged between
  sender and receiver via</span> <span class=
  "c5 c0">new_server/confirm_new_server</span><span class=
  "c8 c0">&#160;messages.</span></p>

  <p class="c10"><span class="c0">The only exception to this rule
  is the</span> <span class="c5 c0">new_server</span><span class=
  "c0">&#160;message which is encrypted with the</span>
  <span class="c6">[ServerPackages]</span><span class=
  "c8 c0">&#160;key, because when it is sent there is not yet an
  agreed key.</span></p>

  <p class=""><span class="c6">Client &#10132; Server:</span></p>

  <p class="c10"><span class="c0">Messages sent by an si-client to
  the si-server where it is registered are encrypted with the key
  from the most recent</span> <span class=
  "c5 c0">here_i_am</span><span class="c0">&#160;or</span>
  <span class="c5 c0">new_key</span><span class="c0">&#160;message
  sent by the client. The only exception to this rule is the</span>
  <span class="c5 c0">here_i_am</span><span class=
  "c0">&#160;message itself which is encrypted with the</span>
  <span class="c6">[ClientPackages]</span><span class=
  "c0">&#160;key.</span></p>
  <hr style="page-break-before:always;display:none;" />
  <a id="id.sj4np8e9wdb8" name="id.sj4np8e9wdb8"></a>

  <h2 class="" id="h.o2gkp1mdgfab"><span class=
  "c15 c6">Jobs</span></h2>

  <p class=""><span class="c0">One of the core features of the
  si-server is to keep a persistent database of jobs. Each job has
  a</span> <span class="c5 c0">&lt;timestamp&gt;</span><span class=
  "c0">&#160;that determines when the job is to be executed and
  an</span> <span class="c5 c0">&lt;siserver&gt;</span><span class=
  "c0">&#160;field that identifies the server responsible for
  launching that job when its time has come</span><span class=
  "c0">. Depending on the job's type there may be other fields.
  Usually there is a</span> <span class=
  "c5 c0">&lt;macaddress&gt;</span><span class="c8 c0">&#160;that
  specifies the machine to be affected by the job.</span></p>

  <p class=""><span class="c8 c0">Jobs are created by GOsa in
  response to user actions. There is a distinction between jobs to
  be executed immediately and jobs to be launched at a future time.
  However, as far as the messages are concerned the differences are
  so minor that go-susi (but not gosa-si-server) treats the two
  forms as synonyms.</span></p>

  <p class=""><span class="c0">Jobs are stored in the jobdb, which
  in go-susi is stored in a file</span> <span class=
  "c5 c0">jobdb.xml</span><span class="c0">&#160;described further
  above. The message</span> <span class=
  "c5 c0">gosa_query_jobdb</span><span class="c8 c0">&#160;can be
  used to &#160;extract data from the jobdb. GOsa uses this message
  for its deployment status page.</span></p>

  <p class=""><span class="c0">The message</span> <span class=
  "c5 c0">gosa_update_status_jobdb_entry</span><span class=
  "c0">&#160;can modify the fields of an existing job and the
  message</span> <span class=
  "c5 c0">gosa_delete_jobdb_entry</span><span class="c0">&#160;can
  be used to remove jobs. Note that GOsa does not allow the removal
  of running install jobs. Instead GOsa offers to cancel them. It
  does this by sending a</span> <span class=
  "c5 c0">gosa_trigger_action_faireboot</span><span class=
  "c8 c0">&#160;message.</span></p>

  <p class=""><span class="c0">When it's time to execute a job, the
  si-server first notifies the target machine (if there is one and
  it's reachable) of the job by sending a</span> <span class=
  "c5 c0">trigger_action_*</span><span class="c8 c0">&#160;message.
  The target machine may react to this message by presenting a
  logged in user with a popup asking the user to log
  out.</span></p>

  <p class=""><span class="c0">A job has a lifecycle that is
  reflected in its</span> <span class=
  "c5 c0">&lt;status&gt;</span><span class="c0">&#160;and</span>
  <span class="c5 c0">&lt;progress&gt;</span><span class=
  "c0">&#160;fields which are documented at the message</span>
  <span class="c5 c0">gosa_query_jobdb.</span><span class=
  "c0">&#160;The job starts out as</span> <span class=
  "c5 c0">waiting</span><span class="c0">, progresses to</span>
  <span class="c5 c0">processing</span><span class="c0">&#160;and
  is removed from the jobdb when its</span> <span class=
  "c5 c0">&lt;status&gt;</span><span class=
  "c0">&#160;becomes</span> <span class=
  "c5 c0">done.</span><span class="c0">&#160;The</span>
  <span class="c5 c0">&lt;progress&gt;</span><span class=
  "c8 c0">&#160;field is only used for long-running jobs like
  installations.</span></p>

  <p class=""><span class="c0">Jobs are an important part of
  server-to-server communication. The relevant message</span>
  <span class="c5 c0">foreign_job_updates</span><span class=
  "c8 c0">&#160;is described not in the present section but the one
  on server-to-server communication.</span></p>

  <p class=""><span class="c0">A special role is played by the
  message</span> <span class=
  "c5 c0">job_trigger_activate_new</span><span class=
  "c0">&#160;which is used by GOsa for its CSV-import feature.
  go-susi reacts to this message by creating an LDAP object for the
  target system if there isn't one, as well as creating an
  installation job and activating the system. With go-susi</span>
  <span class="c5 c0">job_trigger_activate_new</span><span class=
  "c0">&#160;effectively acts as a combination of</span>
  <span class="c5 c0">detected_hardware,
  job_trigger_action_reinstall</span><span class=
  "c0">&#160;and</span> <span class=
  "c5 c0">gosa_set_activated_for_installation.</span><span class=
  "c8 c0">&#160;gosa-si-server handles things
  differently.</span></p>

  <p class=""><span class="c0">GOsa's feature for sending messages
  to users and/or groups results in</span> <span class=
  "c5 c0">job_send_user_msg</span><span class="c0">&#160;messages
  which differ from ordinary job messages in that they do not
  target a machine. Other than that they are treated like other
  jobs, are stored in the jobdb and can be read with</span>
  <span class="c5 c0">gosa_query_jobdb,</span><span class=
  "c0">&#160;modified with</span> <span class=
  "c5 c0">gosa_update_status_jobdb_entry</span><span class=
  "c0">&#160;and removed with</span> <span class=
  "c5 c0">gosa_delete_jobdb_entry.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="" id="h.lytqmekfw49"><span class=
  "c12 c6">job_trigger_action_*</span></h3>

  <h3 class="" id="h.18ajv1iep81s"><span class=
  "c12 c6">gosa_trigger_action_*</span></h3>

  <p class="c14"><span class="c8 c6">Purpose:</span></p>

  <p class="c14 c10"><span class="c0">GOsa&#11020;Server.</span>
  <span class="c0">Schedule a job for execution at a later time
  (</span><span class="c5 c0">job_*</span><span class="c0">) or
  execute it at once</span><span class=
  "c5 c0">&#160;(gosa_*).</span><span class="c0">&#160;The server
  that gets this message from GOsa will tell peer servers about the
  new job via</span> <span class=
  "c5 c0">foreign_job_updates</span><span class=
  "c8 c0">.</span></p>

  <p class="c14 c10"><span class="c0">When the job's time has come,
  a matching</span> <span class=
  "c5 c0">trigger_action_*</span><span class="c8 c0">&#160;message
  will be sent to the affected client (if it is
  reachable).</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">Example message:</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;header&gt;</span><span class=
  "c5 c0">job_trigger_action_lock</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;source&gt;</span><span class=
  "c5 c0">GOSA</span><span class="c2 c6">&lt;/source&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;target&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;timestamp&gt;</span><span class=
  "c5 c0">20120914131742</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;periodic&gt;</span><span class=
  "c5 c0">7_days</span><span class=
  "c2 c6">&lt;/periodic&gt;</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class="c14"><span class="c6">&lt;header&gt;</span><span class=
  "c8 c0">&#160;identifies the kind of job. The following jobs are
  supported:</span></p>

  <p class="c14 c10"><span class=
  "c6">*_trigger_action_halt</span></p>

  <p class="c14 c1"><span class="c8 c0">tell client to shut down
  (allowing logged in users to log out first)</span></p>

  <p class="c14 c10"><span class=
  "c6">*_trigger_action_reboot</span></p>

  <p class="c14 c1"><span class="c8 c0">tell client to reboot
  (allowing logged in users to log out first)</span></p>

  <p class="c10"><span class="c6">*_trigger_action_audit</span></p>

  <p class="c1"><span class="c8 c0">tell client to perform an
  audit</span></p>

  <p class="c14 c10"><span class=
  "c6">*_trigger_action_faireboot</span></p>

  <p class="c14 c1"><span class="c8 c0">abort FAI operation (e.g.
  installation) in progress</span></p>

  <p class="c14 c10"><span class=
  "c6">*_trigger_action_reinstall</span></p>

  <p class="c14 c1"><span class="c8 c0">set faiState to
  &#8220;install&#8221;; tell users to log out; wake client if
  necessary</span></p>

  <p class="c14 c10"><span class=
  "c6">*_trigger_action_update</span></p>

  <p class="c14 c1"><span class="c8 c0">set faiState to
  &#8220;softupdate&#8221;; tell users to log out; wake client if
  necs.</span></p>

  <p class="c14 c10"><span class=
  "c6">*_trigger_action_localboot</span></p>

  <p class="c14 c1"><span class="c8 c0">set faiState to
  &#8220;localboot&#8221; and remove pending install/softupdate
  jobs</span></p>

  <p class="c14 c10"><span class=
  "c6">*_trigger_action_wake</span></p>

  <p class="c14 c1"><span class="c8 c0">send wake-on-lan (WOL) to
  target</span></p>

  <p class="c14 c10"><span class=
  "c6">*_trigger_action_lock</span></p>

  <p class="c14 c1"><span class="c8 c0">set gotoMode to
  locked</span></p>

  <p class="c14 c10"><span class=
  "c6">*_trigger_action_activate</span></p>

  <p class="c14 c1"><span class="c0">set gotoMode
  &#8220;active&#8221;; send</span> <span class=
  "c2 c0">set_activated_for_installation</span></p>

  <p class="c14 c1 c7"></p>

  <p class="c14 c10"><span class=
  "c6">&lt;header&gt;</span><span class="c0">&#160;will
  become</span> <span class=
  "c6">&lt;headertag&gt;</span><span class="c0">&#160;in</span>
  <span class="c5 c0">foreign_job_updates</span><span class=
  "c8 c0">&#160;etc.</span></p>

  <p class="c14"><span class="c8 c6">&lt;macaddress&gt;,
  &lt;target&gt;</span></p>

  <p class="c14 c10"><span class="c0">At least one of these
  elements must contain a valid MAC address that identifies the
  machine to be affected by the job. If</span> <span class=
  "c6">&lt;macaddress&gt;</span><span class="c8 c0">&#160;is
  present, it will be preferred.</span></p>

  <p class="c14 c10"><span class="c0">The</span> <span class=
  "c6">&lt;target&gt;</span><span class="c0">&#160;value will
  become</span> <span class=
  "c6">&lt;targettag&gt;</span><span class="c0">&#160;in</span>
  <span class="c5 c0">foreign_job_updates</span><span class=
  "c8 c0">&#160;etc.</span></p>

  <p class="c14"><span class=
  "c6">&lt;timestamp&gt;</span><span class=
  "c0">&#160;</span><span class=
  "c28 c0 c31 c18">(optional)</span></p>

  <p class="c14 c10"><span class="c8 c0">When the job should be
  executed. The format is "YYYYMMDDHHMMSS". The time is local time
  of the server that receives the message and takes time zone (in
  particular daylight saving time) into account. IOW the job will
  be executed at the earliest time that the server's clock has a
  value greater than the job's timestamp.</span></p>

  <p class="c14 c10"><span class="c0">If</span> <span class=
  "c6">&lt;timestamp&gt;</span><span class="c0">&#160;is missing,
  the timestamp will be considered to be "now" (meaning the job
  will be executed as soon as possible). "</span><span class=
  "c5 c0">gosa_trigger_*</span><span class="c8 c0">" messages do
  not usually have a timestamp.</span></p>

  <p class="c14"><span class=
  "c6">&lt;periodic&gt;</span><span class=
  "c0">&#160;</span><span class=
  "c28 c0 c31 c18">(optional)</span></p>

  <p class="c14 c10"><span class="c0">The job will be repeated in
  regular intervals. The format is a</span> <span class=
  "c0 c18">number</span><span class="c0">&#160;followed by</span>
  <span class="c5 c0">"_"</span><span class="c0">&#160;followed by
  either</span> <span class="c5 c0">"seconds", "minutes", "hours",
  "days", "weeks", "months"</span><span class="c0">&#160;or</span>
  <span class="c5 c0">"years".</span> <span class="c0">Also
  permitted is</span> <span class=
  "c6">&lt;periodic&gt;</span><span class=
  "c5 c0">none</span><span class=
  "c6">&lt;/periodic&gt;</span><span class="c0">&#160;which is the
  same as not having</span> <span class=
  "c6">&lt;periodic&gt;</span><span class="c8 c0">.</span></p>

  <p class="c14 c10"><span class="c0">If a job is scheduled
  with</span> <span class="c6">&lt;periodic&gt;</span><span class=
  "c0">&#160;it will be scheduled to run for the first time at the
  time specified in</span> <span class=
  "c6">&lt;timestamp&gt;</span><span class="c0">. It will run for
  the 2nd time at the time that results from adding the</span>
  <span class="c6">&lt;periodic&gt;</span><span class=
  "c0">&#160;duration to the timestamp, for the 3rd time at the
  time that results from adding the duration to the timestamp of
  the 2nd time, and so on. If, at the time the job finishes, one or
  more of the repeat times have already passed, they will be
  skipped. For example, if a job is scheduled every</span>
  <span class="c5 c0">"1_minutes"</span><span class=
  "c8 c0">&#160;and the 1st run takes 1 &#189; minutes, the 2nd run
  will be skipped and the next run will be the 3rd which will start
  &#189; minute after the end of the 1st run.</span></p>

  <p class="c14 c10"><span class="c0">Note that using the
  unit</span> <span class="c5 c0">"days"</span><span class=
  "c0">&#160;is different from using multiples of 24</span>
  <span class="c5 c0">"hours"</span><span class="c0">&#160;because
  of daylight savings time which may cause days to be longer or
  shorter. A</span> <span class="c5 c0">"week"</span> <span class=
  "c0">is the same as 7</span> <span class=
  "c2 c0">"days".</span></p>

  <p class="c14 c10"><span class="c0">Note that using the
  unit</span><span class="c5 c0">&#160;"months"</span><span class=
  "c0">&#160;is not the same as any particular number of days
  because months vary in length. The same applies to</span>
  <span class="c5 c0">"years".</span><span class="c0">&#160;E.g. a
  job scheduled with</span> <span class=
  "c6">&lt;timestamp&gt;</span><span class=
  "c5 c0">20120101000000</span><span class=
  "c6">&lt;/timestamp&gt;</span><span class="c0">&#160;and</span>
  <span class="c6">&lt;periodic&gt;</span><span class=
  "c5 c0">1_months</span><span class=
  "c6">&lt;/periodic&gt;</span><span class="c8 c0">&#160;will run
  on 2012-01-01, then 2012-02-01, then 2012-03-01,...</span></p>

  <p class="c14 c10"><span class="c8 c0">29 February will wrap
  around to 1 March during a non-leap year and from that point on
  the timestamp will stay at the 1st of the month, even during
  future leap years. 31 will wrap around to 1 during short months
  and will stay at 1.</span></p>

  <p class="c14 c10"><span class="c0">IOW, never schedule jobs with
  a periodic unit of</span> <span class=
  "c5 c0">"months"</span><span class="c8 c0">&#160;on days &gt;=
  29.</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">gosa-si-server
  notes:</span></p>

  <p class="c14 c10"><span class="c0">This message is handled
  in</span> <span class=
  "c5 c0">modules/GosaPackages.pm:process_job_msg()</span><span class="c8 c0">.</span></p>

  <p class="c14 c10"><span class="c0">gosa-si-server does not
  return a reply to the</span> <span class=
  "c5 c0">gosa_*</span><span class="c0">&#160;messages only
  to</span> <span class="c2 c0">job_*.</span></p>

  <p class="c14"><span class="c8 c6">go-susi notes:</span></p>

  <p class="c14 c10"><span class=
  "c6">&lt;periodic&gt;</span><span class="c0">&#160;units</span>
  <span class="c5 c0">"years"</span><span class=
  "c0">&#160;and</span> <span class=
  "c5 c0">"seconds"</span><span class="c0">&#160;are go-susi
  extensions not supported by gosa-si. The unit</span> <span class=
  "c5 c0">"seconds"</span><span class="c8 c0">&#160;is for testing
  only.</span></p>

  <p class="c14 c10"><span class="c0">go-susi treats</span>
  <span class="c5 c0">gosa_*</span><span class=
  "c0">&#160;and</span> <span class=
  "c5 c0">job_*</span><span class="c0">&#160;the same. In
  particular go-susi will send</span> <span class=
  "c5 c0">foreign_job_updates</span><span class="c0">&#160;messages
  for both. gosa-si doesn't do this for</span> <span class=
  "c5 c0">gosa_*</span><span class=
  "c8 c0">&#160;messages.</span></p>

  <p class="c14 c10"><span class="c0">gosa-si-server checks its
  foreign_clients database and if it finds that the affected client
  is registered at a peer server it will forward the job request to
  the peer with an added</span> <span class=
  "c5 c0">&lt;forward_to_gosa&gt;</span><span class=
  "c8 c0">&#160;element. go-susi does not do this at the time it
  receives the message but waits until the time the job is up for
  execution and then forwards the job if necessary.</span></p>

  <p class="c14 c10"><span class="c0">go-susi treats</span>
  <span class=
  "c5 c0">gosa_set_activated_for_installation</span><span class=
  "c0">&#160;as a synonym for</span> <span class=
  "c5 c0">gosa_trigger_action_activate</span><span class=
  "c8 c0">.</span></p>

  <p class="c14 c10"><span class="c0">go-susi
  treats</span><span class="c0">&#160;</span><span class=
  "c5 c0">trigger_action_faireboot</span><span class=
  "c0">&#160;</span><span class="c0">different from gosa-si-server.
  gosa-si-server locks the machine and reboots it, but keeps it
  in</span> <span class="c5 c0">faiState</span><span class=
  "c0">&#160;</span><span class="c5 c0">install</span><span class=
  "c0">&#160;(if it is installing). The job does not actually
  disappear. While this makes sense for the name of the job, it
  doesn't match how GOsa uses this job. GOsa sends</span>
  <span class="c5 c0">gosa_trigger_action_faireboot</span>
  <span class="c0">when "Abort" is selected in the jobs overview.
  To better match GOsa's use of this job, go-susi interprets
  "faireboot" as "abort job".</span></p>
  <hr style="page-break-before:always;display:none;" />

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">Example reply:</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;header&gt;</span><span class=
  "c5 c0">answer</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;source&gt;</span><span class=
  "c5 c0">0.0.0.0:20081</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;target&gt;</span><span class=
  "c5 c0">GOSA</span><span class="c2 c6">&lt;/target&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;answer1&gt;</span><span class=
  "c5 c0">0</span><span class="c2 c6">&lt;/answer1&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;session_id&gt;</span><span class=
  "c5 c0">5352</span><span class=
  "c2 c6">&lt;/session_id&gt;</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">The reply elements have the
  following meaning:</span></p>

  <p class="c14 c10"><span class=
  "c6">&lt;answer1&gt;</span><span class="c0">&#160;0 if the job
  was successfully added to the jobdb or a numeric error code if
  there was a problem. In the latter case there will be an</span>
  <span class="c6">&lt;error_string&gt;</span><span class=
  "c8 c0">&#160;element with a human language description of the
  error.</span></p>

  <p class="c14"><span class="c8 c6">GOsa notes:</span></p>

  <p class="c14 c10"><span class="c0">GOsa sends this message
  in</span> <span class=
  "c5 c0">class_gosaSupportDaemon.inc:append()</span><span class=
  "c0">. The</span> <span class=
  "c5 c0">"job_trigger_action_*"</span><span class=
  "c0">&#160;string comes from</span> <span class=
  "c5 c0">get_schedule_action()</span> <span class="c0">or</span>
  <span class="c5 c0">get_trigger_action()</span><span class=
  "c0">&#160;which are defined in</span> <span class=
  "c5 c0">class_DaemonEvent.inc</span><span class="c0">&#160;and
  whose values are set in the respective subclass, e.g.</span>
  <span class="c2 c0">class_DaemonEvent_halt.inc.</span></p>

  <p class="c14 c10"><span class="c0">GOsa ignores the reply and in
  fact appears to close the connection after sending the message,
  so that the reply cannot even be delivered.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="c27" id="h.rfc7061kx2wn"><span class=
  "c12 c6">job_trigger_activate_new</span></h3>

  <p class=""><span class="c8 c6">Purpose:</span></p>

  <p class="c10"><span class="c0">GOsa&#10132;Server.</span>
  <span class="c8 c0">Create a new system object and matching
  install job. This message is sent by GOsa for each entry when
  using the CSV import feature. It&#8217;s typically used to import
  a whole batch of new systems ready for installation, so that they
  only need to be plugged in and turned on.</span></p>

  <p class="c7 c10"></p>

  <p class=""><span class="c6">Example message:</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">job_trigger_activate_new</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">GOSA</span><span class="c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;timestamp&gt;</span><span class=
  "c5 c0">20130417120000</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c1"><span class="c4">&lt;ip&gt;</span><span class=
  "c5 c0">172.16.2.146</span><span class=
  "c2 c6">&lt;/ip&gt;</span></p>

  <p class="c1"><span class="c4">&lt;fqdn&gt;</span><span class=
  "c5 c0">grisham.tvc.example.com</span><span class=
  "c2 c6">&lt;/fqdn&gt;</span></p>

  <p class="c1"><span class="c4">&lt;ogroup&gt;</span><span class=
  "c5 c0">Desktops</span><span class=
  "c2 c6">&lt;/ogroup&gt;</span></p>

  <p class="c1"><span class="c4">&lt;base&gt;</span><span class=
  "c5 c0">ou=Direktorium,o=go-susi,c=de</span><span class=
  "c2 c6">&lt;/base&gt;</span></p>

  <p class="c1"><span class="c4">&lt;mac&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/mac&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c1"><span class=
  "c2 c6">&lt;dhcp&gt;&lt;/dhcp&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class=""><span class="c6">&lt;timestamp&gt;</span><span class=
  "c0">&#160;</span><span class="c0 c18">(optional)</span></p>

  <p class="c10"><span class="c0">A</span> <span class=
  "c5 c0">trigger_action_reinstall</span><span class="c0">&#160;job
  with this</span> <span class=
  "c6">&lt;timestamp&gt;</span><span class="c0">&#160;will be
  created. If</span> <span class=
  "c6">&lt;timestamp&gt;</span><span class="c8 c0">&#160;is
  missing, it defaults to now.</span></p>

  <p class=""><span class="c6">&lt;base&gt;</span><span class=
  "c0">&#160;</span><span class=
  "c28 c0 c31 c18">(optional)</span></p>

  <p class="c10"><span class="c0">The new system object will be put
  into</span> <span class=
  "c5 c0">ou=workstations,ou=systems,&lt;base&gt;</span><span class="c0">&#160;or</span>
  <span class=
  "c5 c0">ou=servers,ou=systems,&lt;base&gt;</span><span class=
  "c4">&#160;</span><span class="c0">depending on whether it
  is</span> <span class="c5 c0">gotoWorkstation</span><span class=
  "c0">&#160;or</span> <span class=
  "c5 c0">goServer</span><span class="c0">&#160;(based on
  the</span> <span class="c6">&lt;ogroup&gt;</span><span class=
  "c0">&#160;information or an existing object). If no information
  about the system's type is available, it will be put in</span>
  <span class="c2 c0">new-systems-base.</span></p>

  <p class="c10"><span class="c8 c0">If an object with the given
  MAC address already exists elsewhere, it will be moved to the new
  location.</span></p>

  <p class="c10"><span class="c0">If</span> <span class=
  "c6">&lt;base&gt;</span><span class="c0">&#160;is missing
  and</span> <span class="c6">&lt;ogroup&gt;</span><span class=
  "c0">&#160;is an object group,</span><span class=
  "c6">&#160;</span><span class="c0">&#160;the system will be put
  into the same</span> <span class="c5 c0">ou</span><span class=
  "c0">&#160;as the alphabetically first member system of the
  object group (even if that</span> <span class=
  "c5 c0">ou</span><span class="c0">&#160;is not called</span>
  <span class="c5 c0">"workstations"</span><span class=
  "c0">&#160;or</span> <span class=
  "c5 c0">"servers"</span><span class="c0">).</span></p>

  <p class="c10"><span class="c0">If</span> <span class=
  "c6">&lt;base&gt;</span><span class="c0">&#160;is missing
  and</span> <span class="c6">&lt;ogroup&gt;</span><span class=
  "c0">&#160;is also missing,</span> <span class=
  "c6">&lt;base&gt;</span><span class="c0">&#160;will default
  to</span> <span class=
  "c5 c0">[server]/ldap-base</span><span class="c8 c0">&#160;for
  new entries and keep the old location if the system already
  exists.</span></p>

  <p class="c10"><span class="c0">If</span> <span class=
  "c6">&lt;base&gt;</span><span class="c0">&#160;is missing
  and</span> <span class="c6">&lt;ogroup&gt;</span><span class=
  "c0">&#160;is a system, the new system object will be put into
  the same</span> <span class="c5 c0">ou</span><span class=
  "c0">&#160;as the template system (even if that</span>
  <span class="c5 c0">ou</span><span class="c0">&#160;is not
  called</span> <span class=
  "c0 c5">"workstations"</span><span class="c0">&#160;or</span>
  <span class="c5 c0">"servers"</span><span class=
  "c8 c0">).</span></p>

  <p class=""><span class="c8 c6">&lt;mac&gt;, &lt;macaddress&gt;,
  &lt;target&gt;</span></p>

  <p class="c10"><span class="c0">One of these elements must be
  present. If the message has both</span> <span class=
  "c6">&lt;mac&gt;</span><span class="c0">&#160;and</span>
  <span class="c6">&lt;macaddress&gt;</span><span class=
  "c0">,</span> <span class="c6">&lt;mac&gt;</span><span class=
  "c0">&#160;will take precedence over</span> <span class=
  "c6">&lt;macaddress&gt;</span><span class="c8 c0">&#160;and an
  error will be logged if they differ.</span></p>

  <p class="c10"><span class="c0">If either</span> <span class=
  "c6">&lt;mac&gt;</span><span class="c0">&#160;or</span>
  <span class="c6">&lt;macaddress&gt;</span><span class=
  "c0">&#160;is present,</span> <span class=
  "c6">&lt;target&gt;</span><span class="c8 c0">&#160;is ignored.
  Otherwise it will be used as MAC and it is a fatal error if it is
  not a valid MAC.</span></p>

  <p class=""><span class="c6">&lt;ogroup&gt;</span><span class=
  "c0">&#160;</span><span class=
  "c28 c0 c31 c18">(optional)</span></p>

  <p class="c10"><span class="c0">Either the plain or
  full-qualified name of a system (i.e. LDAP object with</span>
  <span class="c5 c0">objectClass=GOHard</span><span class="c0">)
  to use as a template or the name of an object group (i.e. LDAP
  object with</span> <span class=
  "c5 c0">objectClass=gosaGroupOfNames</span><span class=
  "c8 c0">).</span></p>

  <p class="c10"><span class="c0">If</span> <span class=
  "c6">&lt;ogroup&gt;</span><span class="c0">&#160;is an object
  group, its member list will be sorted alphabetically and the
  first</span> <span class="c5 c0">GOHard</span><span class=
  "c8 c0">&#160;member will be used as template system.</span></p>

  <p class="c10"><span class="c8 c0">If no LDAP object exists for
  the given MAC address, an object will created with a generated
  name and the relevant attributes will be copied from the template
  system.</span></p>

  <p class="c10"><span class="c0">The</span> <span class=
  "c5 c0">gotoMode</span><span class="c0">&#160;will always be set
  to</span> <span class="c5 c0">active</span><span class="c8 c0">,
  irrespective of the template object&#8217;s value.</span></p>

  <p class="c10"><span class="c0">If</span> <span class=
  "c6">&lt;ogroup&gt;</span><span class="c0">&#160;is missing and
  there is no existing LDAP object, an incomplete entry will be
  created in</span> <span class=
  "c5 c0">new-systems-base</span><span class="c2 c0">.</span></p>

  <p class=""><span class="c6">&lt;ip&gt;</span><span class=
  "c0">&#160;</span><span class="c0 c18">(optional)</span></p>

  <p class="c10"><span class="c0">If a new system object is
  created, its</span> <span class=
  "c5 c0">ipHostNumber</span><span class="c8 c0">&#160;will be set
  to this value. This is mainly useful to make WOL more reliable by
  telling the server about the subnet of the new system.</span></p>

  <p class=""><span class="c6">&lt;fqdn&gt;</span> <span class=
  "c0 c18">(optional)</span></p>

  <p class="c10"><span class="c0">If</span> <span class=
  "c6">&lt;ip&gt;</span><span class="c0">&#160;is missing
  but</span> <span class="c6">&lt;fqdn&gt;</span><span class=
  "c0">&#160;is present, the</span> <span class=
  "c6">&lt;fqdn&gt;</span><span class="c0">&#160;will be resolved
  to an IP via DNS. Note that the</span> <span class=
  "c6">&lt;fqdn&gt;</span><span class="c0">&#160;will</span>
  <span class="c0 c18">not</span><span class="c0">&#160;be used to
  name the generated LDAP entry. Like</span> <span class=
  "c6">&lt;ip&gt;</span><span class="c0">&#160;the purpose
  of</span> <span class="c6">&lt;fqdn&gt;</span><span class=
  "c8 c0">&#160;is to make WOL more reliable.</span></p>

  <p class=""><span class="c6">&lt;dhcp&gt;</span><span class=
  "c8 c0">&#160;ignored.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">gosa-si-server notes:</span></p>

  <p class="c10"><span class="c0">gosa-si-server ignores</span>
  <span class="c6">&lt;dhcp&gt;</span><span class=
  "c0">&#160;and</span> <span class=
  "c6">&lt;target&gt;</span><span class="c8 c0">.</span></p>

  <p class=""><span class="c8 c6">go-susi notes:</span></p>

  <p class="c10"><span class="c8 c0">go-susi&#8217;s handling of
  this message is different from gosa-si-server&#8217;s in the
  following respects:</span></p><a id="id.fhvqu6w21q56" name=
  "id.fhvqu6w21q56"></a>

  <ul class="c21 lst-kix_5ix422mr1rnq-1 start">
    <li class="c1 c11"><span class="c8 c0">go-susi creates the
    system&#8217;s LDAP object immediately with a generated name,
    whereas gosa-si-server does not create a system object until
    the system contacts the server.</span></li>

    <li class="c1 c11"><span class="c0">go-susi sends a single WOL
    when the install job triggers at the given</span> <span class=
    "c6">&lt;timestamp&gt;</span><span class="c8 c0">, whereas
    gosa-si-server keeps sending WOLs until the system contacts the
    server.</span></li>

    <li class="c1 c11"><span class=
    "c6">&lt;ogroup&gt;</span><span class="c8 c0">&#160;can be the
    name of a system to use as template, whereas gosa-si-server
    requires it to be an object group.</span></li>

    <li class="c1 c11"><span class="c0">If</span> <span class=
    "c6">&lt;base&gt;</span><span class="c0">&#160;is missing
    and</span> <span class="c6">&lt;ogroup&gt;</span> <span class=
    "c0">is an object group, gosa-si-server will derive</span>
    <span class="c6">&lt;base&gt;</span><span class=
    "c0">&#160;from</span> <span class=
    "c6">&lt;ogroup&gt;</span><span class="c0">&#8217;s DN whereas
    go-susi derives</span> <span class=
    "c6">&lt;base&gt;</span><span class="c8 c0">&#160;from the
    group's first member.</span></li>

    <li class="c1 c11"><span class="c0">go-susi creates a
    normal</span> <span class=
    "c5 c0">trigger_action_reinstall</span><span class=
    "c8 c0">&#160;job when it receives this message.</span></li>
  </ul>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">Example reply:</span></p>

  <p class="c10"><span class="c0">see</span> <span class=
  "c5 c0">job_trigger_action_*</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="" id="h.b1cynga2n4f7"><span class=
  "c12 c6">gosa_set_activated_for_installation</span></h3>

  <h3 class="" id="h.vc4zvgp0v9ry"><span class=
  "c0">job_set_activated_for_installation</span></h3>

  <p class="c14"><span class="c8 c6">Purpose:</span></p>

  <p class="c14 c10"><span class="c0">GOsa&#10132;Server.</span>
  <span class="c0">When go-susi executes this job, it treats this
  as a synonym for</span> <span class=
  "c5 c0">gosa_trigger_action_activate</span><span class=
  "c8 c0">&#160;except that there's no reply. However, when go-susi
  forwards this job to another server, it is forwarded with its
  original header. Because gosa-si-server treats the 2 messages
  differently, it is important that the correct message is used if
  there are gosa-si-server peers.</span></p>

  <p class="c14"><span class="c8 c6">go-susi note:</span></p>

  <p class="c14 c10"><span class="c0">go-susi accepts the
  alias</span> <span class=
  "c5 c0">job_set_activated_for_installation</span><span class=
  "c0">&#160;and supports all of the other elements possible for
  jobs such as</span> <span class=
  "c6">&lt;periodic&gt;</span><span class="c0">. gosa-si-server
  supports only the</span> <span class=
  "c5 c0">gosa_*</span><span class="c8 c0">&#160;form with no job
  planning elements.</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">Example message:</span></p>

  <p class="c14"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c14 c10"><span class=
  "c4">&lt;header&gt;</span><span class=
  "c5 c0">gosa_set_activated_for_installation</span><span class=
  "c4">&lt;/header&gt;<br />
  &lt;source&gt;</span><span class="c5 c0">GOSA</span><span class=
  "c4">&lt;/source&gt;<br />
  &lt;target&gt;</span><span class=
  "c5 c0">00:16:36:7c:db:3f</span><span class=
  "c4">&lt;/target&gt;<br />
  &lt;macaddress&gt;</span><span class=
  "c5 c0">00:16:36:7c:db:3f</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c14"><span class="c4">&lt;/xml&gt;</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="" id="h.y5al68gnxmpw"><span class=
  "c0">job_send_user_msg</span></h3>

  <p class="c14"><span class="c8 c6">Purpose:</span></p>

  <p class="c14 c10"><span class="c0">GOsa&#11020;Server.</span>
  <span class="c8 c0">Send a text message to one or more users
  and/or groups of users.</span></p>

  <p class="c14"><span class="c8 c6">go-susi note:</span></p>

  <p class="c14 c10"><span class="c0">go-susi does not implement
  messaging services directly. When the job's execution time as
  determined by</span> <span class=
  "c6">&lt;timestamp&gt;</span><span class="c0">&#160;has come, the
  external program configured as</span> <span class=
  "c5 c0">[general]/user-msg-hook</span><span class=
  "c8 c0">&#160;will be executed. See the manual section on that
  hook for details.</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">Example message:</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;header&gt;</span><span class=
  "c5 c0">job_send_user_msg</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;source&gt;</span><span class=
  "c5 c0">GOSA</span><span class="c2 c6">&lt;/source&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;target&gt;</span><span class=
  "c5 c0">GOSA</span><span class="c2 c6">&lt;/target&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;from&gt;</span><span class="c5 c0">Sender
  Name</span><span class="c2 c6">&lt;/from&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;user&gt;</span><span class="c5 c0">user1</span><span class="c2 c6">&lt;/user&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;user&gt;</span><span class="c5 c0">user2</span><span class="c2 c6">&lt;/user&gt;</span></p>

  <p class="c14 c1"><span class="c2 c6">...</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;group&gt;</span><span class=
  "c5 c0">group1</span><span class=
  "c2 c6">&lt;/group&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;group&gt;</span><span class=
  "c5 c0">group2</span><span class=
  "c2 c6">&lt;/group&gt;</span></p>

  <p class="c14 c1"><span class="c2 c6">...</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;subject&gt;</span><span class=
  "c5 c0">QmV0cmVmZg==</span><span class="c2 c6">&lt;/subject&gt;
  &#160;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;message&gt;</span><span class=
  "c5 c0">TmFjaHJpY2h0Ck5hY2hyaWNodCBaZWlsZTI=</span><span class=
  "c2 c6">&lt;/message&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;timestamp&gt;</span><span class=
  "c5 c0">20130409122130</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;delivery_time&gt;</span><span class=
  "c5 c0">20130409122130</span><span class=
  "c2 c6">&lt;/delivery_time&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;periodic&gt;</span><span class=
  "c5 c0">none</span><span class=
  "c2 c6">&lt;/periodic&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">GOSA</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c14"><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class="c14 c10"><span class=
  "c6">&lt;header&gt;</span><span class="c0">,</span> <span class=
  "c6">&lt;periodic&gt;</span><span class="c0">&#160;and</span>
  <span class="c6">&lt;timestamp&gt;</span><span class=
  "c0">&#160;are the only elements used by go-susi and they have
  the same meaning as for</span> <span class=
  "c5 c0">job_trigger_action_*</span><span class=
  "c8 c0">.</span></p>

  <p class="c14 c10"><span class=
  "c6">&lt;macaddress&gt;</span><span class="c8 c0">&#160;will be
  replaced with the go-susi server's MAC.</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">Example reply:</span></p>

  <p class="c14 c10"><span class="c5 c0">see
  job_trigger_action_*</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="" id="h.wj0yc4cuajj2"><span class=
  "c12 c6">gosa_query_jobdb</span></h3>

  <p class=""><span class="c8 c6">Purpose:</span></p>

  <p class="c10"><span class="c0">GOsa&#11020;Server.</span>
  <span class="c8 c0">Returns all entries from the jobdb that match
  a given filter.</span></p>

  <p class="c7"></p>

  <p class="c19"><span class="c8 c6">Example message:</span></p>

  <p class="c10 c19"><span class="c2 c6">&lt;xml&gt; &#160; &#160;
  &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;
  &#160;</span></p>

  <p class="c10 c19"><span class="c4">&#160; &#160;
  &lt;header&gt;</span><span class=
  "c5 c0">gosa_query_jobdb</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c10 c19"><span class="c4">&#160; &#160;
  &lt;target&gt;</span><span class="c5 c0">GOSA</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c10 c19"><span class="c4">&#160; &#160;
  &lt;source&gt;</span><span class="c5 c0">GOSA</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c10 c19"><span class="c2 c6">&#160; &#160;
  &lt;where&gt;</span></p>

  <p class="c10 c19"><span class="c2 c6">&#160; &#160; &#160;
  &#160; &lt;clause&gt;</span></p>

  <p class="c10 c19"><span class="c4">&#160; &#160; &#160; &#160;
  &#160; &#160; &lt;connector&gt;</span><span class=
  "c5 c0">or</span><span class=
  "c2 c6">&lt;/connector&gt;</span></p>

  <p class="c10 c19"><span class="c2 c6">&#160; &#160; &#160;
  &#160; &#160; &#160; &lt;phrase&gt;</span></p>

  <p class="c10 c19"><span class="c4">&#160; &#160; &#160; &#160;
  &#160; &#160; &#160; &#160; &lt;operator&gt;</span><span class=
  "c5 c0">eq</span><span class="c2 c6">&lt;/operator&gt;</span></p>

  <p class="c10 c19"><span class="c4">&#160; &#160; &#160; &#160;
  &#160; &#160; &#160; &#160; &lt;macaddress&gt;</span><span class=
  "c5 c0">00:1d:60:7e:9b:f6</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c10 c19"><span class="c2 c6">&#160; &#160; &#160;
  &#160; &#160; &#160; &lt;/phrase&gt;</span></p>

  <p class="c10 c19"><span class="c2 c6">&#160; &#160; &#160;
  &#160; &lt;/clause&gt;</span></p>

  <p class="c10 c19"><span class="c2 c6">&#160; &#160;
  &lt;/where&gt;</span></p>

  <p class="c10 c19"><span class="c4">&#160; &#160;
  &lt;orderby&gt;</span><span class="c5 c0">id</span><span class=
  "c2 c6">&lt;/orderby&gt;</span></p>

  <p class="c10 c19"><span class="c2 c6">&#160; &#160;
  &lt;limit&gt;</span></p>

  <p class="c10 c19"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;from&gt;</span><span class="c5 c0">0</span><span class=
  "c2 c6">&lt;/from&gt;</span></p>

  <p class="c10 c19"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;to&gt;</span><span class="c5 c0">9999999</span><span class=
  "c2 c6">&lt;/to&gt;</span></p>

  <p class="c10 c19"><span class="c2 c6">&#160; &#160;
  &lt;/limit&gt;</span></p>

  <p class="c10 c19"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7 c10 c19"></p>

  <p class="c19"><span class="c6">The message elements have the
  following meaning:</span><span class="c8 c0">&#160; &#160;
  &#160;</span></p>

  <p class=""><span class=
  "c6">&lt;source&gt;,&lt;target&gt;</span><span class=
  "c8 c0">&#160;always "GOSA"</span></p>

  <p class=""><span class="c6">&lt;where&gt;</span> <span class=
  "c0 c18">(exactly 1)</span><span class="c8 c0">&#160;The filter
  that selects the jobs to return.</span></p>

  <p class=""><span class="c6">&lt;clause&gt;</span><span class=
  "c0">&#160;</span><span class="c0 c18">(0 or more)</span></p>

  <p class="c10"><span class="c0">A filter condition. All</span>
  <span class="c6">&lt;clause&gt;</span><span class=
  "c0">&#160;filter conditions within</span> <span class=
  "c6">&lt;where&gt;</span><span class="c0">&#160;are ANDed. If
  no</span> <span class="c6">&lt;clause&gt;</span><span class=
  "c8 c0">&#160;element is present, all datasets will be
  selected.</span></p>

  <p class=""><span class="c6">&lt;connector&gt;</span><span class=
  "c0">&#160;</span><span class="c0 c18">(0 or 1)</span></p>

  <p class="c10"><span class="c0">If not provided, the default
  connector is "AND". All</span> <span class=
  "c6">&lt;phrase&gt;</span><span class="c0">&#160;filter
  conditions within a</span> <span class=
  "c6">&lt;clause&gt;</span><span class="c8 c0">&#160;are combined
  by this operator like this:</span></p>

  <p class="c40"><span class="c0">P</span><span class=
  "c0 c34">1</span><span class="c0">&#160;</span><span class=
  "c0 c18">c</span><span class="c0">&#160;P</span><span class=
  "c0 c34">2</span><span class="c0">&#160;</span><span class=
  "c0 c18">c</span><span class="c0">&#160;P</span><span class=
  "c0 c34">3</span><span class="c0">&#160;</span><span class=
  "c0 c18">c</span><span class="c0">&#160;... P</span><span class=
  "c0 c34 c31 c43">n</span></p>

  <p class="c10"><span class="c0">where P</span><span class=
  "c0 c34">i</span><span class="c0">&#160;are the phrase filters
  and</span> <span class="c0 c18">c</span><span class="c0">&#160;is
  the connector. Possible values for</span> <span class=
  "c6">&lt;connector&gt;</span><span class="c0">&#160;are</span>
  <span class="c5 c0">"AND"</span> <span class="c0">and</span>
  <span class="c5 c0">"OR"</span><span class="c8 c0">&#160;(The
  case of the word doesn&#8217;t matter).</span></p>

  <p class=""><span class="c6">&lt;phrase&gt;</span><span class=
  "c0">&#160;</span><span class="c0 c18">(</span><span class=
  "c28 c0 c31 c18">0 or more)</span></p>

  <p class="c10"><span class="c0">A single primitive filter
  condition. In addition to one</span> <span class=
  "c6">&lt;operator&gt;</span><span class="c0">&#160;element (see
  below) a</span> <span class=
  "c6">&lt;phrase&gt;</span><span class="c0">&#160;must contain
  exactly one other element. The element's name specifies the
  column name in the database and the element's text content the
  value to compare against. The comparison is performed according
  to</span> <span class="c6">&lt;operator&gt;</span><span class=
  "c0">.<br />
  In the case of the jobdb, the valid elements inside</span>
  <span class="c6">&lt;phrase&gt;</span><span class=
  "c0">&#160;are</span> <span class=
  "c6">&lt;id&gt;</span><span class="c0">,</span> <span class=
  "c6">&lt;timestamp&gt;</span><span class="c0">,</span>
  <span class="c6">&lt;status&gt;</span><span class="c0">,</span>
  <span class="c6">&lt;result&gt;</span><span class="c0">,</span>
  <span class="c6">&lt;progress&gt;</span><span class="c0">,</span>
  <span class="c6">&lt;headertag&gt;</span><span class=
  "c0">,</span> <span class=
  "c6">&lt;targettag&gt;</span><span class="c0">,</span>
  <span class="c6">&lt;xmlmessage&gt;</span><span class=
  "c0">,</span> <span class=
  "c6">&lt;macaddress&gt;</span><span class="c0">,</span>
  <span class="c6">&lt;plainname&gt;</span><span class=
  "c0">,</span> <span class=
  "c6">&lt;siserver&gt;</span><span class="c0">&#160;and</span>
  <span class="c6">&lt;modified&gt;</span><span class=
  "c8 c0">.</span></p>

  <p class=""><span class="c6">&lt;operator&gt;</span><span class=
  "c0">&#160;</span><span class="c28 c0 c31 c18">(optional, assumed
  to be "eq" if missing)</span></p>

  <p class="c10"><span class="c0">The comparison operator for
  the</span> <span class="c6">&lt;phrase&gt;</span><span class=
  "c0">. Permitted operators</span> <span class="c0">are</span>
  <span class="c5 c0">"eq", "ne", "ge", "gt", "le",
  "lt"</span><span class="c0">&#160;wi</span><span class="c0">th
  their obvious meanings, as well as</span> <span class=
  "c5 c0">"like" and "unlike"</span><span class="c8 c0">. The case
  of the operator name doesn&#8217;t matter.</span></p>

  <p class="c10"><span class="c5 c0">"like"</span> <span class=
  "c0">performs a case-insensitive match against a pattern that may
  include</span> <span class="c0">"%"</span><span class=
  "c0">&#160;to match any sequence of 0 or more characters and
  "</span><span class="c0 c18">_</span><span class="c0">" to match
  exactly one character. A literal</span><span class="c0">&#160;"%"
  or "_"</span> <span class="c0">cannot be embedded in such a
  pattern.</span><span class="c0">&#160;</span><span class=
  "c5 c0">"unlike"</span><span class="c0">&#160;is the negation
  of</span> <span class="c5 c0">"like"</span><span class=
  "c0">.<br />
  The operators</span> <span class="c5 c0">"ge", "gt", "le"</span>
  <span class="c0">and</span> <span class=
  "c5 c0">"lt"</span><span class="c0">&#160;will attempt to convert
  their arguments to numbers and do a numeric comparison. If that
  fails, a string comparison is performed. The other operators
  always perform string comparison. go-susi performs all string
  comparisons case-insensitive, but gosa-si is case-sensitive
  (which is a gotcha especially with respect to MAC
  addresses).<br />
  The comparison is performed with the database value as the first
  operand. I.e. the</span> <span class="c5 c0">"gt"</span>
  <span class="c0">operator will return datasets whose value for
  the respective column is greater than the comparison value
  from</span> <span class="c6">&lt;phrase&gt;</span><span class=
  "c8 c0">.</span></p>

  <p class=""><span class="c6">&lt;orderby&gt;</span><span class=
  "c0">&#160;</span><span class=
  "c28 c0 c31 c18">(optional)</span></p>

  <p class="c10"><span class="c8 c0">The name of the column of the
  database to use for sorting the results, optionally followed by
  "ASC" or "DESC" for ascending or descending sort.</span></p>

  <p class=""><span class="c6">&lt;limit&gt;</span><span class=
  "c0">&#160;</span><span class=
  "c0 c18">(optional)</span><span class="c8 c0">&#160;Requests that
  only parts of the result set are returned.</span></p>

  <p class=""><span class="c6">&lt;from&gt;</span></p>

  <p class="c10"><span class="c0">After sorting query results
  by</span> <span class="c6">&lt;orderby&gt;</span><span class=
  "c0">, skip the first N results (i.e. do not include them in the
  reply) where N is the integer inside</span> <span class=
  "c6">&lt;from&gt;</span><span class="c0">. Note: The name</span>
  <span class="c6">&lt;from&gt;</span><span class="c8 c0">&#160;is
  misleading because it suggests that N is the value of the first
  item to be returned. A negative value is treated like
  0.</span></p>

  <p class=""><span class="c6">&lt;to&gt;</span></p>

  <p class="c10"><span class="c0">Return a maximum of N results
  where N is the integer inside</span> <span class=
  "c6">&lt;to&gt;</span><span class="c0">. A negative value means
  no limit. Note: The name</span> <span class=
  "c6">&lt;to&gt;</span><span class="c8 c0">&#160;is misleading
  since it suggests that N is the value of the last item to be
  returned.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">gosa-si-server notes:</span></p>

  <p class="c10"><span class="c0">gosa-si-server probably permits
  any</span> <span class="c6">&lt;connector&gt;</span><span class=
  "c0">&#160;that results in a valid SQL statement, not just</span>
  <span class="c5 c0">"AND"</span><span class="c0">&#160;and</span>
  <span class="c5 c0">"OR"</span><span class="c8 c0">. But I have
  not seen this used in the wild, so go-susi doesn't implement any
  other connectors.</span></p>

  <p class="c10"><span class="c0">The implementation of</span>
  <span class="c5 c0">query_jobdb</span><span class="c0">&#160;is
  found in the file</span> <span class=
  "c5 c0">databases.pm</span><span class="c0">. The parsing of the
  XML filter into an SQL statement is done in</span> <span class=
  "c2 c0">/usr/share/perl5/GOSA/GosaSupportDaemon.pm:get_where/orderby/limit_statement().</span></p>

  <p class="c10"><span class="c0">The names</span> <span class=
  "c6">&lt;from&gt;</span><span class="c0">&#160;and</span>
  <span class="c6">&lt;to&gt;</span><span class="c0">&#160;suggest
  that these tags are intended to specify a range of values to
  return but the actual implementation translates</span>
  <span class="c6">&lt;from&gt;</span><span class="c0">&#160;to
  SQL&#8217;s OFFSET and</span> <span class=
  "c6">&lt;to&gt;</span><span class="c8 c0">&#160;to SQL&#8217;s
  LIMIT.</span></p>

  <p class="c10"><span class="c0">The</span> <span class=
  "c6">&lt;operator&gt;</span><span class="c8 c0">&#160;is
  case-insensitive in go-susi (i.e. "eQ" means the same as "eq")
  but gosa-si-server requires operators to be lowercase.</span></p>

  <p class="c10"><span class="c0">gosa-si-server does not support
  the</span> <span class="c6">&lt;operator&gt;</span><span class=
  "c0">&#160;</span><span class="c2 c0">"unlike"</span></p>

  <p class="c10"><span class="c8 c0">go-susi performs all string
  comparisons case-insensitive, but gosa-si is case-sensitive
  (which is a gotcha especially with respect to MAC
  addresses).</span></p>

  <p class=""><span class="c8 c6">GOsa notes:</span></p>

  <p class="c10"><span class="c0">GOsa sends these requests
  in</span> <span class=
  "c5 c0">include/class_gosaSupportDaemon.inc:get_queued_entries()</span><span class="c0">&#160;which
  is called by</span> <span class=
  "c5 c0">plugins/addons/goto/class_filterGotoEvents.inc:query().</span></p>
  <hr style="page-break-before:always;display:none;" />

  <p class="c37 c7"></p>

  <p class="c37"><span class="c8 c6">Example reply (empty
  jobdb):</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;header&gt;</span><span class=
  "c5 c0">query_jobdb</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;source&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;target&gt;</span><span class="c5 c0">GOSA</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;session_id&gt;</span><span class=
  "c5 c0">2427</span><span class=
  "c2 c6">&lt;/session_id&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class=""><span class="c8 c6">Example reply (2
  jobs):</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;header&gt;</span><span class=
  "c5 c0">query_jobdb</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;source&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;target&gt;</span><span class="c5 c0">GOSA</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c10"><span class="c2 c6">&#160; &#160;
  &lt;answer1&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;plainname&gt;</span><span class=
  "c5 c0">grisham</span><span class=
  "c2 c6">&lt;/plainname&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;progress&gt;</span><span class=
  "c5 c0">none</span><span class="c2 c6">&lt;/progress&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;status&gt;</span><span class=
  "c5 c0">waiting</span><span class=
  "c2 c6">&lt;/status&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;siserver&gt;</span><span class=
  "c5 c0">localhost</span><span class=
  "c2 c6">&lt;/siserver&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;modified&gt;</span><span class="c5 c0">0</span><span class=
  "c2 c6">&lt;/modified&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;targettag&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/targettag&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;macaddress&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;timestamp&gt;</span><span class=
  "c5 c0">20120824131849</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;id&gt;</span><span class="c5 c0">1</span><span class=
  "c2 c6">&lt;/id&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;original_id&gt;</span><span class=
  "c5 c0">1</span><span class="c2 c6">&lt;/original_id&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;headertag&gt;</span><span class=
  "c5 c0">trigger_action_reinstall</span><span class=
  "c2 c6">&lt;/headertag&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;result&gt;</span><span class="c5 c0">none</span><span class=
  "c2 c6">&lt;/result&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;xmlmessage&gt;</span><span class=
  "c2 c0">PHhtbD48aGVhZGVyPmpvYl90cmlnZ2VyX2Fjd</span></p>

  <p class="c10"><span class="c2 c0">&#160; &#160; &#160; &#160;
  Glvbl9yZWluc3RhbGw8L2hlYWRlcPkdPU0E8L3NvdXJjZT48d</span></p>

  <p class="c10"><span class="c2 c0">&#160; &#160; &#160; &#160;
  GFyZ2V0PjAwOjBjOjI5OjUwOmEzOjUyPC90YXJnZXQ+PHRpbW</span></p>

  <p class="c10"><span class="c2 c0">&#160; &#160; &#160; &#160;
  VzdGFtcD4yMDEyMDgyNDEzMTg0OTwvdGltZXN0YW1wPjxtYWN</span></p>

  <p class="c10"><span class="c2 c0">&#160; &#160; &#160; &#160;
  hZGRyZXNzPjAwOjBjOjI5OjUwOmEzOjUyPC9tYWNhZGRyZXNz</span></p>

  <p class="c10"><span class="c5 c0">&#160; &#160; &#160; &#160;
  PjwveG1sPg==</span></p>

  <p class="c10"><span class="c2 c6">&#160; &#160; &#160; &#160;
  &lt;/xmlmessage&gt;</span></p>

  <p class="c10"><span class="c2 c6">&#160; &#160;
  &lt;/answer1&gt;</span></p>

  <p class="c10"><span class="c2 c6">&#160; &#160;
  &lt;answer2&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;plainname&gt;</span><span class=
  "c5 c0">grisham</span><span class=
  "c2 c6">&lt;/plainname&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;progress&gt;</span><span class=
  "c5 c0">none</span><span class="c2 c6">&lt;/progress&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;status&gt;</span><span class=
  "c5 c0">waiting</span><span class=
  "c2 c6">&lt;/status&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;siserver&gt;</span><span class=
  "c5 c0">localhost</span><span class=
  "c2 c6">&lt;/siserver&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;modified&gt;</span><span class="c5 c0">0</span><span class=
  "c2 c6">&lt;/modified&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;targettag&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/targettag&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;macaddress&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;timestamp&gt;</span><span class=
  "c5 c0">20120824143205</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;periodic&gt;</span><span class=
  "c5 c0">7_days</span><span class=
  "c2 c6">&lt;/periodic&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;id&gt;</span><span class="c5 c0">2</span><span class=
  "c2 c6">&lt;/id&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;headertag&gt;</span><span class=
  "c5 c0">trigger_action_reboot</span><span class=
  "c2 c6">&lt;/headertag&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;result&gt;</span><span class="c5 c0">none</span><span class=
  "c2 c6">&lt;/result&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160; &#160; &#160;
  &lt;xmlmessage&gt;</span><span class=
  "c2 c0">PHhtbD48aGVhZGVyPmpvYl90cmlnZ2VyX2Fjd</span></p>

  <p class="c10"><span class="c2 c0">&#160; &#160; &#160; &#160;
  Glvbl9yZWJvb3Q8L2hlYWRlcj48cU0E8L3NvdXJjZT48dGFyZ</span></p>

  <p class="c10"><span class="c2 c0">&#160; &#160; &#160; &#160;
  2V0PjAwOjBjOjI5OjUwOmEzOjUyPC90YXJnZXQ+PHRpbWVzdG</span></p>

  <p class="c10"><span class="c2 c0">&#160; &#160; &#160; &#160;
  FtcD4yMDEyMDgyNDE0MzIwNTwvdGltZXN0YW1wPjxwZXJpb2R</span></p>

  <p class="c10"><span class="c2 c0">&#160; &#160; &#160; &#160;
  pYz43X2RheXM8L3BlcmlvZGljPjxtYWNhZGRyZXNzPjAwOjBj</span></p>

  <p class="c10"><span class="c2 c0">&#160; &#160; &#160; &#160;
  OjI5OjUwOmEzOjUyPC9tYWNhZGRyZXNzPjwveG1sPg==</span></p>

  <p class="c10"><span class="c2 c6">&#160; &#160; &#160; &#160;
  &lt;/xmlmessage&gt;</span></p>

  <p class="c10"><span class="c2 c6">&#160; &#160;
  &lt;/answer2&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;session_id&gt;</span><span class=
  "c5 c0">5288</span><span class=
  "c2 c6">&lt;/session_id&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7 c10"></p>

  <p class=""><span class="c8 c6">where the base64-encoded
  &lt;xmlmessage&gt; strings are</span></p>

  <p class="c7 c10"></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;header&gt;</span><span class=
  "c5 c0">job_trigger_action_reinstall</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;source&gt;</span><span class="c5 c0">GOSA</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;target&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;timestamp&gt;</span><span class=
  "c5 c0">20120824131849</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;macaddress&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7 c10"></p>

  <p class=""><span class="c8 c6">and</span></p>

  <p class="c7"></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;header&gt;</span><span class=
  "c5 c0">job_trigger_action_reboot</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;source&gt;</span><span class="c5 c0">GOSA</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;target&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;timestamp&gt;</span><span class=
  "c5 c0">20120824143205</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;periodic&gt;</span><span class=
  "c5 c0">7_days</span><span class=
  "c2 c6">&lt;/periodic&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;macaddress&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7 c10"></p>

  <p class="c7 c10"></p>

  <p class=""><span class="c8 c6">The reply elements have the
  following meaning:</span></p>

  <p class="c7"></p>

  <p class=""><span class="c6">&lt;plainname&gt;</span><span class=
  "c8 c0">&#160;The name (without domain) of the machine affected
  by the job.</span></p>

  <p class=""><span class="c6">&lt;progress&gt;</span><span class=
  "c8 c0">&#160;Possible values:</span></p>

  <p class="c10"><span class="c5 c0">"none":</span><span class=
  "c8 c0">&#160; The job has not started yet.</span></p>

  <p class="c10"><span class=
  "c5 c0">"hardware-detection":</span><span class=
  "c0">&#160;A</span> <span class=
  "c5 c0">detect_hardware</span><span class="c8 c0">&#160;message
  has been sent to the client.</span></p>

  <p class="c10"><span class=
  "c5 c0">"goto-activation":</span><span class=
  "c0">&#160;</span><span class=
  "c5 c0">CLMSG_GOTOACTIVATION</span><span class="c8 c0">&#160;has
  been received from client.</span></p>

  <p class="c10"><span class="c0">An integer between 1 and 100
  (inclusive) gives a percentage of how far along the installation
  has progressed.</span></p>

  <p class=""><span class="c6">&lt;status&gt;</span><span class=
  "c0">&#160;</span><span class="c8 c0">Possible values:</span></p>

  <p class="c10"><span class="c5 c0">"waiting":</span><span class=
  "c0">&#160;No action has been performed yet. The server is
  waiting for the time specified by the job's</span> <span class=
  "c6">&lt;timestamp&gt;</span><span class="c8 c0">.</span></p>

  <p class="c10"><span class=
  "c5 c0">"processing":</span><span class="c8 c0">&#160;The server
  has started taking action on the job.</span></p>

  <p class="c10"><span class=
  "c5 c0">"processed":</span><span class="c8 c0">&#160;gosa-si uses
  this to precede "done" in some cases. Not used by
  go-susi.</span></p>

  <p class="c10"><span class="c5 c0">"paused:"</span><span class=
  "c0">&#160;</span><span class="c8 c6">FIXME???</span></p>

  <p class="c10"><span class="c5 c0">"done"</span><span class=
  "c5 c0">:</span><span class="c0">&#160;The job has completed.
  gosa-si allows finished jobs to be observed for a short period of
  time. go-susi however removes them immediately, so that the
  "done" status can not be observed. Note that a</span>
  <span class="c5 c0">foreign_job_updates</span><span class=
  "c8 c0">&#160;message can of course contain a "done"
  status.</span></p>

  <p class="c10"><span class="c5 c0">"error":</span><span class=
  "c0">&#160;Something went wrong.</span> <span class=
  "c6">&lt;result&gt;</span><span class="c8 c0">&#160;contains more
  details.</span></p>

  <p class=""><span class="c6">&lt;siserver&gt;</span></p>

  <p class="c10"><span class="c8 c0">The listen address (IP:port)
  of the server responsible for processing the job. When
  gosa-si-server sends this message, this can also be the word
  &#8220;localhost&#8221;. go-susi never returns
  "localhost".</span></p>

  <p class=""><span class="c6">&lt;modified&gt;</span><span class=
  "c0">&#160;Always "1". Ignore.</span></p>

  <p class=""><span class="c6">&lt;targettag&gt;</span></p>

  <p class="c10"><span class="c0">The</span> <span class=
  "c6">&lt;target&gt;</span><span class="c0">&#160;from the</span>
  <span class="c5 c0">job_trigger_action_*</span><span class=
  "c0">&#160;</span><span class="c0">message that created the job.
  This is typically the same as</span> <span class=
  "c6">&lt;macaddress&gt;</span><span class="c0">.</span></p>

  <p class=""><span class=
  "c6">&lt;macaddress&gt;</span><span class="c8 c0">&#160;The
  affected machine's MAC address.</span></p>

  <p class=""><span class="c6">&lt;timestamp&gt;</span><span class=
  "c8 c0">&#160;</span></p>

  <p class="c10"><span class="c0">When the job should be executed.
  The format is "YYYYMMDDHHMMSS". The time is local time of the
  server responsible for the job (see</span> <span class=
  "c6">&lt;siserver&gt;</span><span class="c8 c0">) and takes
  daylight saving time into account. IOW the job will be executed
  at the earliest time that the responsible server's clock has a
  value greater than the job's timestamp.</span></p>

  <p class=""><span class="c6">&lt;periodic&gt;</span><span class=
  "c0">&#160;(</span><span class=
  "c0 c18">optional</span><span class="c8 c0">)</span></p>

  <p class="c10"><span class="c0">The format is a</span>
  <span class="c0 c18">number</span><span class="c0">&#160;followed
  by &#8220;_&#8221; followed by either</span> <span class=
  "c5 c0">"minutes", "hours", "days", "weeks",
  &#160;"months"</span><span class="c0">&#160;or</span>
  <span class="c5 c0">"years".</span><span class="c0">&#160;Also
  possible is</span> <span class=
  "c6">&lt;periodic&gt;</span><span class=
  "c5 c0">none</span><span class=
  "c6">&lt;/periodic&gt;</span><span class="c0">&#160;which is the
  same as</span> <span class=
  "c6">&lt;periodic&gt;</span><span class="c0">&#160;not being
  present</span><span class="c8 c0">.</span></p>

  <p class="c10"><span class="c0">See</span> <span class=
  "c5 c0">job_trigger_action_*</span><span class="c0">&#160;for
  more information on the exact interpretation of</span>
  <span class="c6">&lt;periodic&gt;</span><span class=
  "c8 c0">.</span></p>

  <p class=""><span class="c6">&lt;id&gt;</span></p>

  <p class="c10"><span class="c0">A string that identifies the job
  (not necessarily a number; in particular not a 32bit number).
  Jobs are</span> <span class="c0 c18">not</span><span class=
  "c0">&#160;reindexed when a job is deleted, so some ids may be
  &#8220;missing&#8221;. In particular the</span> <span class=
  "c6">&lt;id&gt;</span><span class="c0">&#160;is</span>
  <span class="c0 c18">not</span><span class="c0">&#160;identical
  to the XX in</span> <span class=
  "c6">&lt;answerXX&gt;</span><span class="c8 c0">. Answers are
  always numbered starting from 1 with no missing
  numbers.</span></p>

  <p class=""><span class=
  "c6">&lt;original_id&gt;</span><span class=
  "c0">&#160;</span><span class=
  "c28 c0 c31 c18">(optional)</span></p>

  <p class="c10"><span class="c0">the</span> <span class=
  "c6">&lt;id&gt;</span><span class="c0">&#160;of the job on the
  responsible</span> <span class=
  "c6">&lt;siserver&gt;</span><span class="c0">&#160;(which may be
  different from</span> <span class=
  "c6">&lt;id&gt;</span><span class="c8 c0">).</span></p>

  <p class=""><span class="c6">&lt;headertag&gt;</span></p>

  <p class="c10"><span class="c0">Identifies the type of job.
  Derived from the &lt;header&gt; of the message that created the
  job by removing the prefix. E.g.</span> <span class=
  "c5 c0">gosa_trigger_action_localboot &#8658;
  trigger_action_localboot.</span></p>

  <p class=""><span class="c6">&lt;result&gt;</span><span class=
  "c8 c0">&#160;Further information about the job. Possible
  values:</span></p>

  <p class="c10"><span class="c8 c0">"none": No information
  available.</span></p>

  <p class="c10"><span class="c0">error description: If</span>
  <span class="c6">&lt;status&gt;</span><span class=
  "c5 c0">error</span><span class=
  "c6">&lt;/status&gt;</span><span class="c8 c0">, this is a
  human-readable description with more information.</span></p>

  <p class="c10"><span class="c0">&#8220;TASKBEGIN foo&#8221; where
  &#8220;foo&#8221; is the most recent task sent by the client in a
  &#160;</span><span class=
  "c5 c0">CLMSG_TASKBEGIN</span><span class="c8 c0">&#160;message
  during installation.</span></p>

  <p class=""><span class="c6">&lt;xmlmessage&gt;</span></p>

  <p class="c10"><span class="c0">base64-encoded
  &lt;xml&gt;...&lt;/xml&gt; message that was used to add this job
  to the database, usually a</span> <span class=
  "c5 c0">job_trigger_action_*</span><span class=
  "c0">&#160;message.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <p class="c7"></p>

  <p class=""><span class="c8 c6">gosa-si-server notes:</span></p>

  <p class="c10"><span class="c0">New jobs always get the highest
  existing job</span> <span class=
  "c6">&lt;id&gt;</span><span class="c0">&#160;+ 1. Because
  unfortunately GOsa uses the id column to identify a job when it
  sends</span> <span class=
  "c5 c0">gosa_delete_jobdb_entry</span><span class="c0">&#160;this
  seems to allow for a race condition where user X wants to delete
  the highest-numbered job but before the request reaches the
  gosa-si-server another user Y deletes said job and adds a new
  job. This would cause user X to incorrectly delete user Y&#8217;s
  new job.<br />
  go-susi does not have this problem because it doesn&#8217;t
  repeat</span> <span class="c6">&lt;id&gt;</span><span class=
  "c0">&#160;values.</span></p>

  <p class="c10"><span class="c0">gosa-si-server splits up
  the</span> <span class="c6">&lt;xmlmessage&gt;</span><span class=
  "c8 c0">&#160;with whitespace which breaks base64-decoding unless
  the whitespace is removed first.</span></p>

  <p class="c10"><span class="c0">gosa-si-server does not
  report</span> <span class=
  "c6">&lt;original_id&gt;</span><span class="c8 c0">.</span></p>

  <p class="c10"><span class="c0">gosa-si treats</span>
  <span class="c6">&lt;macaddress&gt;</span><span class=
  "c8 c0">&#160;as case-sensitive.</span></p>

  <p class=""><span class="c8 c6">GOsa notes:</span></p>

  <p class="c10"><span class="c0">AFAICT GOsa doesn't care about
  the reply's</span> <span class=
  "c6">&lt;source&gt;</span><span class="c0">,</span> <span class=
  "c6">&lt;target&gt;</span><span class="c0">&#160;and</span>
  <span class="c6">&lt;session_id&gt;</span><span class=
  "c8 c0">.</span></p>

  <p class="c10"><span class="c0">AFAICT GOsa doesn't care
  about</span> <span class=
  "c6">&lt;targettag&gt;</span><span class="c0">&#160;and there's
  no other use I can find. IOW it's completely useless.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <p class="c7"></p>

  <h3 class="c27" id="h.am3mtnji9zso"><span class=
  "c12 c6">gosa_delete_jobdb_entry</span></h3>

  <p class=""><span class="c8 c6">Purpose:</span></p>

  <p class="c10"><span class="c0">GOsa&#11020;Server. Remove
  planned jobs from the database. Sends</span> <span class=
  "c5 c0">foreign_job_updates</span><span class=
  "c0">&#160;with</span> <span class=
  "c6">&lt;status&gt;</span><span class=
  "c0">done</span><span class="c6">&lt;/status&gt;</span><span class="c0">&#160;and</span>
  <span class="c6">&lt;periodic&gt;</span><span class=
  "c0">none</span><span class=
  "c6">&lt;/periodic&gt;</span><span class="c0">&#160;(or no</span>
  <span class="c6">&lt;periodic&gt;</span><span class="c0">&#160;at
  all)</span><span class="c6">&#160;</span><span class="c8 c0">to
  peer servers to make them remove the jobs from their databases as
  well.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">Example message:</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">gosa_delete_jobdb_entry</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">GOSA</span><span class="c2 c6">&lt;/target&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">GOSA</span><span class="c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c2 c6">&lt;where&gt;</span></p>

  <p class="c1"><span class="c2 c6">&#160; &#160; &#160;
  &lt;clause&gt;</span></p>

  <p class="c1"><span class="c4">&#160; &#160; &#160; &#160; &#160;
  &#160; &lt;connector&gt;</span><span class=
  "c5 c0">or</span><span class=
  "c2 c6">&lt;/connector&gt;</span></p>

  <p class="c1"><span class="c2 c6">&#160; &#160; &#160; &#160;
  &#160; &#160; &lt;phrase&gt;</span></p>

  <p class="c1"><span class="c4">&#160; &#160; &#160; &#160; &#160;
  &#160; &#160; &#160; &#160; &lt;operator&gt;</span><span class=
  "c5 c0">eq</span><span class="c2 c6">&lt;/operator&gt;</span></p>

  <p class="c1"><span class="c4">&#160; &#160; &#160; &#160; &#160;
  &#160; &#160; &#160; &#160; &lt;id&gt;</span><span class=
  "c5 c0">1</span><span class="c2 c6">&lt;/id&gt;</span></p>

  <p class="c1"><span class="c2 c6">&#160; &#160; &#160; &#160;
  &#160; &#160; &lt;/phrase&gt;</span></p>

  <p class="c1"><span class="c2 c6">&#160; &#160; &#160;
  &lt;/clause&gt;</span></p>

  <p class="c1"><span class="c2 c6">&lt;/where&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7 c10"></p>

  <p class=""><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class="c10"><span class="c0">Aside from the</span>
  <span class="c6">&lt;header&gt;</span><span class="c0">&#160;the
  elements are the same as for</span> <span class=
  "c5 c0">gosa_query_jobdb</span><span class="c0">.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <p class="c7"></p>

  <p class=""><span class="c8 c6">Example reply:</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">answer</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">0.0.0.0:20081</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">GOSA</span><span class="c2 c6">&lt;/target&gt;</span></p>

  <p class="c1"><span class="c4">&lt;answer1&gt;</span><span class=
  "c5 c0">0</span><span class="c2 c6">&lt;/answer1&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;session_id&gt;</span><span class=
  "c5 c0">5352</span><span class=
  "c2 c6">&lt;/session_id&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7 c10"></p>

  <p class=""><span class="c8 c6">The reply elements have the
  following meaning:</span></p>

  <p class="c10"><span class=
  "c6">&lt;answer1&gt;</span><span class="c0">&#160;0 if the jobs
  were successfully deleted or a numeric error code if there was a
  problem. In the latter case there will be an</span> <span class=
  "c6">&lt;error_string&gt;</span><span class="c8 c0">&#160;element
  with a human language description of the error.</span></p>

  <p class="c10"><span class="c8 c0">If no job matches the query
  that is not an error.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">gosa-si-server notes:</span></p>

  <p class="c10"><span class="c0">Some versions of gosa-si-server
  return broken replies to this message. The contained answer
  element is unusable, e.g.</span> <span class=
  "c6">&lt;answer1&gt;</span><span class=
  "c5 c0">ARRAY(0xa3dfda8)</span><span class=
  "c6">&lt;/answer1&gt;</span><span class="c8 c0">.</span></p>

  <p class="c7 c10"></p>

  <p class=""><span class="c8 c6">go-susi notes:</span></p>

  <p class="c10"><span class="c8 c0">When the job to be deleted is
  another server&#8217;s responsibility, go-susi will forward the
  deletion request to that server. go-susi will not remove the job
  from its own database unless the responsible server reacts to the
  forwarded request. This means that jobs from servers that are
  down cannot be deleted. However, when go-susi cannot establish a
  connection to a server for some time, it will automatically purge
  that server&#8217;s jobs from its database.</span></p>

  <p class="c37 c7"></p>

  <p class=""><span class="c8 c6">GOsa notes:</span></p>

  <p class="c10"><span class="c0">This message is sent in</span>
  <span class=
  "c5 c0">class_gosaSupportDaemon.inc:remove_entries()</span><span class="c8 c0">.</span></p>

  <p class="c10"><span class="c0">GOsa always uses the id column to
  identify the jobs. See the notes for</span> <span class=
  "c5 c0">gosa_query_jobdb</span><span class=
  "c0">&#160;regarding</span> <span class=
  "c6">&lt;id&gt;</span><span class="c8 c0">.</span></p>

  <p class="c10"><span class="c0">GOsa does not care about the
  actual reply. The only requirement is that the outer-most tag
  must be either</span> <span class=
  "c6">&lt;xml&gt;</span><span class="c0">&#160;or</span>
  <span class="c6">&lt;count&gt;</span><span class="c8 c0">. If it
  isn't GOsa will log an error.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <p class="c7 c10"></p>

  <h3 class="c27" id="h.aa2wm0ojc2ux"><span class=
  "c12 c6">gosa_update_status_jobdb_entry</span></h3>

  <p class=""><span class="c8 c6">Purpose:</span></p>

  <p class="c10"><span class="c0">GOsa&#11020;Server. Change
  properties of a scheduled job. Sends</span> <span class=
  "c5 c0">foreign_job_updates</span><span class="c0">&#160;with the
  new data</span><span class="c6">&#160;</span><span class=
  "c8 c0">to peer servers.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">Example message:</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">gosa_update_status_jobdb_entry</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">GOSA</span><span class="c2 c6">&lt;/target&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">GOSA</span><span class="c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c2 c6">&lt;where&gt;</span></p>

  <p class="c16"><span class="c2 c6">&lt;clause&gt;</span></p>

  <p class="c23"><span class=
  "c4">&lt;connector&gt;</span><span class=
  "c5 c0">or</span><span class=
  "c2 c6">&lt;/connector&gt;</span></p>

  <p class="c23"><span class="c2 c6">&lt;phrase&gt;</span></p>

  <p class="c33"><span class=
  "c4">&lt;operator&gt;</span><span class=
  "c5 c0">eq</span><span class="c2 c6">&lt;/operator&gt;</span></p>

  <p class="c33"><span class="c4">&lt;id&gt;</span><span class=
  "c5 c0">1</span><span class="c2 c6">&lt;/id&gt;</span></p>

  <p class="c23"><span class="c2 c6">&lt;/phrase&gt;</span></p>

  <p class="c16"><span class="c2 c6">&lt;/clause&gt;</span></p>

  <p class="c1"><span class="c2 c6">&lt;/where&gt;</span></p>

  <p class="c1"><span class="c2 c6">&lt;update&gt;</span></p>

  <p class="c16"><span class=
  "c4">&lt;timestamp&gt;</span><span class=
  "c5 c0">20121019132424</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c1"><span class="c2 c6">&lt;/update&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7 c10"></p>

  <p class=""><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class="c10"><span class="c0">Aside from</span> <span class=
  "c6">&lt;header&gt;</span><span class="c0">&#160;and</span>
  <span class="c6">&lt;update&gt;</span><span class="c0">&#160;the
  elements are the same as for</span> <span class=
  "c5 c0">gosa_query_jobdb</span><span class="c8 c0">.</span></p>

  <p class="c7 c10"></p>

  <p class="c10"><span class="c8 c6">&lt;update&gt;</span></p>

  <p class="c1"><span class="c0">Each subelement of</span>
  <span class="c6">&lt;update&gt;</span><span class="c0">&#160;sets
  a new value for the respective aspect of the job(s). All other
  aspects of the job remain unchanged. To unset</span> <span class=
  "c6">&lt;periodic&gt;</span><span class="c0">, include</span>
  <span class="c6">&lt;periodic&gt;</span><span class=
  "c5 c0">none</span><span class=
  "c6">&lt;/periodic&gt;</span><span class="c0">. It is permissible
  to change</span> <span class="c6">&lt;status&gt;</span>
  <span class="c8 c0">with this command although this only make
  sense in a few cases.</span></p>

  <p class="c1"><span class="c0">Note that it is possible to change
  multiple jobs at the same time with an appropriate</span>
  <span class="c6">&lt;where&gt;</span><span class="c0">, but there
  is only one</span> <span class=
  "c6">&lt;update&gt;</span><span class="c0">&#160;element that is
  applied to all selected jobs.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <p class="c7"></p>

  <p class=""><span class="c8 c6">Example reply:</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">answer</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">GOSA</span><span class="c2 c6">&lt;/target&gt;</span></p>

  <p class="c1"><span class="c4">&lt;answer1&gt;</span><span class=
  "c5 c0">0</span><span class="c2 c6">&lt;/answer1&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;session_id&gt;</span><span class=
  "c5 c0">5352</span><span class=
  "c2 c6">&lt;/session_id&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7 c10"></p>

  <p class=""><span class="c8 c6">The reply elements have the
  following meaning:</span></p>

  <p class="c10"><span class=
  "c6">&lt;answer1&gt;</span><span class="c0">&#160;0 if the jobs
  were successfully deleted or a numeric error code if there was a
  problem. In the latter case there will be an</span> <span class=
  "c6">&lt;error_string&gt;</span><span class="c8 c0">&#160;element
  with a human language description of the error.</span></p>

  <p class="c10"><span class="c8 c0">If no job matches the query
  that is not an error.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">gosa-si-server notes:</span></p>

  <p class="c10"><span class="c8 c0">gosa-si-server disallows
  changing the timestamp on jobs that have status
  &#8220;processing&#8221;.</span></p>

  <p class=""><span class="c8 c6">go-susi notes:</span></p>

  <p class="c10"><span class="c0">When go-susi receives an update
  request for a job that is another server&#8217;s responsibility,
  it will forward the request to that server. go-susi will not
  change its own job information immediately but will wait for the
  responsible server to react. This means that if the responsible
  server is down,</span> <span class=
  "c5 c0">gosa_update_status_jobdb_entry</span><span class=
  "c8 c0">&#160;will have no observable effect on go-susi&#8217;s
  database.</span></p>

  <p class=""><span class="c8 c6">GOsa notes:</span></p>

  <p class="c10"><span class="c0">GOsa has a bug in its edit job
  page (if you select a job&#8217;s &#8220;Edit&#8221; icon on the
  &#8221;Deployment status&#8221; page). If a job has</span>
  <span class="c6">&lt;periodic&gt;</span><span class=
  "c0">&#160;set and you uncheck the respective checkbox when
  editing the job, the</span> <span class=
  "c6">&lt;periodic&gt;</span><span class="c0">&#160;will not
  actually be cleared, because GOsa omits the</span> <span class=
  "c6">&lt;periodic&gt;</span><span class="c0">&#160;from
  the</span> <span class="c6">&lt;update&gt;</span><span class=
  "c8 c0">&#160;element instead of setting it to
  &#8220;none&#8221;.</span></p>

  <p class="c10"><span class="c0">This message is sent in</span>
  <span class=
  "c5 c0">class_gosaSupportDaemon.inc:update_entries()</span><span class="c8 c0">.</span></p>

  <p class="c10"><span class="c0">GOsa always uses the id column to
  identify the jobs. See the notes for</span> <span class=
  "c5 c0">gosa_query_jobdb</span><span class=
  "c0">&#160;regarding</span> <span class=
  "c6">&lt;id&gt;</span><span class="c8 c0">.</span></p>

  <p class="c10"><span class="c0">GOsa does not care about the
  actual reply. The only requirement is that the outer-most tag
  must be</span> <span class="c6">&lt;xml&gt;</span><span class=
  "c0">. If there is an</span> <span class=
  "c6">&lt;error_string&gt;</span><span class="c0">&#160;element,
  GOsa will log an error.</span></p>
  <hr style="page-break-before:always;display:none;" />
  <a id="id.8rs4yx8or7cf" name="id.8rs4yx8or7cf"></a>

  <h2 class="c32" id="h.n1abt4rakrkh"><span class="c15 c6">Server -
  Server</span></h2>

  <p class=""><span class="c8 c0">There are various reasons for
  running multiple servers with GOsa and an accompanying si-server.
  To make administration easier, si-servers exchange information
  that allows different instances of GOsa to be used
  interchangeably. For example you can plan a job in one GOsa and
  cancel the job in another.</span></p>

  <p class=""><span class="c0">When an si-server starts up it looks
  into its configuration file and DNS for peer si-servers. It will
  then send a</span> <span class=
  "c5 c0">new_server</span><span class="c0">&#160;message to each
  peer. Peers that are reachable will send</span> <span class=
  "c5 c0">confirm_new_server</span><span class=
  "c8 c0">&#160;messages in return. After this exchange the servers
  have a common encryption key and know about each other's list of
  registered clients.</span></p>

  <p class=""><span class="c0">Whenever one server changes the
  information about a job in its database, e.g. because of a
  message like</span> <span class=
  "c5 c0">gosa_delete_jobdb_entry</span><span class="c0">&#160;or
  because a client performing an installation has sent a</span>
  <span class="c5 c0">CLMSG_PROGRESS</span><span class="c0">, the
  server informs all of its peers about the change with a</span>
  <span class="c5 c0">foreign_job_updates</span><span class=
  "c8 c0">&#160;message, so that the peers can apply the same
  change to their databases.</span></p>

  <p class=""><span class="c8 c0">Because a gosa-si-client only
  accepts messages from the server it registered at, only that
  server can properly execute jobs that require sending messages to
  that client. In particular this affects jobs that require the
  client to reboot or shut down. To solve this problem the server
  will forward such jobs to the peer where the client is
  registered.</span></p>

  <p class=""><span class="c0">To make forwarding work, each server
  must know at all times which clients are registered at which
  servers. Therefore, whenever a client registers at a server, that
  server will send a</span> <span class=
  "c5 c0">new_foreign_client</span><span class=
  "c8 c0">&#160;message to all of its peers to inform them about
  the new client. There is no corresponding deregistration. A
  client is considered to belong to a specific server until it
  registers at another one.</span></p>

  <p class=""><span class="c0">A job is forwarded to a peer by
  sending that peer the appropriate</span> <span class=
  "c5 c0">gosa_trigger_action_*</span><span class=
  "c8 c0">&#160;message.</span></p>

  <p class=""><span class="c0">A special case are wakeup jobs.
  These are not forwarded in the sense that the responsibility for
  the wakeup is passed on to the peer. Instead, peers may be asked
  to help waking up a client, because a peer may have information
  about the client's network location that the original server
  responsible for the job lacks. To recruit the help from a peer in
  waking up a client the</span> <span class=
  "c5 c0">trigger_wake</span><span class="c8 c0">&#160;message is
  used.</span></p>

  <p class=""><span class="c8 c6">Note:</span></p>

  <p class="c10"><span class="c0">While go-susi and gosa-si-server
  both follow the general principles outlined above for the
  forwarding of jobs, the timing and the message details are
  different for the two.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="" id="h.ggvkhagjviu"><span class=
  "c12 c6">new_server</span></h3>

  <p class="c14"><span class="c8 c6">Purpose:</span></p>

  <p class="c14 c10"><span class="c0">Server&#10132;Server.</span>
  <span class="c8 c0">A server announces its presence to another
  server so that the receiving server will inform the sending
  server about job updates etc.</span></p>

  <p class="c14 c10"><span class="c0">The receiving server must
  react by sending a</span> <span class=
  "c5 c0">confirm_new_server</span><span class="c0">&#160;message
  to the sender (via a new connection). The sender will keep using
  the old encryption key if it does not receive a</span>
  <span class="c5 c0">confirm_new_server</span><span class=
  "c8 c0">&#160;message with the new key or, if there is no old
  key, communication will fail altogether.</span></p>

  <p class="c14 c7 c10"></p>

  <p class="c14"><span class="c6">Example message (encrypted with
  [ServerPackages] key):</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;header&gt;</span><span class=
  "c5 c0">new_server</span><span class=
  "c4">&lt;/header&gt;</span></p>

  <p class="c14 c1"><span class=
  "c2 c6">&lt;new_server&gt;&lt;/new_server&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.184:20081</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c14 c1"><span class="c4">&lt;key&gt;</span><span class=
  "c5 c0">eTlWFLUYpRhCKBpagk5B4Zk3NkDcLco</span><span class=
  "c2 c6">&lt;/key&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;loaded_modules&gt;</span><span class=
  "c5 c0">gosaTriggered</span><span class=
  "c2 c6">&lt;/loaded_modules&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;loaded_modules&gt;</span><span class=
  "c5 c0">siTriggered</span><span class=
  "c2 c6">&lt;/loaded_modules&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;loaded_modules&gt;</span><span class=
  "c5 c0">clMessages</span><span class=
  "c2 c6">&lt;/loaded_modules&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;loaded_modules&gt;</span><span class=
  "c5 c0">server_server_com</span><span class=
  "c2 c6">&lt;/loaded_modules&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;loaded_modules&gt;</span><span class=
  "c5 c0">databases</span><span class=
  "c2 c6">&lt;/loaded_modules&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;loaded_modules&gt;</span><span class=
  "c5 c0">logHandling</span><span class=
  "c2 c6">&lt;/loaded_modules&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;loaded_modules&gt;</span><span class=
  "c5 c0">goSusi</span><span class=
  "c2 c6">&lt;/loaded_modules&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;client&gt;</span><span class=
  "c5 c0">172.16.2.143:20083,00:50:56:37:63:21</span><span class=
  "c2 c6">&lt;/client&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;client&gt;</span><span class=
  "c5 c0">172.16.2.22:20083,00:1b:61:72:79:f5</span><span class=
  "c2 c6">&lt;/client&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">00:50:56:37:63:21</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c14"><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class="c14"><span class=
  "c6">&lt;new_server&gt;</span><span class="c8 c0">&#160;Always
  empty.</span></p>

  <p class="c14"><span class="c6">&lt;key&gt;</span></p>

  <p class="c14 c10"><span class="c0">A randomly generated string
  of letters and digits to be used for server-server communication
  between sender and receiver. Replaces the most recent key
  exchanged between the 2 servers via</span> <span class=
  "c5 c0">new_server</span><span class="c0">/</span><span class=
  "c5 c0">confirm_new_server</span><span class="c0">. The sender
  won't actually use the new key until it receives a</span>
  <span class="c5 c0">confirm_new_server</span><span class=
  "c8 c0">.</span></p>

  <p class="c14"><span class=
  "c6">&lt;loaded_modules&gt;</span><span class=
  "c0">&#160;(</span><span class="c0 c18">0 or more
  times</span><span class="c8 c0">) Modules supported by the
  sending server.</span></p>

  <p class="c14 c10"><span class="c8 c0">A server that advertises
  "goSusi" in this list (as go-susi does) promises the
  following:</span></p>

  <ul class="c21 lst-kix_herycab31j2a-1 start">
    <li class="c14 c1 c11"><span class="c0">All</span> <span class=
    "c5 c0">foreign_job_updates</span><span class="c0">&#160;it
    sends will be synchronous (see</span> <span class=
    "c6">&lt;sync&gt;</span><span class="c8 c0">&#160;description
    there)</span></li>

    <li class="c14 c1 c11"><span class="c0">It will send out
    a</span> <span class=
    "c5 c0">foreign_job_updates</span><span class=
    "c0">&#160;message whenever a job it is responsible for
    changes, even if that change is caused by a</span> <span class=
    "c5 c0">foreign_job_updates</span><span class="c0">. Note the
    restriction of this rule to jobs the "goSusi" server is
    responsible for (i.e. those that have it as</span> <span class=
    "c6">&lt;siserver&gt;</span><span class="c8 c0">). Without this
    restriction there would be infinite series of update
    messages.</span></li>

    <li class="c14 c1 c11"><span class="c0">When it establishes a
    connection with the receiving peer for the first time or
    re-establishes it after an interruption, it will send a</span>
    <span class="c5 c0">foreign_job_updates</span><span class=
    "c0">&#160;with</span> <span class=
    "c6">&lt;sync&gt;</span><span class=
    "c5 c0">all</span><span class=
    "c6">&lt;/sync&gt;</span><span class="c8 c0">.</span></li>

    <li class="c14 c1 c11"><span class="c0">All jobs have a
    unique</span> <span class="c6">&lt;id&gt;</span><span class=
    "c0">&#160;which is contained in</span> <span class=
    "c5 c0">gosa_query_jobdb</span><span class="c0">&#160;replies
    as well as</span> <span class=
    "c5 c0">foreign_job_updates</span><span class=
    "c0">&#160;messages and can be used to address jobs with
    specificity in</span> <span class=
    "c6">&lt;where&gt;</span><span class=
    "c8 c0">&#160;clauses.</span></li>

    <li class="c14 c1 c11"><span class="c0">When a "goSusi" server
    sends out a</span> <span class=
    "c5 c0">foreign_job_updates</span><span class=
    "c0">&#160;message that affects a job whose</span> <span class=
    "c6">&lt;siserver&gt;</span><span class="c0">&#160;is another
    server, it will use that server's original</span> <span class=
    "c6">&lt;id&gt;</span><span class="c0">&#160;for the job. IOW,
    the</span> <span class="c6">&lt;id&gt;</span><span class=
    "c0">&#160;of a job is always from the jobdb of the
    job's</span> <span class=
    "c6">&lt;siserver&gt;</span><span class="c8 c0">.</span></li>

    <li class="c14 c1 c11"><span class="c0">An</span> <span class=
    "c6">&lt;id&gt;</span><span class="c8 c0">&#160;value is never
    re-used for a different job once it has been used.</span></li>

    <li class="c14 c1 c11"><span class="c0">When a</span>
    <span class="c6">&lt;periodic&gt;</span><span class=
    "c0">&#160;job has finished, the next repetition of the job
    gets a new</span> <span class=
    "c6">&lt;id&gt;</span><span class="c8 c0">.</span></li>

    <li class="c14 c1 c11"><span class="c0">When a</span>
    <span class="c6">&lt;periodic&gt;</span><span class=
    "c0">&#160;job has finished and the next repetition gets
    scheduled, both facts are communicated by</span> <span class=
    "c5 c0">foreign_job_updates</span><span class=
    "c8 c0">&#160;(either in two separate messages or one combined
    message).</span></li>

    <li class="c14 c1 c11"><span class="c0">Two jobs with
    different</span> <span class="c6">&lt;id&gt;</span><span class=
    "c0">&#160;are never treated as the same. In particular</span>
    <span class="c5 c0">foreign_job_updates</span><span class=
    "c0">&#160;messages do not use the combination</span>
    <span class=
    "c6">&lt;headertag&gt;+&lt;macaddress&gt;</span><span class=
    "c8 c0">&#160;to identify jobs. This applies only to
    communication with other servers advertising "goSusi". When
    communicating with non-"goSusi" servers this behaviour is not
    required.</span></li>

    <li class="c14 c1 c11"><span class="c8 c0">A corollary of the
    previous point is that a server that advertises "goSusi" is
    capable of managing multiple jobs with identical
    properties.</span></li>
  </ul>

  <p class="c14"><span class="c6">&lt;client&gt;</span></p>

  <p class="c14 c10"><span class="c8 c0">Listening port and MAC
  address of a client registered at this server.</span></p>

  <p class="c14"><span class=
  "c6">&lt;macaddress&gt;</span><span class="c8 c0">&#160;The
  sending server&#8217;s MAC address.</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">gosa-si-server
  notes:</span></p>

  <p class="c14 c10"><span class="c0">gosa-si-server sends this
  message in</span> <span class=
  "c5 c0">gosa-si-server:register_at_foreign_servers().</span></p>

  <p class="c14 c10"><span class="c8 c0">gosa-si-server
  re-registers at all known other servers (not just from DNS but
  also those known from incoming messages) in regular intervals.
  go-susi doesn&#8217;t do that at this time.</span></p>

  <p class="c14"><span class="c8 c6">go-susi notes:</span></p>

  <p class="c14 c10"><span class="c8 c0">When go-susi starts, it
  will send this message to all servers listed in DNS for the
  service tcp/gosa-si.</span></p>

  <p class="c14 c10"><span class="c0">When go-susi receives
  a</span> <span class="c5 c0">new_server</span><span class=
  "c0">&#160;message it will send a</span> <span class=
  "c5 c0">confirm_new_server</span><span class="c0">&#160;message
  to the server listed in &lt;source&gt; (usually the sender
  itself) and following</span> <span class=
  "c5 c0">confirm_new_server</span><span class="c0">&#160;it will
  send its complete jobdb as a</span> <span class=
  "c5 c0">foreign_job_updates</span><span class="c0">&#160;message.
  The latter behaviour is different from gosa-si which only
  sends</span> <span class="c5 c0">confirm_new_server.</span></p>

  <p class="c14 c10"><span class="c0">When go-susi is contacting a
  peer server for the first time after being started, go-susi will
  consider the key it sends in the new_server message valid and
  will use it even before the peer replies with</span> <span class=
  "c5 c0">confirm_new_server</span><span class="c0">. IOW
  the</span> <span class=
  "c5 c0">confirm_new_server</span><span class=
  "c8 c0">&#160;message is not required in the case of
  go-susi.</span></p>

  <h3 class="" id="h.t6s5fv3aa5zt"><span class=
  "c12 c6">confirm_new_server</span></h3>

  <p class="c14"><span class="c8 c6">Purpose:</span></p>

  <p class="c14 c10"><span class="c0">Server&#10132;Server. Same
  format as</span> <span class=
  "c5 c0">new_server</span><span class="c0">, except that
  the</span> <span class="c6">&lt;header&gt;</span><span class=
  "c0">&#160;and the empty tag are</span> <span class=
  "c5 c0">"confirm_new_server"</span><span class="c0">. When server
  A sends server B a</span> <span class=
  "c5 c0">new_server</span><span class="c0">&#160;message
  containing server A's information, server B sends back (via a new
  connection) a</span> <span class=
  "c5 c0">confirm_new_server</span><span class="c0">&#160;message
  containing server B's information. After this exchange both
  servers have each other's data. The</span> <span class=
  "c5 c0">confirm_new_server</span><span class="c0">&#160;message
  usually contains the same</span> <span class=
  "c6">&lt;key&gt;</span><span class="c0">&#160;as the new_server
  message. In any case the most recent</span> <span class=
  "c5 c0">new_server/confirm_new_server message</span><span class=
  "c0">&#160;</span><span class=
  "c0 c18">received</span><span class="c0">&#160;(not</span>
  <span class="c0 c18">sent</span><span class="c0">!) determines
  the key used for those messages that are encrypted with a
  server-key (such as</span> <span class=
  "c5 c0">foreign_job_updates</span><span class="c0">).</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="" id="h.d21gga45wxtz"><span class=
  "c12 c6">foreign_job_updates</span></h3>

  <p class="c14"><span class="c8 c6">Purpose:</span></p>

  <p class="c14 c10"><span class="c8 c0">Server&#10132;Server.
  Inform another server about changes made to one or more jobs.
  This message is also used to cancel other servers&#8217; jobs by
  telling them the status is &#8220;done&#8221; (and periodic is
  "none"). The server that receives this message replaces the data
  of the job(s) with the new data.</span></p>

  <p class="c14"><span class="c8 c6">Example message:</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;header&gt;</span><span class=
  "c5 c0">foreign_job_updates</span><span class=
  "c4">&lt;/header&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c4">&lt;/source&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.60:20081</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;sync&gt;</span><span class="c5 c0">ordered</span><span class="c2 c6">&lt;/sync&gt;</span></p>

  <p class="c14 c1"><span class=
  "c2 c6">&lt;answer1&gt;</span></p><a id="id.i03t6xrtz85y" name=
  "id.i03t6xrtz85y"></a>

  <p class="c3"><span class=
  "c4">&lt;plainname&gt;</span><span class=
  "c5 c0">grisham</span><span class=
  "c2 c6">&lt;/plainname&gt;</span></p>

  <p class="c3"><span class=
  "c4">&lt;progress&gt;</span><span class="c5 c0">none</span><span class="c2 c6">&lt;/progress&gt;</span></p>

  <p class="c3"><span class="c4">&lt;status&gt;</span><span class=
  "c5 c0">done</span><span class="c2 c6">&lt;/status&gt;</span></p>

  <p class="c3"><span class=
  "c4">&lt;periodic&gt;</span><span class="c5 c0">none</span><span class="c2 c6">&lt;/periodic&gt;</span></p>

  <p class="c3"><span class=
  "c4">&lt;siserver&gt;</span><span class="c5 c0">localhost</span><span class="c4">&lt;/siserver&gt;</span><span class="c5 c0"><br />
  </span><span class="c4">&lt;modified&gt;</span><span class=
  "c5 c0">1</span><span class="c2 c6">&lt;/modified&gt;</span></p>

  <p class="c3"><span class=
  "c4">&lt;targettag&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c4">&lt;/targettag&gt;</span><span class=
  "c5 c0"><br /></span><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c4">&lt;/macaddress&gt;</span><span class=
  "c5 c0"><br /></span><span class=
  "c4">&lt;timestamp&gt;</span><span class=
  "c5 c0">20120906164734</span><span class=
  "c4">&lt;/timestamp&gt;<br />
  &lt;id&gt;</span><span class="c5 c0">4</span><span class=
  "c4">&lt;/id&gt;</span><span class=
  "c5 c0"><br /></span><span class=
  "c4">&lt;headertag&gt;</span><span class=
  "c5 c0">trigger_action_wake</span><span class=
  "c4">&lt;/headertag&gt;</span><span class=
  "c5 c0"><br /></span><span class=
  "c4">&lt;result&gt;</span><span class=
  "c5 c0">none</span><span class=
  "c4">&lt;/result&gt;</span><span class=
  "c5 c0"><br /></span><span class=
  "c4">&lt;xmlmessage&gt;</span><span class=
  "c2 c0">PHhtbD48aGVhZGVyPmpvYl90cmlnZ2VyX2Fjd</span></p>

  <p class="c3"><span class=
  "c2 c0">Glvbl93YWtlPC9oZWFkZXI+PHNvdXJjZT5HT1NBPC9zb3VyY2
  U+PHRhcmdldD4wMDowYzoyOTo1MDphMzo1MjwvdGFyZ2V0Pjx
  0aW1lc3RhbXA+MjAxMjA5MDYxNjQ3MzQ8L3RpbWVzdGFtcD48
  bWFjYWRkcmVzcz4wMDowYzoyOTo1MDphMzo1MjwvbWFjYWRkc</span></p>

  <p class="c3"><span class=
  "c5 c0">mVzcz48L3htbD4=</span><span class=
  "c2 c6">&lt;/xmlmessage&gt;</span></p>

  <p class="c14 c1"><span class="c2 c6">&lt;/answer1&gt;</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class="c14"><span class="c6">&lt;sync&gt;</span><span class=
  "c0">&#160;</span><span class="c28 c0 c18 c31">(optional, unless
  the sender has &#8220;goSusi&#8221; in
  &lt;loaded_modules&gt;)</span></p>

  <p class="c14 c10"><span class="c2 c0">"none" or not
  present</span></p>

  <p class="c14 c1"><span class="c0">The order in which</span>
  <span class="c5 c0">foreign_job_updates</span><span class=
  "c8 c0">&#160;messages are received and the order in which jobs
  are listed within a message may not reflect the order in which
  the changes were performed.</span></p>

  <p class="c14 c10"><span class="c2 c0">"ordered"</span></p>

  <p class="c14 c1"><span class="c0">The sender ensures that</span>
  <span class="c5 c0">foreign_job_updates</span><span class=
  "c0">&#160;messages are received and jobs within them are listed
  in the same order in which the changes were performed. This
  synchronization is implemented by sending all</span> <span class=
  "c5 c0">foreign_job_updates</span><span class=
  "c8 c0">&#160;messages properly ordered over a dedicated
  permanent connection.</span></p>

  <p class="c14 c10"><span class="c2 c0">"all"</span></p>

  <p class="c14 c1"><span class="c0">The</span> <span class=
  "c5 c0">foreign_job_updates</span><span class="c0">&#160;message
  contains a complete list of all jobs the sender is responsible
  for (i.e. where</span> <span class=
  "c6">&lt;siserver&gt;</span><span class="c8 c0">&#160;is the
  sender). The receiver is expected to discard all old information
  about the sender&#8217;s jobs it has and replace it with the new
  data.</span></p>

  <p class="c14"><span class="c6">&lt;answerX&gt;</span></p>

  <p class="c14 c10"><span class="c0">Each job in the list has its
  own number X, counting from 1 with no numbers left out. Note that
  X is not identical to the</span> <span class=
  "c6">&lt;id&gt;</span><span class=
  "c8 c0">&#160;number.</span></p>

  <p class="c14"><span class="c6">&lt;id&gt;</span></p>

  <p class="c14 c10"><span class="c0">If the sending server
  does</span> <span class="c0 c18">not</span><span class=
  "c0">&#160;advertise "goSusi" in its</span> <span class=
  "c5 c0">(confirm_)new_server</span><span class=
  "c0">&#160;message, this number is the ID of the job in
  the</span> <span class="c0 c18">sending</span><span class=
  "c8 c0">&#160;server&#8217;s jobdb.</span></p>

  <p class="c14 c10"><span class="c0">If the sending server</span>
  <span class="c0 c18">does</span><span class="c0">&#160;advertise
  "goSusi" in its</span> <span class=
  "c5 c0">(confirm_)new_server</span><span class=
  "c0">&#160;message, this number is the ID of the job in
  the</span> <span class="c0 c18">responsible</span><span class=
  "c0">&#160;server&#8217;s jobdb (i.e. the jobdb of the
  job's</span> <span class="c6">&lt;siserver&gt;</span><span class=
  "c8 c0">).</span></p>

  <p class="c14"><span class="c6">&lt;siserver&gt;</span></p>

  <p class="c14 c10"><span class="c0">The listen address (IP:port)
  of the server responsible for processing the job. When
  gosa-si-server sends this message, this can also be the word
  &#8220;localhost&#8221; (and go-susi treats this as alias for the
  address from</span> <span class=
  "c6">&lt;source&gt;</span><span class="c8 c0">).</span></p>

  <p class="c14"><span class="c6">&lt;periodic&gt;</span></p>

  <p class="c14 c10"><span class="c0">If the</span> <span class=
  "c5 c0">foreign_job_updates</span><span class="c0">&#160;was sent
  as a result of</span> <span class=
  "c5 c0">gosa_delete_jobdb_entry</span><span class="c0">,
  then</span> <span class="c6">&lt;periodic&gt;</span><span class=
  "c8 c0">&#160;is always "none" or not present, even if the job
  started out as periodic.</span></p>

  <p class="c14"><span class=
  "c6">&lt;modified&gt;</span><span class="c8 c0">&#160;always
  1.</span></p>

  <p class="c14"><span class=
  "c8 c6">&lt;macaddress&gt;+&lt;headertag&gt;</span></p>

  <p class="c14 c10"><span class="c0">gosa-si-server uses this pair
  as the key to uniquely identify a job. This means that the job
  database of a gosa-si-server can only contain one job type per
  MAC address. If the jobdb already contains an entry for
  the</span><span class=
  "c6">&#160;&lt;macaddress&gt;+&lt;headertag&gt;</span><span class="c0">&#160;pair
  from the</span> <span class=
  "c5 c0">foreign_job_updates</span><span class=
  "c8 c0">&#160;message, that entry will be updated. Otherwise a
  new entry will be added to the jobdb.</span></p>

  <p class="c14 c10"><span class="c0">gosa-si-server treats</span>
  <span class="c6">&lt;macaddress&gt;</span><span class=
  "c0">&#160;as case-sensitive and will not process</span>
  <span class="c5 c0">foreign_job_updates</span><span class=
  "c8 c0">&#160;correctly if the case in the message does not match
  the case in its database.</span></p>

  <p class="c14 c10"><span class="c0">go-susi uses</span>
  <span class="c6">&lt;id&gt;</span><span class="c0">&#160;to
  uniquely identify a job and permits multiple jobs with the
  same</span> <span class=
  "c6">&lt;macaddress&gt;+&lt;headertag&gt;</span><span class=
  "c0">&#160;to coexist. When go-susi evaluates</span> <span class=
  "c5 c0">foreign_job_updates</span><span class="c8 c0">&#160;from
  a gosa-si-server, however, it will fall back to gosa-si-server's
  behaviour.</span></p>

  <p class="c14"><span class="c6">&lt;xmlmessage&gt;</span></p>

  <p class="c14 c10"><span class="c8 c0">Base64-encoded
  &lt;xml&gt;...&lt;/xml&gt; message that was used to create the
  job originally.</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">gosa-si-server
  notes:</span></p>

  <p class="c14 c10"><span class="c0">This message is handled
  in</span> <span class=
  "c5 c0">events/server_server_com.pm:foreign_job_updates().</span></p>

  <p class="c14 c10"><span class=
  "c6">&lt;xmlmessage&gt;</span><span class="c8 c0">&#160;may
  include whitespace characters in the base64-string that need to
  be removed before the string will decode properly.</span></p>

  <p class="c14 c10"><span class="c0">gosa-si treats</span>
  <span class="c6">&lt;macaddress&gt;</span><span class=
  "c0">&#160;as case-sensitive and will not process</span>
  <span class="c5 c0">foreign_job_updates</span><span class=
  "c8 c0">&#160;correctly if the case in the message does not match
  the case in its database.</span></p>

  <p class="c14"><span class="c8 c6">go-susi notes:</span></p>

  <p class="c14 c10"><span class=
  "c6">&lt;sync&gt;</span><span class="c8 c0">&#160;is a go-susi
  extension.</span></p>

  <p class="c14 c10"><span class="c0">gosa-si-server sends</span>
  <span class="c6">&lt;xmlmessage&gt;</span><span class=
  "c0">&#160;to itself (replacing "job_" with "gosa_" in the
  &lt;header&gt;) when the job's time has come. This means that in
  case of an inconsistency between</span> <span class=
  "c6">&lt;xmlmessage&gt;</span><span class="c0">&#160;and the
  job's data,</span> <span class=
  "c6">&lt;xmlmessage&gt;</span><span class="c0">&#160;wins.
  go-susi does not use</span> <span class=
  "c6">&lt;xmlmessage&gt;</span><span class="c0">, so in case of an
  inconsistency go-susi will go by the job's data.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="" id="h.4o43ycaft42x"><span class=
  "c6 c12">new_foreign_client</span></h3>

  <p class="c14"><span class="c8 c6">Purpose:</span></p>

  <p class="c14 c10"><span class="c0">Server&#10132;Server. When a
  client registers at a server using</span> <span class=
  "c5 c0">here_i_am</span><span class="c0">, that server notifies
  its peers of the new client by sending a</span> <span class=
  "c5 c0">new_foreign_client</span><span class=
  "c8 c0">&#160;message.</span></p>

  <p class="c14 c7 c10"></p>

  <p class="c14"><span class="c8 c6">Example message:</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;header&gt;</span><span class=
  "c5 c0">new_foreign_client</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.19:20081</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.60:20081</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;client&gt;</span><span class=
  "c5 c0">172.16.2.143:20083</span><span class=
  "c2 c6">&lt;/client&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">00:45:6e:00:03:01</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c14 c1"><span class="c4">&lt;key&gt;</span><span class=
  "c5 c0">current_client_key</span><span class=
  "c2 c6">&lt;/key&gt;</span></p>

  <p class="c14 c1"><span class="c4">&lt;key&gt;</span><span class=
  "c5 c0">previous_client_key</span><span class=
  "c2 c6">&lt;/key&gt;</span></p>

  <p class="c14 c1"><span class=
  "c2 c6">&lt;new_foreign_client&gt;&lt;/new_foreign_client&gt;</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class="c14 c10"><span class="c0">The</span> <span class=
  "c6">&lt;macaddress&gt;</span><span class="c0">&#160;and</span>
  <span class="c6">&lt;client&gt;</span><span class=
  "c0">&#160;elements identify the client. The</span> <span class=
  "c6">&lt;key&gt;</span><span class="c0">&#160;elements, if
  present, specify the most recent and the previous encryption key
  sent by the client via</span> <span class=
  "c5 c0">here_i_am</span><span class="c0">&#160;or</span>
  <span class="c5 c0">new_key</span><span class="c0">. The</span>
  <span class="c6">&lt;key&gt;</span><span class=
  "c8 c0">&#160;elements are go-susi specific and not sent by
  gosa-si-server.</span></p>

  <p class="c14 c10"><span class="c0">Note that even with the
  client's key a foreign server can not contact that client
  successfully, because gosa-si-client discards messages whose
  origin is not the si-server it is registered at.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="" id="h.z3ec199pha6w"><span class=
  "c12 c6">trigger_wake</span></h3>

  <p class="c14"><span class="c8 c6">Purpose:</span></p>

  <p class="c14 c10"><span class="c8 c0">Server&#10132;Server. Ask
  a peer server for help in waking up a machine.</span></p>

  <p class="c14 c7 c10"></p>

  <p class="c14"><span class="c8 c6">Example message:</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;header&gt;</span><span class=
  "c5 c0">trigger_wake</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.60:20081</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">00:45:6e:00:03:01</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c14 c1"><span class=
  "c2 c6">&lt;trigger_wake&gt;&lt;/trigger_wake&gt;</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class="c14 c10"><span class="c0">The</span> <span class=
  "c6">&lt;macaddress&gt;</span><span class="c0">&#160;identifies
  the machine to be woken up. The other elements have their usual
  meanings. The empty</span> <span class=
  "c6">&lt;trigger_wake&gt;</span><span class="c0">&#160;element is
  always empty.</span></p>
  <hr style="page-break-before:always;display:none;" />
  <a id="id.lcwii6oc1qwv" name="id.lcwii6oc1qwv"></a>

  <h2 class="" id="h.w73b9qoqu5cg"><span class="c15 c6">Client -
  Server</span></h2>

  <p class=""><span class="c0">When an si-client starts up, it
  checks its configuration as well as DNS and assembles a list of
  available si-servers. It will then send a</span> <span class=
  "c5 c0">here_i_am</span><span class="c0">&#160;message to the
  first server on the list. If it receives a</span> <span class=
  "c5 c0">registered</span><span class="c8 c0">&#160;message from
  the server within a certain amount of time (typically 10s), the
  client and that server are paired and have a shared encryption
  key that they will use for all future communications.</span></p>

  <p class=""><span class="c0">If no</span> <span class=
  "c5 c0">registered</span><span class="c0">&#160;message is
  received from the server within the time window, the client will
  send a</span> <span class="c5 c0">here_i_am</span><span class=
  "c8 c0">&#160;to the next server on the list and will keep on
  going through the server list until a server manages to answer
  within the time window. This behaviour can lead to the absurd
  situation that all servers on the list are available and do
  answer but registration fails anyway because delays cause all of
  the answers to miss the time window.</span></p>

  <p class=""><span class="c0">From time to time the client will
  send a</span> <span class="c5 c0">new_key</span><span class=
  "c0">&#160;message to the server to establish a new encryption
  key to be used for future messages between the two parties. While
  this does not make the stupid homegrown encryption protocol used
  by gosa-si secure, it does cause race conditions because the
  client simply starts using the new key right away, even though
  the server may not have processed the</span> <span class=
  "c5 c0">new_key</span><span class="c8 c0">, yet.</span></p>

  <p class=""><span class="c0">What happens after the server has
  sent the</span> <span class="c5 c0">registered</span><span class=
  "c0">&#160;message to the client depends on whether an LDAP
  object exists for the client's system or not. If there is an LDAP
  object, the server will read its data and data from</span>
  <span class="c5 c0">gosaGroupOfNames</span><span class=
  "c0">&#160;it is a member of and will send corresponding</span>
  <span class="c5 c0">new_ldap_config,
  new_ntp_config</span><span class="c0">&#160;and</span>
  <span class="c5 c0">new_syslog_config</span><span class=
  "c8 c0">&#160;messages to the client.</span></p>

  <p class=""><span class="c0">If there is no LDAP object for the
  client, the server sends a</span> <span class=
  "c5 c0">detect_hardware</span><span class="c0">&#160;message and
  creates an installation job with</span> <span class=
  "c5 c0">&lt;progress&gt;hardware-detection&lt;/progress&gt;</span><span class="c0">&#160;for
  the new system. The client then performs hardware detection and
  sends the results back to the server in a</span> <span class=
  "c5 c0">detected_hardware</span><span class="c0">&#160;message.
  The server uses that information to create an LDAP object. If a
  matching template object exists (go-susi extension, see</span>
  <span class="c5 c0">detected_hardware</span><span class=
  "c0">&#160;for details), the result is a complete system object.
  Otherwise it is an incomplete object in</span> <span class=
  "c5 c0">new-systems-base</span><span class="c8 c0">&#160;that
  needs to be completed in GOsa.</span></p>

  <p class=""><span class="c0">Once the object has been completed,
  the server sends the available information to the client
  in</span> <span class="c5 c0">new_ldap_config,
  new_ntp_config</span><span class="c0">&#160;and</span>
  <span class="c5 c0">new_syslog_config</span><span class=
  "c0">&#160;messages. And when the</span> <span class=
  "c5 c0">gotoMode</span><span class="c0">&#160;becomes</span>
  <span class="c5 c0">active</span><span class="c0">, the server
  sends</span> <span class=
  "c5 c0">set_activated_for_installation.</span><span class=
  "c0">&#160;It is only after the client has received both</span>
  <span class="c5 c0">new_ldap_config</span><span class=
  "c0">&#160;and</span> <span class=
  "c5 c0">set_activated_for_installation</span><span class=
  "c8 c0">&#160;that it can begin the actual installation process.
  A variety of message types may occur during an installation or
  softupdate. These are explained in their own chapter of this
  manual.</span></p>

  <p class=""><span class="c0">Whenever a server starts executing a
  job that affects a client, it will send that client a</span>
  <span class="c5 c0">trigger_action_*</span><span class=
  "c8 c0">&#160;message. Depending on the kind of job the client
  may react to this by e.g. presenting a popup to a logged in user
  asking the user to log out.</span></p>

  <p class=""><span class="c0">Jobs of type</span> <span class=
  "c5 c0">job_send_user_msg</span><span class="c0">&#160;have their
  own associated client-server messages but go-susi does not
  support these. See the chapter on deprecated messages later in
  this manual.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="c27" id="h.w909y3vom7bh"><span class=
  "c12 c6">here_i_am</span></h3>

  <p class=""><span class="c8 c6">Purpose:</span></p>

  <p class="c10"><span class="c0">Client&#10132;Server.</span>
  <span class="c0">Used by an si-client to register at the
  si-server responsible for it. The si-server reacts by sending
  a</span> <span class="c5 c0">registered</span><span class=
  "c8 c0">&#160;message possibly followed by</span></p>

  <p class="c7 c10"></p>

  <ul class="c21 lst-kix_qcfysk3gr1ej-1 start">
    <li class="c1 c11"><span class="c0">a</span> <span class=
    "c5 c0">new_ldap_config</span><span class="c8 c0">&#160;message
    to tell the client which LDAP parameters it should
    use.</span></li>

    <li class="c1 c11"><span class="c0">a</span> <span class=
    "c5 c0">detect_hardware</span><span class="c8 c0">&#160;message
    to instruct the client to perform hardware
    detection.</span></li>

    <li class="c1 c11"><span class="c0">a</span> <span class=
    "c5 c0">new_ntp_config</span><span class="c8 c0">&#160;message
    to tell the client which NTP server(s) to use.</span></li>

    <li class="c1 c11"><span class="c0">a</span> <span class=
    "c5 c0">new_syslog_config</span><span class=
    "c8 c0">&#160;message to tell the client which syslog server to
    use.</span></li>
  </ul>

  <p class="c7"></p>

  <p class="c10"><span class="c0">A client to be (re)installed will
  not start the installation until it has received the return
  message(s) to its</span> <span class=
  "c5 c0">here_i_am</span><span class="c8 c0">&#160;message from
  the server from which it is installing. In other situations (e.g.
  normal booting) the client will, if it does not receive the
  messages after a few seconds, try to register at each si-server
  listed in DNS in turn to find one that answers quickly
  enough.</span></p>

  <p class="c10"><span class="c0">The</span> <span class=
  "c5 c0">here_i_am</span><span class="c0">&#160;message is also
  responsible for setting the encryption key the si-server should
  use to encrypt messages sent to the client (such as</span>
  <span class="c2 c0">new_ldap_config).</span></p>

  <p class="c10"><span class="c0">When a client has successfully
  registered at a server, the server sends out</span> <span class=
  "c5 c0">new_foreign_client</span><span class=
  "c8 c0">&#160;messages to its peers.</span></p>

  <p class="c10"><span class="c0">The new client will also appear
  in future (</span><span class="c5 c0">confirm_</span><span class=
  "c0">)</span><span class="c5 c0">new_server</span><span class=
  "c8 c0">&#160;messages sent by the server.</span></p>

  <p class="c10"><span class="c8 c0">If the server can find the
  client in LDAP by its MAC address, it will also update the
  ipHostNumber field. go-susi also updates the cn.</span></p>

  <p class="c10"><span class="c0">If the sending client does not
  exist in LDAP, a reinstall job will automatically be created
  with</span> <span class="c6">&lt;progress&gt;</span><span class=
  "c0">hardware-detection</span><span class=
  "c6">&lt;/progress&gt;</span> <span class="c0">and</span>
  <span class="c6">&lt;status&gt;</span><span class=
  "c0">processing</span><span class=
  "c6">&lt;/status&gt;</span><span class="c0">&#160;and the</span>
  <span class="c5 c0">detect_hardware</span> <span class=
  "c8 c0">message will be sent to the client.</span></p>

  <p class=""><span class="c8 c6">Example message:</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">here_i_am</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.146:20083</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c1"><span class=
  "c2 c6">&lt;here_i_am&gt;&lt;/here_i_am&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;mac_address&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/mac_address&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;new_passwd&gt;</span><span class=
  "c5 c0">qXBaZCnDgKMhvDULAD0ltWdfk9kHdnl</span><span class=
  "c2 c6">&lt;/new_passwd&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;key_lifetime&gt;</span><span class=
  "c5 c0">600</span><span class=
  "c2 c6">&lt;/key_lifetime&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;client_revision&gt;</span><span class=
  "c5 c0">20926</span><span class=
  "c2 c6">&lt;/client_revision&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;client_status&gt;</span><span class=
  "c5 c0">stable</span><span class=
  "c2 c6">&lt;/client_status&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;gotoHardwareChecksum&gt;</span><span class=
  "c5 c0">qQvNNtPqaV5MG8UElNS7g</span><span class=
  "c2 c6">&lt;/gotoHardwareChecksum&gt;</span></p>

  <p class="c1"><span class="c2 c6">&lt;events&gt;</span></p>

  <p class="c16"><span class=
  "c2 c0">trigger_action_localboot,trigger_action_reboot,</span></p>

  <p class="c16"><span class=
  "c2 c0">confirm_new_key,mailqueue_requeue,import_events,usr_msg,</span></p>

  <p class="c16"><span class=
  "c2 c0">new_syslog_config,generate_hw_digest,get_events,</span></p>

  <p class="c16"><span class=
  "c2 c0">new_ntp_config,mailqueue_del,trigger_action_faireboot,</span></p>

  <p class="c16"><span class=
  "c2 c0">new_key,registered,mailqueue_header,trigger_action_reinstall,</span></p>

  <p class="c16"><span class=
  "c2 c0">new_ldap_config,trigger_action_instant_update,mailqueue_hold,</span></p>

  <p class="c16"><span class=
  "c2 c0">set_activated_for_installation,detect_hardware,</span></p>

  <p class="c16"><span class=
  "c2 c0">trigger_action_update,ping,mailqueue_unhold,</span></p>

  <p class="c16"><span class=
  "c2 c0">mailqueue_query,trigger_goto_settings_reload,</span></p>

  <p class="c16"><span class="c2 c0">trigger_action_halt</span></p>

  <p class="c1"><span class="c2 c6">&lt;/events&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class=""><span class="c8 c6">&lt;mac_address&gt;</span></p>

  <p class="c10"><span class="c0">The sending client's MAC
  address.</span> <span class="c6">Note:</span><span class=
  "c8 c0">&#160;The tag has an underscore in its name unlike the
  MAC address elements in other messages.</span></p>

  <p class=""><span class="c8 c6">&lt;new_passwd&gt;</span></p>

  <p class="c10"><span class="c0">The client equivalent to
  the</span> <span class="c6">&lt;key&gt;</span><span class=
  "c0">&#160;element of</span> <span class=
  "c5 c0">new_server</span><span class="c8 c0">&#160;messages. The
  receiving server will use this key to encrypt messages to the
  client.</span></p>

  <p class=""><span class="c8 c6">&lt;key_lifetime&gt;</span></p>

  <p class="c10"><span class="c0">Number of seconds the key is
  valid. The client will send a</span> <span class=
  "c5 c0">new_key</span><span class="c8 c0">&#160;message in
  intervals of this many seconds (Some versions of gosa-si-client
  don&#8217;t do this because of bugs. They keep using the same key
  indefinitely).</span></p>

  <p class=""><span class="c6">&lt;client_revision&gt;,
  &lt;client_status&gt;</span><span class="c8 c0">&#160;Version
  information about the client.</span></p>

  <p class=""><span class=
  "c6">&lt;gotoHardwareChecksum&gt;</span><span class=
  "c8 c0">&#160;A digest generated based on the machine
  hardware.</span></p>

  <p class=""><span class="c6">&lt;events&gt;</span><span class=
  "c8 c0">&#160;The set of messages the client
  understands.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">go-susi notes:</span></p>

  <p class="c10"><span class="c0">go-susi updates the
  system&#8217;s</span> <span class=
  "c5 c0">ipHostNumber</span><span class="c0">&#160;field when it
  receives this message. If the system&#8217;s</span> <span class=
  "c5 c0">cn</span><span class="c8 c0">&#160;does not match the
  long or short name of the reverse lookup of its IP, the object
  will be renamed to match the DNS name.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">gosa-si-client notes:</span></p>

  <p class="c10"><span class="c0">gosa-si-client internally manages
  a list</span> <span class="c5 c0">@servers</span><span class=
  "c0">&#160;that it will contact in turn with</span> <span class=
  "c5 c0">here_i_am</span><span class="c0">&#160;until it receives
  a</span> <span class="c5 c0">registered</span><span class=
  "c0">&#160;response within a certain reply time. If
  gosa-si-client receives a message that it cannot decode, it will
  re-register, however, it will do so at the next server in the
  list instead of starting at the beginning again.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="c27" id="h.uw29iuabpm6q"><span class=
  "c12 c6">new_key</span></h3>

  <p class=""><span class="c8 c6">Purpose:</span></p>

  <p class="c10"><span class="c8 c0">Client&#10132;Server. Informs
  the server about a new encryption key to be used when
  communicating with the sending client.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">Example message:</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">new_key</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.146:20083</span><span class=
  "c4">&lt;/source&gt;</span><span class=
  "c5 c0">&#160;</span><span class=
  "c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c1"><span class="c4">&lt;new_key&gt;</span><span class=
  "c5 c0">edLDBiajQownOirf424zKFOyG4AlrP7</span><span class=
  "c2 c6">&lt;/new_key&gt;</span></p>

  <p class="c10"><span class="c4">&lt;/xml&gt;</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="" id="h.w5skplmpyja8"><span class=
  "c0">registered</span></h3>

  <p class="c14"><span class="c8 c6">Purpose:</span></p>

  <p class="c14 c10"><span class="c0">Server&#10132;Client. Sent
  in</span> <span class="c0">reaction to a client&#8217;s</span>
  <span class="c5 c0">here_i_am</span><span class=
  "c8 c0">&#160;message.</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">Example message:</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;header&gt;</span><span class=
  "c5 c0">registered</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.106:20083</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;ldap_available&gt;</span><span class=
  "c5 c0">true</span><span class=
  "c2 c6">&lt;/ldap_available&gt;</span></p>

  <p class="c14 c1"><span class=
  "c2 c6">&lt;registered&gt;&lt;/registered&gt;</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class="c14"><span class=
  "c8 c6">&lt;ldap_available&gt;</span></p>

  <p class="c14 c10"><span class="c0">If this is present and</span>
  <span class="c5 c0">true</span><span class="c0">&#160;it tells
  the client that it will get a</span> <span class=
  "c5 c0">new_ldap_config</span><span class="c0">&#160;message. If
  the element is absent or</span> <span class=
  "c5 c0">false</span><span class="c0">, this means that no LDAP
  information is available and the client will not receive a</span>
  <span class="c5 c0">new_ldap_config</span><span class=
  "c8 c0">&#160;message until its LDAP object has been created
  (usually after hardware detection).</span></p>

  <p class="c14"><span class="c8 c6">LHM note:</span></p>

  <p class="c14 c10"><span class="c0">If this element is sent
  as</span> <span class="c5 c0">true</span><span class=
  "c0">&#160;and not followed up with a</span> <span class=
  "c5 c0">new_ldap_config</span><span class="c8 c0">, the
  installation will not properly display the message &#8220;System
  is locked. Waiting for activation.&#8221;</span></p>

  <h3 class="" id="h.adu9m7a7h8yw"><span class=
  "c0">deregistered</span></h3>

  <p class=""><span class="c8 c6">Purpose:</span></p>

  <p class="c10"><span class="c0">Server&#10132;Client. Sent to a
  client that has been registered at this server to inform it that
  the registration needs to be renewed if the client wants to stay
  registered at this server. This go-susi specific message is sent
  when the server receives a</span> <span class=
  "c5 c0">new_foreign_client</span><span class="c0">&#160;message
  that informs it that one of its clients is now registered at a
  different server. When a client receives a</span> <span class=
  "c5 c0">deregistered</span><span class="c0">&#160;message from a
  server the client still believes is the one it should be
  registered at, it will re-register at that server. Otherwise the
  client will simply ignore the message. This corrects the effects
  of erroneous</span> <span class=
  "c5 c0">new_foreign_client</span><span class=
  "c8 c0">&#160;messages which may result from race conditions
  during the registration process or network problems.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">Example message:</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">deregistered</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.106:20083</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">go-susi note:</span></p>

  <p class="c14 c10"><span class="c0">This message is specific to
  post-TLS versions of go-susi. However both pre-TLS versions of
  go-susi and gosa-si-clients will react properly because they see
  the "STARTTLS" as undecryptable gibberish and will re-register
  based on the assumption that the decryption keys of the pre-TLS
  protocol have gone out of sync between client and
  server.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="" id="h.l3p6rg78vgh1"><span class=
  "c0">new_ldap_config</span></h3>

  <p class="c14"><span class="c8 c6">Purpose:</span></p>

  <p class="c14 c10"><span class="c0">Server&#10132;Client.
  Sends</span><span class="c8 c0">&#160;various LDAP-related
  information to the client. This message is not sent until the
  client object has been properly created.</span></p>

  <p class="c14"><span class="c6">Note:</span></p>

  <p class="c14 c10"><span class="c0">When go-susi</span>
  <span class="c0 c18">receives</span><span class="c0">&#160;this
  message, it will call</span> <span class=
  "c5 c0">[general]/new-config-hook</span><span class="c8 c0">. If
  go-susi is in client-only mode, it will also update its internal
  LDAP parameters.</span></p>

  <p class="c14"><span class="c8 c6">Example message:</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;header&gt;</span><span class=
  "c5 c0">new_ldap_config</span><span class="c2 c6">&lt;/header&gt;
  &#160;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.106:20083</span><span class=
  "c2 c6">&lt;/target&gt; &#160;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;admin_base&gt;</span><span class=
  "c5 c0">ou=Direktorium,o=go-susi,c=de</span><span class=
  "c2 c6">&lt;/admin_base&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;department&gt;</span><span class=
  "c5 c0">Direktorium</span><span class=
  "c2 c6">&lt;/department&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;ldap_base&gt;</span><span class=
  "c5 c0">ou=Direktorium,o=go-susi,c=de</span><span class=
  "c2 c6">&lt;/ldap_base&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;ldap_uri&gt;</span><span class=
  "c5 c0">ldap://ldap01.example.de</span><span class=
  "c2 c6">&lt;/ldap_uri&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;ldap_uri&gt;</span><span class=
  "c5 c0">ldap://ldap02.example.de</span><span class=
  "c2 c6">&lt;/ldap_uri&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;release&gt;</span><span class=
  "c5 c0">halut/2.4.0</span><span class=
  "c2 c6">&lt;/release&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;unit_tag&gt;</span><span class=
  "c5 c0">1154342234048479900</span><span class=
  "c2 c6">&lt;/unit_tag&gt;</span></p>

  <p class="c14 c1"><span class=
  "c2 c6">&lt;new_ldap_config&gt;&lt;/new_ldap_config&gt;</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class="c14"><span class=
  "c4">&lt;release&gt;</span><span class="c5 c0 c18">&#160;</span><span class="c28 c0 c31 c18">(optional)</span></p>

  <p class="c14 c10"><span class="c8 c0">The release the client
  should have according to LDAP if known.</span></p>

  <p class="c14"><span class=
  "c4">&lt;ldap_uri&gt;</span><span class=
  "c0">&#160;</span><span class="c28 c0 c31 c18">(1 or
  more)</span></p>

  <p class="c14 c10"><span class="c0">The LDAP server(s) from which
  the client should read its data. All listed LDAP servers contain
  the same data with respect to the client system&#8217;s object
  but may differ in other ways. In general the client should use
  the first</span> <span class=
  "c4">&lt;ldap_uri&gt;</span><span class="c8 c0">&#160;and only
  fall back to trying the others if the first is not
  available.</span></p>

  <p class="c14"><span class="c2 c6">&lt;ldap_base&gt;</span></p>

  <p class="c14 c10"><span class="c0">The base under which the
  client should look for its data. There is only one</span>
  <span class="c4">&lt;ldap_base&gt;</span><span class=
  "c0">&#160;element even if there are multiple</span> <span class=
  "c4">&lt;ldap_uri&gt;</span><span class=
  "c8 c0">&#160;elements.</span></p>

  <p class="c14"><span class="c4">&lt;unit_tag&gt;
  &#160;</span><span class="c0 c18">(only present when unit tags
  are used)</span> <span class="c8 c0">The unit tag for the
  client.</span></p>

  <p class="c14"><span class=
  "c4">&lt;admin_base&gt;</span><span class="c28 c0 c31 c18">(only
  present when unit tags are used)</span></p>

  <p class="c14 c10"><span class="c0">The dn of the admin base
  object. This is the first object under the</span> <span class=
  "c6">&lt;ldap_base&gt;</span><span class="c0">&#160;that
  matches</span> <span class=
  "c5 c0">(&amp;(objectClass=gosaAdministrativeUnit)(gosaUnitTag=...)).</span><span class="c0">&#160;Typically
  this is the same as the</span> <span class=
  "c6">&lt;ldap_base&gt;</span><span class="c8 c0">.</span></p>

  <p class="c14"><span class=
  "c4">&lt;department&gt;</span><span class="c0 c18">(only present
  when unit tags are used)</span><span class="c0">&#160;The</span>
  <span class="c5 c0">ou</span><span class="c8 c0">&#160;attribute
  of the admin base object.</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">gosa-si-server
  notes:</span></p>

  <p class="c14 c10"><span class=
  "c5 c0">modules/ClientPackages.pm:new_ldap_config()</span>
  <span class="c0">contains the code that constructs this message.
  When the system is activated for installation, the</span>
  <span class=
  "c5 c0">set_activated_for_installation</span><span class=
  "c0">&#160;message will always be followed by</span> <span class=
  "c5 c0">new_ldap_config</span><span class="c0">. This seems like
  a race condition. I think it would be better to send the</span>
  <span class="c5 c0">new_ldap_config</span><span class=
  "c0">&#160;beforehand. In practice this is not a problem with
  gosa-si-server because it seems to send the LDAP config once
  before and once after the</span> <span class=
  "c5 c0">set_activated_for_installation</span><span class=
  "c8 c0">&#160;however I believe that the data sent before
  reflects only a default choice and may not be current if the LDAP
  server is changed in GOsa for a new system.</span></p>

  <p class="c14"><span class="c8 c6">GOsa/go-susi note:</span></p>

  <p class="c14 c10"><span class="c0">The format of the</span>
  <span class="c5 c0">gotoLdapServer</span><span class=
  "c8 c0">&#160;attribute that is the source for this message's
  information has changed over time. go-susi only supports the
  version 3 format.</span></p>

  <p class="c1"><span class="c0">Version 3 format:</span>
  <span class="c2 c0">Index:Servername:URL/Base</span></p>

  <p class="c1"><span class="c0">Version 2 format:</span>
  <span class="c2 c0">Index:Servername:Base</span></p>

  <p class="c1"><span class="c0">Version 1 format:</span>
  <span class="c5 c0">Servername:URL/Base</span></p>

  <p class="c10"><span class="c8 c0">where</span></p>

  <p class="c1"><span class="c5 c0">Index</span><span class=
  "c0">&#160;is a number used to sort multiple</span> <span class=
  "c5 c0">gotoLdapServer</span><span class=
  "c8 c0">&#160;values.</span></p>

  <p class="c1"><span class="c5 c0">Servername</span><span class=
  "c8 c0">&#160;is unused in version 3 format.</span></p>

  <p class="c1"><span class="c5 c0">URL</span><span class=
  "c8 c0">&#160;is the ldap:// or ldaps:// URL of the
  server.</span></p>

  <p class="c1"><span class="c5 c0">Base</span><span class=
  "c0">&#160;is the DN of the subtree to which searches should be
  restricted.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="" id="h.gprzmis7xdu9"><span class=
  "c0">new_ntp_config</span></h3>

  <p class="c14"><span class="c8 c6">Purpose:</span></p>

  <p class="c14 c10"><span class="c8 c0">Server&#10132;Client.
  Tells the client which NTP server(s) to use.</span></p>

  <p class="c14"><span class="c6">Note:</span></p>

  <p class="c14 c10"><span class="c0">When go-susi</span>
  <span class="c0 c18">receives</span><span class="c0">&#160;this
  message, it will call</span> <span class=
  "c5 c0">[general]/new-config-hook</span><span class=
  "c8 c0">.</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">Example message:</span></p>

  <p class="c10 c14"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;header&gt;</span><span class=
  "c5 c0">new_ntp_config</span><span class="c2 c6">&lt;/header&gt;
  &#160;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.106:20083</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;server&gt;</span><span class=
  "c5 c0">pool.ntp.org</span><span class=
  "c2 c6">&lt;/server&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;server&gt;</span><span class=
  "c5 c0">ntp.example.org</span><span class=
  "c2 c6">&lt;/server&gt;</span></p>

  <p class="c14 c1"><span class=
  "c2 c6">&lt;new_ntp_config&gt;&lt;/new_ntp_config&gt;</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class="c14 c10"><span class=
  "c6">&lt;server&gt;</span><span class=
  "c0">&#160;</span><span class="c0 c18">(1 or
  more)</span><span class="c0">&#160;NTP server(s) to
  use.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="" id="h.hoqs75a5zaxq"><span class=
  "c0">detect_hardware</span></h3>

  <p class="c14"><span class="c8 c6">Purpose:</span></p>

  <p class="c14 c10"><span class="c0">Server&#10132;Client.
  Wh</span><span class="c0">en the server receives a</span>
  <span class="c5 c0">here_i_am</span><span class=
  "c0">&#160;message with a MAC address for which no</span>
  <span class="c5 c0">GOhard</span><span class="c0">&#160;object
  can be found in LDAP, the server sends a</span> <span class=
  "c5 c0">detecT_hardware</span><span class="c0">&#160;message. The
  client reacts to this message by performing hardware detection
  and sends a</span> <span class=
  "c5 c0">detecTED_hardware</span><span class="c8 c0">&#160;message
  to the server. The server then creates the LDAP object with that
  data.</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">Example message:</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;header&gt;</span><span class=
  "c5 c0">detect_hardware</span><span class="c2 c6">&lt;/header&gt;
  &#160;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.146:20083</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c14 c1"><span class=
  "c2 c6">&lt;detect_hardware&gt;&lt;/detect_hardware&gt;</span></p>

  <p class="c14 c10"><span class="c4">&lt;/xml&gt;</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="c27" id="h.ylkn6o4e9qjp"><span class=
  "c12 c6">detected_hardware</span></h3>

  <p class=""><span class="c8 c6">Purpose:</span></p>

  <p class="c10"><span class="c0">Client&#10132;Server. When the
  server receives a</span> <span class=
  "c5 c0">here_i_am</span><span class="c0">&#160;message with a MAC
  address for which no GOhard object exists in LDAP , the server
  sends a</span> <span class=
  "c5 c0">detecT_hardware</span><span class="c0">&#160;message to
  the client. The client reacts to this message by performing
  hardware detection and sends a</span> <span class=
  "c5 c0">detecTED_hardware</span><span class="c0">&#160;message to
  the server. The server then creates the LDAP object with that
  data. If a</span> <span class=
  "c5 c0">detecTED_hardware</span><span class="c8 c0">&#160;message
  is received for a system whose MAC address is found in LDAP, then
  that system's LDAP object will be updated with the new
  info.</span></p>

  <p class=""><span class="c8 c6">go-susi extension:</span></p>

  <p class="c10"><span class="c0">go-susi extends the usage
  of</span> <span class=
  "c5 c0">detected_hardware</span><span class="c0">&#160;to permit
  any kind of creation, modification and even moving of system
  objects within the LDAP tree, even without prior use of</span>
  <span class="c5 c0">here_i_am</span><span class="c8 c0">. See the
  go-susi note further below for more information.</span></p>

  <p class=""><span class="c8 c6">Template objects:</span></p>

  <p class="c10"><span class="c0">The data from the</span>
  <span class="c5 c0">detected_hardware</span><span class=
  "c0">&#160;message is not enough to create a complete system
  object that is ready for installation. This means that usually
  further action is necessary in GOsa to provide the remaining data
  before the installation can begin. To allow for fully automatic
  installation, go-susi has the ability to complement the</span>
  <span class="c5 c0">detected_hardware</span><span class=
  "c8 c0">&#160;data with data copied from a template
  object.</span></p>

  <p class="c10"><span class="c0">Whenever go-susi receives
  a</span> <span class="c5 c0">detected_hardware</span><span class=
  "c0">&#160;message for a system that does not yet exist in LDAP,
  go-susi will search for template objects which are objects that
  have</span> <span class=
  "c5 c0">objectClass=GOHard</span><span class="c0">&#160;and
  a</span> <span class="c5 c0">goComment</span><span class=
  "c0">&#160;attribute that starts with "</span><span class=
  "c5 c0">Template for</span><span class="c0">". The remainder of
  the</span> <span class="c5 c0">goComment</span><span class=
  "c8 c0">&#160;is taken as a matching rule as described below. If
  the rule matches against the attributes of the new system that
  are known so far, then the other attributes are copied from the
  template object.</span></p>

  <p class=""><span class="c8 c6">Template objects that are group
  members:</span></p>

  <p class="c10"><span class="c0">If the template object is</span>
  <span class="c5 c0">member</span><span class="c0">&#160;of any
  object groups (</span><span class=
  "c5 c0">objectClass=gosaGroupOfNames</span><span class="c8 c0">),
  then &#160;the new system will be added to the same
  groups.</span></p>

  <p class=""><span class="c8 c6">Auto-activation for immediate
  installation:</span></p>

  <p class="c10"><span class="c0">If the template object has</span>
  <span class="c5 c0">gotoMode=active</span><span class="c8 c0">,
  then the new system will be activated and installation will
  commence immediately.</span></p>

  <p class=""><span class="c8 c6">Object creation not in
  new-systems-base:</span></p>

  <p class="c10"><span class="c0">The &#160;new system's LDAP
  object will be placed in the same LDAP path as the template
  object from which it copies attributes. Template objects are
  allowed to be but don't need to be in</span> <span class=
  "c5 c0">new-systems-base.</span></p>

  <p class=""><span class="c8 c6">Matching rule
  language:</span></p>

  <p class="c10"><span class="c8 c0">A matching rule consists of
  one or more parts, optionally separated by whitespace. Each part
  can have one of the following 2 forms:</span></p>

  <p class="c10"><span class="c2 c0">attributeName =~
  /regex/</span></p>

  <p class="c1"><span class="c0">matches if the system has at least
  an attribute named</span> <span class=
  "c5 c0">attributeName</span><span class="c0">&#160;with at least
  one value that matches the given regex. This is a non-anchored
  match. If you want the match to be anchored you need to
  specifically include</span> <span class=
  "c5 c0">^</span><span class="c0">&#160;and/or</span> <span class=
  "c5 c0">$</span> <span class="c8 c0">in the regex.</span></p>

  <p class="c1"><span class="c0">As a special case the regex</span>
  <span class="c5 c0">/^$/</span><span class="c0">&#160;matches if
  the system has no attribute</span> <span class=
  "c5 c0">attributeName</span><span class="c8 c0">.</span></p>

  <p class="c10"><span class="c2 c0">attributeName !~
  /regex/</span></p>

  <p class="c1"><span class="c0">matches if none of the system's
  values for the attribute named</span> <span class=
  "c5 c0">attributeName</span><span class="c8 c0">&#160;match the
  given regex. If the system has no attribute of that name this
  will be treated as if it had such an attribute with an empty
  string as value.</span></p>

  <p class="c10"><span class="c0">The regex syntax is described
  here:</span><span class="c0"><a class="c9" href=
  "https://www.google.com/url?q=https://code.google.com/p/re2/wiki/Syntax&amp;sa=D&amp;ust=1469524603835000&amp;usg=AFQjCNGOUdkehqcCuqaQRF2c6cOIq1aPnA">&#160;</a></span><span class="c13 c0"><a class="c9"
  href=
  "https://www.google.com/url?q=https://code.google.com/p/re2/wiki/Syntax&amp;sa=D&amp;ust=1469524603836000&amp;usg=AFQjCNFtf3xl0lquqP2xXkx7zjRA37vNLg">https://code.google.com/p/re2/wiki/Syntax</a></span></p>

  <p class="c10"><span class="c0">Whitespace note: Every sequence
  of whitespace characters in regexes is converted to
  "</span><span class="c5 c0">\s+</span><span class="c0">", so a
  simple space represents any kind of whitespace. Note that this
  breaks some things like "</span><span class="c5 c0">[^
  ]</span><span class="c0">". Use</span> <span class=
  "c5 c0">\x20</span><span class="c8 c0">&#160;if you need to
  explicitly match a space.</span></p>

  <p class=""><span class="c8 c6">Matching process:</span></p>

  <p class="c10"><span class="c0">The matching rule is divided into
  groups of subsequent parts of the same type
  (i.e.</span><span class="c5 c0">&#160;=~</span><span class=
  "c0">&#160;or</span> <span class="c5 c0">!~</span><span class=
  "c8 c0">).</span></p>

  <p class="c10"><span class="c0">From each</span> <span class=
  "c5 c0">=~</span><span class="c8 c0">&#160;group the system must
  match at least one part.</span></p>

  <p class="c10"><span class="c0">From each</span> <span class=
  "c5 c0">!~</span><span class="c8 c0">&#160;group the system must
  match all parts (i.e. it must not match any of the
  regexes).</span></p>

  <p class="c10"><span class="c8 c6">Example:</span></p>

  <p class="c1"><span class="c2 c0">cn=~/foo/ cn=~/bar/ cn!~/fool/
  cn!~/barstool/ cn=~/moo/</span></p>

  <p class="c1"><span class="c0">matches</span> <span class=
  "c2 c0">cn=foomoo</span></p>

  <p class="c1"><span class="c0">matches</span> <span class=
  "c2 c0">cn=moobar</span></p>

  <p class="c1"><span class="c0">does not match</span> <span class=
  "c5 c0">cn=foo</span><span class="c0">&#160;(the
  "</span><span class="c5 c0">moo</span><span class="c0">" from the
  2nd</span> <span class="c5 c0">=~</span><span class=
  "c8 c0">&#160;group is missing)</span></p>

  <p class="c1"><span class="c0">does not match</span> <span class=
  "c5 c0">cn=moofoolish</span><span class="c0">&#160;(forbidden
  by</span> <span class="c5 c0">cn!~/fool/</span><span class=
  "c8 c0">)</span></p>

  <p class="c1"><span class="c0">does not match</span> <span class=
  "c5 c0">cn=barstoolmoo</span><span class="c0">&#160;(forbidden
  by</span> <span class="c5 c0">cn!~/barstool/</span><span class=
  "c8 c0">)</span></p>

  <p class="c1"><span class="c0">does not match</span> <span class=
  "c5 c0">cn=moo</span><span class="c0">&#160;(needs
  "</span><span class="c5 c0">foo</span><span class="c0">" or
  "</span><span class="c5 c0">bar</span><span class="c0">" from the
  1st</span> <span class="c5 c0">=~</span><span class=
  "c8 c0">&#160;group)</span></p>

  <p class="c1"><span class="c0">matches</span> <span class=
  "c5 c0">cn=foobarmoomoo</span><span class="c8 c0">&#160;(multiple
  matches from each group are okay)</span></p>

  <p class=""><span class="c8 c6">Matching rule
  precedence:</span></p>

  <p class="c10"><span class="c8 c0">If multiple template objects
  have matching rules that match the new system, go-susi will
  choose that template object whose rule contains the greatest
  number of matching (or non-matching in the case of "!~") regular
  expressions. If multiple template objects have the same score,
  one of them will be picked in an unspecified manner.</span></p>

  <p class="c10"><span class="c6">Example:</span><span class=
  "c0">&#160;In the example from</span> <span class="c6">Matching
  process</span><span class="c0">&#160;above,</span> <span class=
  "c5 c0">cn=foobarmoomoo</span><span class="c0">&#160;has a
  matching score of 5, because it matches all three</span>
  <span class="c5 c0">=~</span><span class="c0">&#160;parts and
  does not match the two</span> <span class=
  "c5 c0">!~</span><span class="c8 c0">&#160;parts.</span></p>

  <p class=""><span class="c8 c6">Attributes available for
  matching:</span></p>

  <p class="c10"><span class="c8 c0">The following attributes may
  be used in matching rules:</span></p>

  <ul class="c21 lst-kix_16eukovhtu33-1 start">
    <li class="c1 c11"><span class="c0">all attributes from
    the</span> <span class="c6">&lt;</span><span class=
    "c4">detected_hardware&gt;</span><span class="c0">&#160;element
    of the</span> <span class="c5 c0">detected_hardware</span>
    <span class="c8 c0">message.</span></li>

    <li class="c1 c11"><span class="c0">the system's</span>
    <span class="c5 c0">macAddress</span><span class="c0">. If
    the</span> <span class="c6">&lt;</span><span class=
    "c6">detected_hardware&gt;</span><span class="c0">&#160;element
    does not contain a valid MAC, it will be determined from the
    most recent</span> <span class=
    "c5 c0">here_i_am</span><span class="c0">&#160;or</span>
    <span class="c5 c0">new_foreign_client</span><span class=
    "c0">&#160;message concerning the client matching</span>
    <span class="c5 c0">detected_hardware</span><span class=
    "c0">'s</span> <span class="c6">&lt;source&gt;</span>
    <span class="c8 c0">element.</span></li>

    <li class="c1 c11"><span class="c0">the system's</span>
    <span class="c5 c0">ipHostNumber</span><span class=
    "c0">&#160;extracted from</span> <span class=
    "c5 c0">detected_hardware</span><span class="c0">'s</span>
    <span class="c6">&lt;source&gt;</span><span class=
    "c0">&#160;element (unless there is an attribute or
    sub-element</span> <span class=
    "c5 c0">ipHostNumber</span><span class="c0">&#160;in</span>
    <span class="c6">&lt;detected_hardware&gt;</span><span class=
    "c8 c0">).</span></li>

    <li class="c1 c11"><span class="c5 c0">cn</span><span class=
    "c0">&#160;which is the system's DNS name in plain or fully
    qualified form as determined by a reverse lookup of</span>
    <span class="c5 c0">ipHostNumber</span><span class=
    "c8 c0">&#160;(see above).</span></li>

    <li class="c1 c11"><span class=
    "c5 c0">siserver</span><span class="c0">&#160;which evaluates
    to the go-susi server doing the matching. You can match by IP
    address as well as DNS name (</span><span class=
    "c5 c0">siserver</span><span class="c0">&#160;is a multi-value
    attribute)</span></li>
  </ul>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">Example message:</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">detected_hardware</span><span class=
  "c4">&lt;/header&gt;</span><span class=
  "c5 c0">&#160;</span><span class=
  "c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.146:20083</span><span class=
  "c4">&lt;/source&gt;</span><span class=
  "c5 c0">&#160;</span><span class=
  "c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c1"><span class=
  "c2 c6">&lt;detected_hardware</span></p>

  <p class="c16"><span class="c2 c6">ghCpuType="GenuineIntel /
  Intel(R) Celeron(R) CPU E3300 @ 2.50GHz - 2493.734"</span></p>

  <p class="c16"><span class="c2 c6">ghGfxAdapter="VMWare
  VMWARE0405"</span></p>

  <p class="c16"><span class="c2 c6">ghMemSize="1025692"</span></p>

  <p class="c16"><span class="c2 c6">ghNetNic="AMD PCnet - Fast
  79C971"</span></p>

  <p class="c16"><span class="c2 c6">ghSoundAdapter="Ensoniq
  Creative Sound Blaster AudioPCI64V, AudioPCI128"</span></p>

  <p class="c16"><span class="c2 c6">ghUsbSupport="false"
  gotoHardwareChecksum="qQvNNtPqaV5MG82UElNS7g"
  gotoSndModule="snd_ens1371"</span></p>

  <p class="c16"><span class="c2 c6">gotoXDriver=""</span></p>

  <p class="c16"><span class="c2 c6">gotoXHsync="31-48"
  gotoXMonitor="Generic Monitor"</span></p>

  <p class="c16"><span class="c2 c6">gotoXMouseType="explorerps/2"
  gotoXMouseport="/dev/input/mice"</span></p>

  <p class="c16"><span class="c2 c6">gotoXResolution="800x600"
  gotoXVsync="50-90"</span></p>

  <p class="c16"><span class="c2 c6">gotoXkbModel="pc104"
  macAddress="00:00:00:00:00:00"</span></p>

  <p class="c1"><span class="c2 c6">&gt;</span></p>

  <p class="c16"><span class=
  "c4">&lt;ghScsiDev&gt;</span><span class="c5 c0">NECVMWar VMware
  IDE CDR10</span><span class="c2 c6">&lt;/ghScsiDev&gt;</span></p>

  <p class="c16"><span class=
  "c4">&lt;ghScsiDev&gt;</span><span class="c5 c0">VMware Virtual
  S</span><span class="c4">&lt;/ghScsiDev&gt;</span><span class=
  "c5 c0">&#160;</span><span class=
  "c4">&lt;gotoModules&gt;</span><span class=
  "c5 c0">ppdev</span><span class=
  "c4">&lt;/gotoModules&gt;</span><span class=
  "c5 c0">&#160;</span><span class=
  "c4">&lt;gotoModules&gt;</span><span class=
  "c5 c0">gameport</span><span class=
  "c4">&lt;/gotoModules&gt;</span><span class=
  "c5 c0">&#160;</span><span class=
  "c4">&lt;gotoModules&gt;</span><span class=
  "c5 c0">psmouse</span><span class=
  "c4">&lt;/gotoModules&gt;</span><span class=
  "c5 c0">&#160;</span><span class=
  "c4">&lt;gotoModules&gt;</span><span class=
  "c5 c0">joydev</span><span class=
  "c4">&lt;/gotoModules&gt;</span><span class=
  "c5 c0">&#160;</span><span class=
  "c4">&lt;gotoModules&gt;</span><span class=
  "c5 c0">parport_pc</span><span class=
  "c2 c6">&lt;/gotoModules&gt;</span></p>

  <p class="c16"><span class="c2 c0">&#8230;</span></p>

  <p class="c16"><span class=
  "c4">&lt;gotoModules&gt;</span><span class=
  "c5 c0">async_xor</span><span class=
  "c2 c6">&lt;/gotoModules&gt;</span></p>

  <p class="c16"><span class=
  "c4">&lt;gotoModules&gt;</span><span class=
  "c5 c0">hid</span><span class=
  "c2 c6">&lt;/gotoModules&gt;</span></p>

  <p class="c16"><span class=
  "c4">&lt;gotoModules&gt;</span><span class=
  "c5 c0">pcnet32</span><span class=
  "c2 c6">&lt;/gotoModules&gt;</span></p>

  <p class="c1"><span class=
  "c2 c6">&lt;/detected_hardware&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7 c10"></p>

  <p class=""><span class="c8 c6">gosa-si-client note:</span></p>

  <p class="c10"><span class="c0">The</span> <span class=
  "c6">macAddress</span><span class="c0">&#160;attribute of</span>
  <span class="c6">&lt;detected_hardware&gt;</span><span class=
  "c8 c0">&#160; may be 00:00:00:00:00:00 when this message is sent
  by gosa-si-client. I don't know if this happens all the time with
  all versions of gosa-si-client.</span></p>

  <p class=""><span class="c8 c6">go-susi note:</span></p>

  <p class="c10"><span class="c0">go-susi permits multiple</span>
  <span class="c6">&lt;detected_hardware&gt;</span><span class=
  "c8 c0">&#160;elements and will take the union of all their
  values.</span></p>

  <p class="c10"><span class="c0">As an alternative to attributes
  on the</span> <span class=
  "c6">&lt;detected_hardware&gt;</span><span class=
  "c0">&#160;element go-susi also accepts child elements
  inside</span> <span class=
  "c6">&lt;detected_hardware&gt;</span><span class="c0">,
  e.g.</span> <span class=
  "c6">&lt;detected_hardware&gt;&lt;gotoXHsync&gt;</span><span class="c0">31-48</span><span class="c6">&lt;/gotoXHsync&gt;&lt;/detected_hardware&gt;</span><span class="c8 c0">.<br />
  </span></p>

  <p class="c10"><span class="c0">go-susi writes all attributes and
  sub-elements of</span> <span class=
  "c6">&lt;detected_hardware&gt;</span><span class="c0">&#160;into
  the LDAP object, except</span> <span class=
  "c5 c0">objectClass</span><span class="c0">. If there is
  an</span> <span class="c5 c0">ipHostNumber</span><span class=
  "c0">&#160;attribute or element, it will override the IP address
  extracted from</span> <span class=
  "c6">&lt;source&gt;</span><span class="c0">. If both</span>
  <span class="c5 c0">ipHostNumber</span><span class=
  "c0">&#160;and</span> <span class=
  "c5 c0">macAddress</span><span class="c0">&#160;are present,
  the</span> <span class="c6">&lt;source&gt;</span><span class=
  "c0">&#160;element does not need to identify a known client. This
  means that with go-susi you can use a</span> <span class=
  "c5 c0">detected_hardware</span><span class="c0">&#160;message to
  create a self-contained ready-for-installation object in LDAP and
  you can use &#160;</span><span class=
  "c5 c0">detected_hardware</span><span class="c0">&#160;messages
  to update all aspects of a system object. It is even possible to
  rename a system by including a</span> <span class=
  "c5 c0">cn</span><span class="c0">&#160;attribute and to move a
  system by including a</span> <span class=
  "c5 c0">dn</span><span class="c0">&#160;attribute.<br />
  Note that when updating an existing object, all attributes from
  the old object that are completely missing from</span>
  <span class="c6">&lt;detected_hardware&gt;</span><span class=
  "c0">&#160;will be copied, but if</span> <span class=
  "c6">&lt;detected_hardware&gt;</span><span class="c0">&#160;has
  an attribute with the same name, it will replace the old
  attribute completely. IOW, old and new attribute values are never
  mixed for the same attribute. E.g. if you want to add a
  single</span> <span class="c5 c0">gotoModules</span><span class=
  "c0">&#160;entry, you need to repeat all the old entries in
  the</span> <span class=
  "c5 c0">detected_hardware</span><span class=
  "c8 c0">&#160;message. You can't just list the new module and
  expect the others to be copied.</span></p>

  <p class="c10"><span class="c0">To delete an attribute, include
  an empty sub-element of that name in</span> <span class=
  "c6">&lt;detected_hardware&gt;</span><span class=
  "c8 c0">.</span></p>

  <p class="c10"><span class="c0">go-susi accepts</span>
  <span class="c5 c0">detected_hardware</span><span class=
  "c0">&#160;messages encrypted with any key, not just client keys.
  This allows a 3rd party to create system objects by
  sending</span> <span class=
  "c5 c0">detected_hardware</span><span class="c0">&#160;encrypted
  e.g. with the [GOsaPackages] key.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="c27" id="h.ylgwskj1nfmx"><span class=
  "c12 c6">trigger_action_*</span></h3>

  <p class=""><span class="c8 c6">Purpose:</span></p>

  <p class="c10"><span class="c0">Server&#10132;Client.
  Sent</span><span class="c8 c0">&#160;by the server to the client
  when the server starts executing a job that affects the client.
  The client will then react appropriately. Most of the time this
  means presenting a message to logged in users to log
  out.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">Example message:</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">trigger_action_localboot</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.146:20083</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c1"><span class=
  "c2 c6">&lt;trigger_action_localboot&gt;&lt;/trigger_action_localboot&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;session_id&gt;</span><span class=
  "c5 c0">109</span><span class=
  "c2 c6">&lt;/session_id&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">The following actions are
  supported:</span></p>

  <p class="c10"><span class="c2 c0">trigger_action_localboot<br />
  trigger_action_halt<br />
  trigger_action_faireboot<br />
  trigger_action_reboot<br />
  trigger_action_reinstall<br />
  trigger_action_update<br />
  trigger_action_instant_update</span></p>

  <p class="c10"><span class=
  "c2 c0">trigger_action_audit</span></p>
  <hr style="page-break-before:always;display:none;" />

  <p class="c7 c10"></p><a id="id.qz602c68q3ci" name=
  "id.qz602c68q3ci"></a>

  <h2 class="" id="h.g0n6u5xsrhzi"><span class=
  "c15 c6">Installation and Softupdate</span></h2>

  <p class=""><span class="c0">When an installation is pending and
  the client's LDAP object has</span> <span class="c5 c0">gotoMode
  locked</span><span class="c0">&#160;the client waits for the
  si-server where it is registered to send the client a</span>
  <span class=
  "c5 c0">set_activated_for_installation</span><span class=
  "c8 c0">&#160;message.</span></p>

  <p class=""><span class="c8 c0">During an installation as well as
  during a softupdate the client sends information about the FAI
  progress to the server.</span></p>

  <p class=""><span class="c0">The</span> <span class=
  "c5 c0">CLMSG_PROGRESS</span><span class="c8 c0">&#160;message
  contains a number between 1 and 100 that gives a rough indication
  of the percentage of the process that has been
  completed.</span></p>

  <p class=""><span class="c0">The</span> <span class=
  "c5 c0">CLMSG_GOTOACTIVATION</span><span class="c0">&#160;message
  is a strange kind of progress message that sets the job's
  &lt;progress&gt; (which otherwise is a number) to the
  string</span> <span class="c2 c0">"goto-activation".</span></p>

  <p class=""><span class="c0">The</span> <span class=
  "c5 c0">CLMSG_HOOK, CLMSG_TASKBEGIN, CLMSG_TASKDIE,
  CLMSG_TASKEND</span> <span class="c0">and</span><span class=
  "c5 c0">&#160;CLMSG_TASKERROR</span><span class=
  "c8 c0">&#160;messages inform the server about specific steps in
  the FAI process.</span></p>

  <p class=""><span class="c0">The most important message during
  installation/update is</span> <span class=
  "c5 c0">CLMSG_save_fai_log</span><span class="c0">&#160;which the
  client uses to transmit the log files from the process to the
  server. The server stores these log files and allows access to
  them via</span> <span class="c5 c0">gosa_show_log_by_mac,
  gosa_show_log_files_by_date_and_mac</span><span class=
  "c0">&#160;and</span> <span class=
  "c5 c0">gosa_get_log_file_by_date_and_mac.</span></p>

  <p class=""><span class="c0">The</span> <span class=
  "c5 c0">CLMSG_check</span><span class="c8 c0">&#160;has an
  unclear purpose and is ignored by the si-server.</span></p>

  <p class="c7"></p>

  <h3 class="" id="h.finq4l4vjm98"><span class=
  "c12 c6">set_activated_for_installation</span></h3>

  <p class="c14"><span class="c8 c6">Purpose:</span></p>

  <p class="c14 c10"><span class="c0">Server&#10132;Client. Tell
  t</span><span class="c0">he client that it has been activated.
  This message is always sent when a</span> <span class=
  "c5 c0">trigger_action_activate</span><span class=
  "c8 c0">&#160;job is executed, regardless of whether the client
  has a pending installation or not. It&#8217;s even sent if the
  client is already activated.</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">Example message:</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;header&gt;</span><span class=
  "c5 c0">set_activated_for_installation</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.146:20083</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;faistate&gt;</span><span class=
  "c5 c0">install</span><span class=
  "c2 c6">&lt;/faistate&gt;</span></p>

  <p class="c14 c1"><span class=
  "c2 c6">&lt;set_activated_for_installation&gt;&lt;/set_activated_for_installation&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;session_id&gt;</span><span class=
  "c5 c0">109</span><span class=
  "c2 c6">&lt;/session_id&gt;</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class=""><span class="c8 c6">&lt;faistate&gt;</span></p>

  <p class="c10"><span class="c0">This reflects the value of the
  target machine's</span> <span class=
  "c5 c0">FAIstate</span><span class="c8 c0">&#160;attribute at the
  time of the activation job that triggered the sending of the
  message.</span></p>

  <p class="c7 c10"></p>

  <p class="c14"><span class="c8 c6">gosa-si-client
  notes:</span></p>

  <p class="c14 c10"><span class="c0">When the client receives this
  message in</span> <span class=
  "c5 c0">client/events/installation.pm</span><span class=
  "c0">&#160;it creates a file</span> <span class=
  "c5 c0">/var/run/gosa-si/gosa-si-client.activated</span><span class="c0">.</span>
  <span class="c5 c0">fai/get-config-dir-gosa</span><span class=
  "c0">&#160;waits for the existence of this file before starting
  the installation.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="" id="h.ntyp12z772rh"><span class=
  "c12 c6">CLMSG_PROGRESS</span></h3>

  <p class="c14"><span class="c8 c6">Purpose:</span></p>

  <p class="c10"><span class="c0">Client&#10132;Server.
  Dur</span><span class="c8 c0">ing installation or softupdate the
  client uses this message to send progress information in percent
  to the server.</span></p>

  <p class="c10"><span class="c0">When the server receives this
  message it will update its job data and will forward the new
  information via</span> <span class=
  "c5 c0">foreign_job_updates</span><span class="c0">&#160;to its
  peers. Subsequent</span> <span class=
  "c5 c0">gosa_query_jobdb</span><span class="c0">&#160;requests
  will also receive the new progress number in the answer's</span>
  <span class="c6">&lt;progress&gt;</span><span class=
  "c8 c0">&#160;element.</span></p>

  <p class="c10"><span class="c0">Note that</span> <span class=
  "c5 c0">CLMSG_GOTOACTIVATION</span><span class="c0">&#160;is
  technically also a progress indication and reflected in
  the</span> <span class="c6">&lt;progress&gt;</span><span class=
  "c8 c0">&#160;element.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">Example message:</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">CLMSG_PROGRESS</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.146:20083</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.85:20081</span><span class=
  "c4">&lt;/target&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;CLMSG_PROGRESS&gt;</span><span class=
  "c5 c0">77</span><span class=
  "c2 c6">&lt;/CLMSG_PROGRESS&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;timestamp&gt;</span><span class=
  "c5 c0">20130305113331</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class=""><span class="c4">&lt;CLMSG_PROGRESS&gt;</span></p>

  <p class="c10"><span class="c8 c0">An integer between between 1
  and 100 (inclusive) giving the percentage of the
  installation/softupdate that has been completed.</span></p>

  <p class=""><span class="c4">&lt;timestamp&gt;,
  &lt;macaddress&gt;</span><span class="c0">&#160;see</span>
  <span class="c5 c0">CLMSG_CURRENTLY_LOGGED_IN.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="" id="h.n5rmujuoqo6x"><span class=
  "c12 c6">CLMSG_GOTOACTIVATION</span></h3>

  <p class="c14"><span class="c8 c6">Purpose:</span></p>

  <p class="c14 c10"><span class="c0">Client&#10132;Server.
  Th</span><span class="c0">e client sends this message when it
  receives</span> <span class=
  "c5 c0">GOTOACTIVATION</span><span class="c0">&#160;via its FIFO
  interface. I don't know who sends this to the FIFO. In any case
  it happens when the client is waiting for activation because it
  is in</span> <span class="c5 c0">gotoMode
  "locked".</span><span class="c8 c0">&#160;It does not matter if
  the client already existed in LDAP or was just
  created.</span></p>

  <p class="c10"><span class="c8 c0">When the server receives this
  message it will update its job data to have</span></p>

  <p class="c1"><span class="c0">&#160;</span><span class=
  "c6">&lt;progress&gt;</span><span class=
  "c5 c0">goto-activation</span><span class=
  "c8 c6">&lt;/progress&gt;</span></p>

  <p class="c10"><span class="c0">and will forward the new
  information via</span> <span class=
  "c5 c0">foreign_job_updates</span><span class="c0">&#160;to its
  peers. Subsequent</span> <span class=
  "c5 c0">gosa_query_jobdb</span><span class="c0">&#160;requests
  will also receive the new progress</span> <span class=
  "c6">&lt;progress&gt;</span><span class=
  "c8 c0">&#160;element.</span></p>

  <p class="c10"><span class="c8 c0">Other than updating the
  progress, this message has no effect on the server.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">Example message:</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">CLMSG_GOTOACTIVATION</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.146:20083</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.85:20081</span><span class=
  "c4">&lt;/target&gt;</span></p>

  <p class="c1"><span class=
  "c2 c6">&lt;CLMSG_GOTOACTIVATION&gt;&lt;/CLMSG_GOTOACTIVATION&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;timestamp&gt;</span><span class=
  "c5 c0">20130305113331</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c6">The message elements have the
  following meaning:</span></p>

  <p class=""><span class="c4">&lt;timestamp&gt;,
  &lt;macaddress&gt;</span><span class="c0">&#160;see</span>
  <span class="c5 c0">CLMSG_CURRENTLY_LOGGED_IN.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="" id="h.95smg2f0t4s6"><span class=
  "c12 c6">CLMSG_save_fai_log</span></h3>

  <p class="c14"><span class="c8 c6">Purpose:</span></p>

  <p class="c14 c10"><span class="c0">Client&#10132;Server. Use
  case 1: Tra</span><span class="c8 c0">nsmits log files from a
  finished installation or softupdate to the server.</span></p>

  <p class="c14 c10"><span class="c0">Use case 2: Transmits audit
  data to the server. See</span> <span class=
  "c2 c0">fai-audit-hook.</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">Example message:</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;header&gt;</span><span class=
  "c5 c0">CLMSG_save_fai_log</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.146:20083</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.85:20081</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;fai_action&gt;</span><span class=
  "c5 c0">install</span><span class=
  "c2 c6">&lt;/fai_action&gt;</span></p>

  <p class="c14 c1"><span class=
  "c2 c6">&lt;CLMSG_save_fai_log&gt;</span></p>

  <p class="c14 c1"><span class=
  "c2 c0">log_file:fstab:IyAvZXRjL2...c2RhNQo=</span></p>

  <p class="c14 c1"><span class=
  "c2 c0">log_file:format.log:U3Rhc...M2I5ODEK</span></p>

  <p class="c14 c1"><span class="c2 c0">...</span></p>

  <p class="c14 c1"><span class=
  "c2 c6">&lt;/CLMSG_save_fai_log&gt;</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class="c14"><span class="c4">&lt;macaddress&gt;</span></p>

  <p class="c14 c10"><span class="c0">The MAC of the client whose
  log files are being sent (usually the same machine as identified
  by</span> <span class="c6">&lt;source&gt;</span><span class=
  "c8 c0">.</span></p>

  <p class="c14"><span class=
  "c2 c6">&lt;CLMSG_save_fai_log&gt;</span></p>

  <p class="c14 c10"><span class="c0">The log files to be
  transmitted. Every log file starts with the literal string</span>
  <span class="c5 c0">"log_file:"</span><span class="c0">, followed
  by the file name, followed by</span> <span class=
  "c5 c0">":"</span><span class="c8 c0">. This is followed by the
  base64-encoded file contents and terminated by a
  space.</span></p>

  <p class="c14"><span class="c2 c6">&lt;fai_action&gt;</span></p>

  <p class="c14 c10"><span class="c0">The FAI action for which log
  files are being transmitted. Possible values are</span>
  <span class="c5 c0">"install"</span><span class="c0">,</span>
  <span class="c5 c0">"softupdate"</span><span class=
  "c0">&#160;and</span> <span class="c2 c0">"audit".</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c0">There is no</span> <span class=
  "c6">&lt;timestamp&gt;</span><span class="c0">. Unlike most
  other</span> <span class="c5 c0">CLMSG_*</span><span class=
  "c0">&#160;messages, this one does not include a</span>
  <span class="c6">&lt;timestamp&gt;</span><span class=
  "c8 c0">&#160;element.</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">gosa-si-client
  notes:</span></p>

  <p class="c14 c10"><span class="c8 c0">gosa-si-client inserts
  spaces into the base64-encoded data which break some base64
  decoders. Remove all whitespace before decoding.</span></p>

  <p class="c14 c10"><span class="c0">I have observed broken base64
  strings coming from gosa-si-client.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="" id="h.g7r8biivaqpb"><span class=
  "c12 c6">CLMSG_&lt;FAI MONITOR EVENT&gt;</span></h3>

  <p class="c14"><span class="c6">Purpose</span><span class=
  "c8 c0">:</span></p>

  <p class="c14 c10"><span class="c0">Client&#10132;Server.
  Dur</span><span class="c0">ing installation gosa-si client
  receives events from FAI via its FIFO interface. These events can
  be seen in the</span> <span class=
  "c5 c0">fai-monitord.log</span><span class="c8 c0">&#160;log
  file. gosa-si-client passes these events on to the
  server.</span></p>

  <p class="c14 c7 c10"></p>

  <p class="c14 c10"><span class="c0">The CLMSG_* messages are used
  to communicate the status of an installation from the client to
  the Server. These messages look almost the same, except the
  element with the value and the header. Furthermore, the
  message</span> <span class=
  "c5 c0">CLMSG_save_fai_log</span><span class="c0">&#160;has the
  additional element</span> <span class=
  "c2 c0">&lt;fai_action&gt;.</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">Example message:</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">CLMSG_TASKBEGIN</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.146:20083</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.85:20081</span><span class=
  "c4">&lt;/target&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;CLMSG_TASKBEGIN&gt;</span><span class=
  "c5 c0">confdir</span><span class=
  "c2 c6">&lt;/CLMSG_TASKBEGIN&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;timestamp&gt;</span><span class=
  "c5 c0">20130305113331</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c14 c7"></p>

  <p class=""><span class="c6">Possible</span> <span class=
  "c8 c6">&lt;FAI MONITOR EVENT&gt;s:</span></p>

  <p class="c10"><span class="c2 c0">HOOK<br />
  TASKBEGIN<br />
  TASKDIE<br />
  TASKEND<br />
  TASKERROR</span></p>

  <p class="c10"><span class="c2 c0">check</span></p>

  <p class="c14"><span class="c4">&#160;</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="c27" id="h.69oiwe17guu6"><span class=
  "c12 c6">CLMSG_TASKBEGIN / CLMSG_TASKERROR /
  CLMSG_TASKEND</span></h3>

  <p class=""><span class="c8 c6">Purpose:</span></p>

  <p class="c10"><span class="c0">(See also</span> <span class=
  "c5 c0">CLMSG_&lt;FAI MONITOR EVENT&gt;</span><span class=
  "c8 c0">)</span></p>

  <p class="c10"><span class="c0">Client&#10132;Server.
  Du</span><span class="c0">ring installation or softupdate the
  client sends these messages to the server to inform it about FAI
  tasks that are being started (</span><span class=
  "c5 c0">CLMSG_TASKBEGIN</span><span class="c0">), errors that
  occur during task execution (</span><span class=
  "c5 c0">CLMSG_TASKERROR</span><span class="c0">) and the exit
  status when a task finishes (</span><span class=
  "c5 c0">CLMSG_TASKEND</span><span class="c8 c0">).</span></p>

  <p class="c7 c10"></p>

  <p class=""><span class="c8 c6">Example messages for a
  successfully completed task:</span></p>

  <p class=""><span class="c8 c6">Task &#8220;confdir&#8221;
  begins:</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">CLMSG_TASKBEGIN</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.146:20083</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.85:20081</span><span class=
  "c4">&lt;/target&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;CLMSG_TASKBEGIN&gt;</span><span class=
  "c5 c0">confdir</span><span class=
  "c2 c6">&lt;/CLMSG_TASKBEGIN&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;timestamp&gt;</span><span class=
  "c5 c0">20130305113331</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7 c10"></p>

  <p class=""><span class="c8 c6">Task &#8220;confdir&#8221; has
  terminated successfully with exit code 0:</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">CLMSG_TASKEND</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.146:20083</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.85:20081</span><span class=
  "c4">&lt;/target&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;CLMSG_TASKEND&gt;</span><span class="c5 c0">confdir
  0</span><span class="c2 c6">&lt;/CLMSG_TASKEND&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;timestamp&gt;</span><span class=
  "c5 c0">20130305113331</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c10"><span class="c4">&lt;/xml&gt;</span></p>
  <hr style="page-break-before:always;display:none;" />

  <p class="c7"></p>

  <p class=""><span class="c8 c6">Example messages for a failed
  task:</span></p>

  <p class=""><span class="c8 c6">Task &#8220;instsoft&#8221;
  begins:</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">CLMSG_TASKBEGIN</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.146:20083</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.85:20081</span><span class=
  "c4">&lt;/target&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;CLMSG_TASKBEGIN&gt;</span><span class=
  "c5 c0">instsoft</span><span class=
  "c2 c6">&lt;/CLMSG_TASKBEGIN&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;timestamp&gt;</span><span class=
  "c5 c0">20130305113331</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">An error code 472 occurs during
  execution of task &#8220;instsoft&#8221;:</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">CLMSG_TASKBEGIN</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.146:20083</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.85:20081</span><span class=
  "c4">&lt;/target&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;CLMSG_TASKBEGIN&gt;</span><span class=
  "c5 c0">error</span><span class=
  "c2 c6">&lt;/CLMSG_TASKBEGIN&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;timestamp&gt;</span><span class=
  "c5 c0">20130305113331</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">CLMSG_TASKERROR</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.146:20083</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.85:20081</span><span class=
  "c4">&lt;/target&gt;</span></p>

  <p class="c1"><span class=
  "c2 c6">&lt;CLMSG_TASKERROR&gt;</span></p>

  <p class="c1"><span class="c2 c0">&#160; instsoft 472
  warn:install_packages: various error messages</span></p>

  <p class="c1"><span class=
  "c2 c6">&lt;/CLMSG_TASKERROR&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;timestamp&gt;</span><span class=
  "c5 c0">20130305113331</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">CLMSG_TASKEND</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.146:20083</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.85:20081</span><span class=
  "c4">&lt;/target&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;CLMSG_TASKEND&gt;</span><span class="c5 c0">error
  472</span><span class="c2 c6">&lt;/CLMSG_TASKEND&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;timestamp&gt;</span><span class=
  "c5 c0">20130305113331</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">The CLMSG_TASKEND for the
  &#8220;instsoft&#8221; task that failed:</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">CLMSG_TASKEND</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.146:20083</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.85:20081</span><span class=
  "c4">&lt;/target&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;CLMSG_TASKEND&gt;</span><span class="c5 c0">instsoft
  472</span><span class="c2 c6">&lt;/CLMSG_TASKEND&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;timestamp&gt;</span><span class=
  "c5 c0">20130305113331</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7 c10"></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class=""><span class=
  "c2 c6">&lt;CLMSG_TASKBEGIN&gt;,&lt;CLMSG_TASKEND&gt;</span></p>

  <p class="c10"><span class="c0">These messages always come in
  pairs. Every</span> <span class=
  "c5 c0">CLMSG_TASKBEGIN</span><span class="c0">&#160;has a
  matching</span> <span class=
  "c5 c0">CLMSG_TASKEND</span><span class="c0">.</span></p>

  <p class=""><span class="c2 c6">&lt;CLMSG_TASKBEGIN&gt;,
  &lt;CLMSG_TASKERROR&gt;,&lt;CLMSG_TASKEND&gt;</span></p>

  <p class="c10"><span class="c0">A</span> <span class=
  "c5 c0">CLMSG_TASKERROR</span><span class="c0">&#160;is
  surrounded by</span> <span class=
  "c5 c0">CLMSG_TASKBEGIN</span><span class="c0">&#160;and</span>
  <span class="c5 c0">CLMSG_TASKEND</span><span class=
  "c0">&#160;for an</span> <span class=
  "c5 c0">"error"</span><span class="c8 c0">&#160;task. This means
  that if an error occurs during a task there will be (at least) 5
  messages:</span></p>

  <p class="c10"><span class="c5 c0">CLMSG_TASKBEGIN,
  CLMSG_TASKBEGIN, CLMSG_TASKERROR, CLMSG_TASKEND,
  CLMSG_TASKEND</span><span class="c0">. Other messages, in
  particular</span> <span class=
  "c5 c0">CLMSG_PROGRESS</span><span class="c0">&#160;and</span>
  <span class="c5 c0">CLMSG_HOOK</span><span class=
  "c0 c8">&#160;may occur between these messages.</span></p>

  <p class="c7"></p>

  <p class=""><span class=
  "c4">&lt;CLMSG_TASKERROR&gt;</span><span class="c8 c0">&#160;The
  following is (an incomplete) list of possible errors:</span></p>

  <p class="c10"><span class="c2 c0">instsoft 472
  warn:install_packages: various error messages<br />
  instsoft 421 warn:install_packages: packages missing</span></p>

  <p class="c7 c10"></p>

  <p class=""><span class="c4">&lt;timestamp&gt;,
  &lt;macaddress&gt;</span><span class="c0">&#160;see</span>
  <span class="c5 c0">CLMSG_CURRENTLY_LOGGED_IN.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <p class="c14 c7 c10"></p>

  <h3 class="" id="h.2sm8tu2tcdzu"><span class=
  "c12 c6">CLMSG_TASKDIE</span></h3>

  <p class="c14"><span class="c8 c6">Purpose:</span></p>

  <p class="c14 c10"><span class="c0">(See also</span> <span class=
  "c5 c0">CLMSG_&lt;FAI MONITOR EVENT&gt;</span><span class=
  "c8 c0">)</span></p>

  <p class="c14 c10"><span class="c0">Client&#10132;Server. Signals
  a fatal error that causes FAI to abort. The system to be
  installed is probably unusable. Log files are transmitted
  using</span> <span class=
  "c5 c0">CLMSG_save_fai_log</span><span class=
  "c0">&#160;despite</span> <span class=
  "c5 c0">CLMSG_TASKDIE</span><span class="c8 c0">.</span></p>

  <p class="c14 c7 c10"></p>

  <p class="c14"><span class="c8 c6">Example message:</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;header&gt;</span><span class=
  "c5 c0">CLMSG_TASKDIE</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.146:20083</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.85:20081</span><span class=
  "c4">&lt;/target&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;CLMSG_TASKDIE&gt;</span><span class="c5 c0">extrbase 803
  fatal:Bootstrap failed</span><span class=
  "c2 c6">&lt;/CLMSG_TASKDIE&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;timestamp&gt;</span><span class=
  "c5 c0">20130305113331</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c14 c10"><span class="c4">&lt;/xml&gt;</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">go-susi notes:</span></p>

  <p class="c10"><span class="c0">When go-susi receives this
  message, it removes the running job and sets the system's</span>
  <span class="c5 c0">faistate</span><span class=
  "c0">&#160;to</span> <span class=
  "c5 c0">"error:..."</span><span class="c0">&#160;.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="" id="h.z4re866t15e6"><span class=
  "c12 c6">CLMSG_check</span></h3>

  <p class="c14"><span class="c8 c6">Purpose:</span></p>

  <p class="c10"><span class="c0">(See also</span> <span class=
  "c5 c0">CLMSG_&lt;FAI MONITOR EVENT&gt;</span><span class=
  "c8 c0">)</span></p>

  <p class="c14 c10"><span class=
  "c0">Client&#10132;Server.Se</span><span class="c0">nt by
  gosa-si-client when it receives "check &lt;foo&gt;" via its FIFO.
  This is caused by<br /></span><span class="c2 c0">"if sendmon
  check $sendhostname; then"</span></p>

  <p class="c14 c10"><span class="c0">from FAI's</span>
  <span class="c5 c0">subroutines:task_confdir()</span><span class=
  "c8 c0">. Has no effect on the server.</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">Example message:</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;header&gt;</span><span class=
  "c5 c0">CLMSG_check</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.146:20083</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.85:20081</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;CLMSG_check&gt;</span><span class=
  "c5 c0">fooclient</span><span class=
  "c2 c6">&lt;/CLMSG_check&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;timestamp&gt;</span><span class=
  "c5 c0">20130305113331</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c14 c10"><span class=
  "c2 c6">&lt;/xml&gt;<br /></span></p>

  <p class=""><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class=""><span class=
  "c4">&lt;CLMSG_check&gt;</span><span class="c8 c0">&#160;The
  plain name of the client.</span></p>

  <p class=""><span class="c4">&lt;timestamp&gt;,
  &lt;macaddress&gt;</span> <span class="c0">see</span>
  <span class="c5 c0">CLMSG_CURRENTLY_LOGGED_IN.</span></p>
  <hr style="page-break-before:always;display:none;" />
  <a id="id.vafpk0dntk2q" name="id.vafpk0dntk2q"></a>

  <h2 class="c24" id="h.p40mxwr1vmxg"><span class="c15 c6">Query
  various information</span></h2>

  <p class=""><span class="c8 c0">The si-server manages various
  databases on behalf of GOsa.</span></p>

  <p class=""><span class="c0">The message</span> <span class=
  "c5 c0">gosa_query_fai_server</span><span class=
  "c8 c0">&#160;returns a list of all known Debian software
  repositories as well as the available releases and their
  sections.</span></p>

  <p class=""><span class="c0">The message</span> <span class=
  "c5 c0">gosa_query_fai_release</span><span class=
  "c8 c0">&#160;performs a parameterized search over the database
  of FAI classes. It allows selection by a variety of
  criteria.</span></p>

  <p class=""><span class="c0">The message</span> <span class=
  "c5 c0">gosa_query_packages_list</span><span class=
  "c8 c0">&#160;performs a parameterized search over the database
  of Debian packages. It allows selection by a variety of
  criteria.</span></p>

  <p class=""><span class="c0">The message</span> <span class=
  "c5 c0">gosa_get_available_kernel</span><span class=
  "c8 c0">&#160;returns a list of all available kernels for a
  certain release.</span></p>

  <p class=""><span class="c0">The messages</span> <span class=
  "c5 c0">gosa_show_log_by_mac,
  gosa_show_log_files_by_date_and_mac</span><span class=
  "c0">&#160;and</span> <span class=
  "c5 c0">gosa_get_log_file_by_date_and_mac</span><span class=
  "c0">&#160;are used to access the log files from
  installations/updates stored on the server. Note that
  server-server-communication does not extend to log files, so
  these messages only return those log files sent to the particular
  server via</span> <span class=
  "c2 c0">CLMSG_save_fai_log.</span></p>

  <p class=""><span class="c0">The messages</span> <span class=
  "c5 c0">gosa_query_audit</span><span class=
  "c0">&#160;and</span><span class=
  "c5 c0">&#160;gosa_query_audit_aggregate</span><span class=
  "c0">&#160;are used to access audit data stored on the server.
  Note that server-server-communication does not extend to audit
  files, so these messages only return those log files sent to the
  particular server via</span> <span class=
  "c5 c0">CLMSG_save_fai_log.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c6">Note:</span></p>

  <p class="c10"><span class="c0">The transition of GOsa from
  accessing LDAP directly to using the si-server is very
  incomplete. In many places GOsa does its own LDAP reading and
  writing and maintains its own state. Whenever an operation in
  GOsa takes very long, that is usually the reason.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="c27" id="h.vnc6qrea3m0g"><span class=
  "c12 c6">gosa_query_fai_server</span></h3>

  <p class=""><span class="c6">Purpose:</span></p>

  <p class="c10"><span class="c8 c0">GOsa&#11020;Server. Return a
  list of all known Debian software repositories as well as the
  available releases and their sections.</span></p>

  <p class="c7 c10"></p>

  <p class=""><span class="c6">Example message:</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">gosa_query_fai_server</span><span class=
  "c4">&lt;/header&gt;<br />
  &lt;source&gt;</span><span class="c5 c0">GOSA</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">GOSA</span><span class="c2 c6">&lt;/target&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">Example reply:</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">query_fai_server</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">GOSA</span><span class="c2 c6">&lt;/target&gt;</span></p>

  <p class="c1"><span class="c2 c6">&lt;answer1&gt;</span></p>

  <p class="c16"><span class=
  "c4">&lt;timestamp&gt;</span><span class=
  "c5 c0">20130304093211</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c16"><span class=
  "c4">&lt;fai_release&gt;</span><span class=
  "c5 c0">halut/2.4.0</span><span class=
  "c2 c6">&lt;/fai_release&gt;</span></p>

  <p class="c16"><span class=
  "c4">&lt;repopath&gt;</span><span class=
  "c5 c0">halut-updates</span><span class=
  "c2 c6">&lt;/repopath&gt;</span></p>

  <p class="c16"><span class="c4">&lt;tag&gt;</span><span class=
  "c5 c0">1154342234048479900</span><span class=
  "c2 c6">&lt;/tag&gt;</span></p>

  <p class="c16"><span class="c4">&lt;server&gt;</span><span class=
  "c5 c0">http://vts-susi.example.de/repo</span><span class=
  "c2 c6">&lt;/server&gt;</span></p>

  <p class="c16"><span class=
  "c4">&lt;sections&gt;</span><span class=
  "c5 c0">main,contrib,non-free,lhm,ff</span><span class=
  "c2 c6">&lt;/sections&gt;</span></p>

  <p class="c1"><span class="c2 c6">&lt;/answer1&gt;</span></p>

  <p class="c16"><span class="c2 c0">...</span></p>

  <p class="c1"><span class="c4">&lt;answerN&gt;</span><span class=
  "c5 c0">...</span><span class="c4">&lt;/answerN&gt;<br />
  &lt;session_id&gt;</span><span class=
  "c5 c0">1105</span><span class=
  "c2 c6">&lt;/session_id&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7 c10"></p>

  <p class=""><span class="c8 c6">The reply elements have the
  following meaning:</span></p>

  <p class=""><span class="c6">&lt;server&gt;</span><span class=
  "c0">&#160;The repository URL of the directory that contains the
  directories</span> <span class="c5 c0">dists/</span><span class=
  "c0">&#160;and</span> <span class=
  "c5 c0">pool/</span><span class="c8 c0">.</span></p>

  <p class=""><span class="c6">&lt;repopath&gt;</span></p>

  <p class="c10"><span class="c0">The path relative to the</span>
  <span class="c5 c0">dists/</span><span class="c0">&#160;directory
  of the directory that contains the</span> <span class=
  "c5 c0">Release</span><span class="c8 c0">&#160;file.</span></p>

  <p class="c10"><span class="c0">If the same server has multiple
  repository paths, each one has its own</span> <span class=
  "c6">&lt;answerX&gt;</span><span class=
  "c8 c0">&#160;element.</span></p>

  <p class=""><span class="c6">&lt;fai_release&gt;</span></p>

  <p class="c10"><span class="c0">The FAI release to which the
  repository path belongs. Typically there is one repository path
  with the same name as the FAI release and additional repository
  paths that can optionally be used via additional sources.list
  lines (typical examples are</span> <span class=
  "c5 c0">"*-backports"</span><span class="c0">&#160;and</span>
  <span class="c2 c0">"*-updates").</span></p>

  <p class=""><span class="c6">&lt;timestamp&gt;</span><span class=
  "c8 c0">&#160;The time when go-susi last checked this
  entry.</span></p>

  <p class=""><span class="c6">&lt;tag&gt;</span><span class=
  "c0 c18">&#160;(optional)</span></p>

  <p class="c10"><span class="c0">The gosaUnitTag of the repository
  server (if it has one). The reply may contain servers with
  different unit tags.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="c27" id="h.1c4dc8mqlioo"><span class=
  "c12 c6">gosa_query_fai_release</span></h3>

  <p class=""><span class="c6">Purpose:</span></p>

  <p class="c10"><span class="c8 c0">GOsa&#11020;Server. Query the
  FAI classes database.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c6">Example message:</span></p>

  <p class=""><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c10"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">gosa_query_fai_release</span><span class=
  "c4">&lt;/header&gt;<br />
  &lt;target&gt;</span><span class="c5 c0">GOSA</span><span class=
  "c4">&lt;/target&gt;<br />
  &lt;source&gt;</span><span class="c5 c0">GOSA</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;where&gt;</span></p>

  <p class="c1"><span class="c2 c6">&lt;clause&gt;</span></p>

  <p class="c16"><span class=
  "c2 c6">&lt;phrase&gt;</span></p><a id="id.vbpk5t3411tq" name=
  "id.vbpk5t3411tq"></a>

  <p class="c23"><span class=
  "c4">&lt;fai_release&gt;</span><span class=
  "c5 c0">plophos/4.1.0</span><span class=
  "c2 c6">&lt;/fai_release&gt;</span></p>

  <p class="c16"><span class="c2 c6">&lt;/phrase&gt;</span></p>

  <p class="c1"><span class="c2 c6">&lt;/clause&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/where&gt;</span></p>

  <p class=""><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class=""><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class=""><span class="c8 c6">&lt;where&gt;</span></p>

  <p class="c10"><span class="c0">The query syntax is the same as
  for</span> <span class=
  "c5 c0">gosa_query_jobdb</span><span class="c0">. The available
  column names are</span> <span class=
  "c6">&lt;timestamp&gt;</span><span class="c0">,</span>
  <span class="c6">&lt;fai_release&gt;</span><span class=
  "c0">,</span> <span class="c6">&lt;type&gt;</span><span class=
  "c0">,</span> <span class="c6">&lt;class&gt;,
  &lt;tag&gt;</span><span class="c0">&#160;and</span> <span class=
  "c6">&lt;state&gt;</span><span class="c8 c0">. Their meanings are
  described below in the explanation of the reply
  elements.</span></p>

  <p class="c10"><span class="c6">Note:
  &lt;tag&gt;</span><span class="c0">&#160;is a go-susi extension.
  See the explanation of the corresponding reply element
  below.</span></p>

  <p class=""><span class="c8 c6">Example reply:</span></p>

  <p class=""><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c10"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">query_fai_release</span><span class=
  "c4">&lt;/header&gt;<br />
  &lt;source&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c4">&lt;/source&gt;<br />
  &lt;target&gt;</span><span class="c5 c0">GOSA</span><span class=
  "c2 c6">&lt;/target&gt;<br />
  &lt;answer1&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;timestamp&gt;</span><span class=
  "c5 c0">20130304093210</span><span class=
  "c4">&lt;/timestamp&gt;<br />
  &lt;fai_release&gt;</span><span class=
  "c5 c0">plophos/4.1.0</span><span class=
  "c4">&lt;/fai_release&gt;<br />
  &lt;type&gt;</span><span class=
  "c5 c0">FAIscript</span><span class="c4">&lt;/type&gt;<br />
  &lt;class&gt;</span><span class=
  "c5 c0">CLASSNAME</span><span class=
  "c2 c6">&lt;/class&gt;</span></p>

  <p class="c1"><span class="c4">&lt;tag&gt;</span><span class=
  "c5 c0">345</span><span class="c2 c6">&lt;/tag&gt;<br />
  &lt;state&gt;&lt;/state&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/answer1&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;answer2&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;timestamp&gt;</span><span class=
  "c5 c0">20130304093210</span><span class=
  "c4">&lt;/timestamp&gt;<br />
  &lt;fai_release&gt;</span><span class=
  "c5 c0">plophos/4.1.0</span><span class=
  "c4">&lt;/fai_release&gt;<br />
  &lt;type&gt;</span><span class=
  "c5 c0">FAItemplate</span><span class="c4">&lt;/type&gt;<br />
  &lt;class&gt;</span><span class=
  "c5 c0">CLASSNAME</span><span class=
  "c2 c6">&lt;/class&gt;</span></p>

  <p class="c1"><span class="c4">&lt;tag&gt;</span><span class=
  "c5 c0">934757</span><span class="c2 c6">&lt;/tag&gt;<br />
  &lt;state&gt;&lt;/state&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/answer2&gt;</span></p>

  <p class="c10"><span class="c2 c6">...</span></p>

  <p class="c10"><span class=
  "c4">&lt;answerN&gt;</span><span class="c5 c0">...</span><span class="c4">&lt;/answerN&gt;<br />

  &lt;session_id&gt;</span><span class=
  "c5 c0">1013</span><span class=
  "c2 c6">&lt;/session_id&gt;</span></p>

  <p class=""><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">The reply elements have the
  following meaning:</span></p>

  <p class=""><span class="c6">&lt;timestamp&gt;</span></p>

  <p class="c10"><span class="c8 c0">The time (local server time)
  when go-susi last checked this entry.</span></p>

  <p class=""><span class="c8 c6">&lt;fai_release&gt;</span></p>

  <p class="c10"><span class="c8 c0">The release the answer belongs
  to, i.e. the release this class is available in. Only one release
  is listed per answer. If the query requested information for
  multiple releases that offer the same FAI class, each is listed
  in its own answer.</span></p>

  <p class=""><span class="c6">&lt;type&gt;</span></p>

  <p class="c10"><span class="c0">The type of the class. Possible
  values are</span> <span class="c5 c0">FAIhook, FAIpackageList,
  FAIpartitionTable, FAIprofile, FAIscript,
  FAItemplate</span><span class="c0 c18">&#160;</span><span class=
  "c0">and</span><span class="c0 c18">&#160;</span><span class=
  "c5 c0">FAIvariable</span><span class="c8 c0">.<br />
  Only one type is listed per answer element, even if the query
  returns multiple types with the same class name.</span></p>

  <p class=""><span class="c6">&lt;class&gt;</span></p>

  <p class="c10"><span class="c8 c0">The name of the FAI class
  described in the answer.</span></p>

  <p class=""><span class="c6">&lt;tag&gt;</span><span class=
  "c0 c18">&#160;(optional)</span></p>

  <p class="c10"><span class="c8 c0">The gosaUnitTag of the FAI
  class (if it has one). The reply may contain classes with
  different unit tags.</span></p>

  <p class="c10"><span class="c6">Note:</span><span class=
  "c0">&#160;This is a go-susi extension. gosa-si-server does not
  include</span> <span class="c6">&lt;tag&gt;</span><span class=
  "c0">&#160;in its reply and does not support filtering by tag in
  the</span> <span class="c6">&lt;phrase&gt;</span><span class=
  "c8 c0">&#160;element. gosa-si-server always reports all FAI
  classes regardless of their gosaUnitTag.</span></p>

  <p class=""><span class="c6">&lt;state&gt;</span> <span class=
  "c8 c0">The following values are possible:</span></p>

  <p class="c10"><span class="c0 c18">empty
  string:</span><span class="c8 c0">&#160;This class has no special
  properties.</span></p>

  <p class="c10"><span class="c5 c0">freeze:</span><span class=
  "c8 c0">&#160;modifications to this class via GOsa are not
  permitted.</span></p>

  <p class="c10"><span class="c5 c0">branch:</span><span class=
  "c8 c0">&#160;deprecated. go-susi never reports this
  state.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">go-susi note:</span></p>

  <p class="c10"><span class="c0">In addition to FAI classes
  actually present in LDAP, go-susi reports pseudo-classes for
  all</span> <span class="c5 c0">Repository</span><span class=
  "c0">&#160;attributes found in the output from</span>
  <span class="c5 c0">package-list-hook.</span><span class=
  "c0">&#160;Refer to the section describing that hook for more
  information.</span></p>

  <p class=""><span class="c8 c6">GOsa note:</span></p>

  <p class="c10"><span class="c0">GOsa 2.7 presents all types of
  FAI class with the same name in one integrated entry. If at least
  one type has FAIstate</span> <span class=
  "c5 c0">freeze</span><span class="c0">, GOsa will present a lock
  icon with the entry. However the individual parts remain
  independent and if e.g. a</span> <span class=
  "c5 c0">FAIhook</span><span class="c0">&#160;of name FOO has
  state freeze but a</span> <span class=
  "c5 c0">FAIscript</span><span class="c0">&#160;of name FOO
  doesn&#8217;t, then GOsa permits editing of the</span>
  <span class="c5 c0">FAIscript</span><span class="c0">, even
  though it prevents editing of the hook.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="c27" id="h.k0ukjz6z8za5"><span class=
  "c12 c6">gosa_query_packages_list</span></h3>

  <p class=""><span class="c8 c6">Purpose:</span></p>

  <p class="c10"><span class="c0">GOsa&#11020;Server. Query the
  Debian packages database.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c6">Example message:</span></p>

  <p class=""><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c10"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">gosa_query_packages_list</span><span class=
  "c4">&lt;/header&gt;<br />
  &lt;target&gt;</span><span class="c5 c0">GOSA</span><span class=
  "c4">&lt;/target&gt;<br />
  &lt;source&gt;</span><span class="c5 c0">GOSA</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c10"><span class="c4">&lt;select&gt;</span><span class=
  "c5 c0">distribution</span><span class=
  "c2 c6">&lt;/select&gt;</span></p>

  <p class="c10"><span class="c4">&lt;select&gt;</span><span class=
  "c5 c0">package</span><span class=
  "c2 c6">&lt;/select&gt;</span></p>

  <p class="c10"><span class="c4">&lt;select&gt;</span><span class=
  "c5 c0">version</span><span class=
  "c2 c6">&lt;/select&gt;</span></p>

  <p class="c10"><span class="c4">&lt;select&gt;</span><span class=
  "c5 c0">section</span><span class=
  "c2 c6">&lt;/select&gt;</span></p>

  <p class="c10"><span class="c4">&lt;select&gt;</span><span class=
  "c5 c0">description</span><span class=
  "c2 c6">&lt;/select&gt;</span></p>

  <p class="c10"><span class="c4">&lt;select&gt;</span><span class=
  "c5 c0">timestamp</span><span class=
  "c2 c6">&lt;/select&gt;</span></p>

  <p class="c10"><span class="c4">&lt;select&gt;</span><span class=
  "c5 c0">template</span><span class=
  "c2 c6">&lt;/select&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;where&gt;</span></p>

  <p class="c1"><span class="c2 c6">&lt;clause&gt;</span></p>

  <p class="c16"><span class="c2 c6">&lt;phrase&gt;</span></p>

  <p class="c23"><span class=
  "c4">&lt;distribution&gt;</span><span class=
  "c5 c0">plophos</span><span class=
  "c2 c6">&lt;/distribution&gt;</span></p>

  <p class="c16"><span class="c2 c6">&lt;/phrase&gt;</span></p>

  <p class="c1"><span class="c2 c6">&lt;/clause&gt;</span></p>

  <p class="c1"><span class="c2 c6">&lt;clause&gt;</span></p>

  <p class="c16"><span class=
  "c4">&lt;connector&gt;</span><span class=
  "c5 c0">OR</span><span class=
  "c2 c6">&lt;/connector&gt;</span></p>

  <p class="c16"><span class="c2 c6">&lt;phrase&gt;</span></p>

  <p class="c23"><span class=
  "c4">&lt;operator&gt;</span><span class=
  "c5 c0">like</span><span class=
  "c2 c6">&lt;/operator&gt;</span></p>

  <p class="c23"><span class=
  "c4">&lt;package&gt;</span><span class="c5 c0">srv-customize-default-parent-servers</span><span class="c2 c6">&lt;/package&gt;</span></p>

  <p class="c16"><span class="c2 c6">&lt;/phrase&gt;</span></p>

  <p class="c16"><span class="c2 c6">&lt;phrase&gt;</span></p>

  <p class="c23"><span class=
  "c4">&lt;operator&gt;</span><span class=
  "c5 c0">like</span><span class=
  "c2 c6">&lt;/operator&gt;</span></p>

  <p class="c23"><span class=
  "c4">&lt;package&gt;</span><span class="c5 c0">srv-reprepro-statt-debmirror</span><span class="c2 c6">&lt;/package&gt;</span></p>

  <p class="c16"><span class="c2 c6">&lt;/phrase&gt;</span></p>

  <p class="c1"><span class="c2 c6">&lt;/clause&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/where&gt;</span></p>

  <p class=""><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class=""><span class="c6">&lt;where&gt;</span> <span class=
  "c0 c18">(exactly 1)</span><span class="c8 c0">&#160;</span></p>

  <p class="c10"><span class="c0">The query syntax is the same as
  for</span> <span class=
  "c5 c0">gosa_query_jobdb</span><span class="c0">. The available
  column names are</span> <span class=
  "c6">&lt;distribution&gt;</span><span class="c0">,</span>
  <span class="c6">&lt;package&gt;</span><span class="c0">,</span>
  <span class="c6">&lt;version&gt;</span><span class="c0">,</span>
  <span class="c6">&lt;section&gt;,
  &lt;description&gt;</span><span class="c0">,</span> <span class=
  "c6">&lt;timestamp&gt;</span><span class="c0">&#160;and</span>
  <span class="c6">&lt;template&gt;</span><span class="c8 c0">.
  Their meanings are described below in the explanation of the
  reply elements.</span></p>

  <p class=""><span class="c6">&lt;select&gt;</span><span class=
  "c0">&#160;</span><span class="c28 c0 c31 c18">(0 or
  more)</span></p>

  <p class="c10"><span class="c0">Each</span> <span class=
  "c6">&lt;select&gt;</span><span class="c0">&#160;element contains
  the name of a column that should be returned for each answer
  matching the query. If there is no</span> <span class=
  "c6">&lt;select&gt;</span><span class="c8 c0">&#160;element, all
  columns are to be returned.</span></p>

  <p class="c10"><span class="c8 c6">Note:</span></p>

  <p class="c1"><span class="c0">At this time go-susi
  ignores</span> <span class="c6">&lt;select&gt;</span><span class=
  "c8 c0">&#160;and will always return all columns.</span></p>

  <p class="c7"></p>
  <hr style="page-break-before:always;display:none;" />

  <p class="c7"></p>

  <p class=""><span class="c8 c6">Example reply:</span></p>

  <p class=""><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c10"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">query_packages_list</span><span class=
  "c4">&lt;/header&gt;<br />
  &lt;source&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c4">&lt;/source&gt;<br />
  &lt;target&gt;</span><span class="c5 c0">GOSA</span><span class=
  "c2 c6">&lt;/target&gt;<br />
  &lt;answer1&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;timestamp&gt;</span><span class=
  "c5 c0">20130317185123</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;distribution&gt;</span><span class=
  "c5 c0">plophos</span><span class=
  "c2 c6">&lt;/distribution&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;package&gt;</span><span class=
  "c5 c0">srv-customize-default-parent-servers</span><span class=
  "c2 c6">&lt;/package&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;version&gt;</span><span class="c5 c0">1.0</span><span class=
  "c2 c6">&lt;/version&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;section&gt;</span><span class=
  "c5 c0">updates/misc</span><span class=
  "c2 c6">&lt;/section&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;description&gt;</span><span class=
  "c5 c0">VWViZXIgZGViY29uZ...dlc2V0enQ=</span><span class=
  "c2 c6">&lt;/description&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;template&gt;</span><span class=
  "c5 c0">ClRlbXBsYXRlOi...wgdXNlCgo=</span><span class=
  "c2 c6">&lt;/template&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/answer1&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;answer2&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;timestamp&gt;</span><span class=
  "c5 c0">20130317185123</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;distribution&gt;</span><span class=
  "c5 c0">plophos</span><span class=
  "c2 c6">&lt;/distribution&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;package&gt;</span><span class=
  "c5 c0">srv-reprepro-statt-debmirror</span><span class=
  "c2 c6">&lt;/package&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;version&gt;</span><span class="c5 c0">1.6</span><span class=
  "c2 c6">&lt;/version&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;section&gt;</span><span class=
  "c5 c0">updates/misc</span><span class=
  "c2 c6">&lt;/section&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;description&gt;</span><span class=
  "c5 c0">QWVuZGVyd...bmRldCB3aXJkLg==</span><span class=
  "c2 c6">&lt;/description&gt;</span></p>

  <p class="c10"><span class="c2 c6">&#160; &#160;
  &lt;template&gt;&lt;/template&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/answer2&gt;</span></p>

  <p class="c10"><span class="c2 c6">...</span></p>

  <p class="c10"><span class=
  "c4">&lt;answerN&gt;</span><span class="c5 c0">...</span><span class="c4">&lt;/answerN&gt;<br />

  &lt;session_id&gt;</span><span class=
  "c5 c0">1013</span><span class=
  "c2 c6">&lt;/session_id&gt;</span></p>

  <p class=""><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">The reply elements have the
  following meaning:</span></p>

  <p class=""><span class="c6">&lt;timestamp&gt;</span><span class=
  "c8 c0">The time (local server time) when go-susi last updated
  the packages database.</span></p>

  <p class=""><span class="c8 c6">&lt;distribution&gt;</span></p>

  <p class="c10"><span class="c8 c0">The release the answer belongs
  to, i.e. the release the package is available in. Only one
  release is listed per answer. If the query requested information
  for multiple releases that include the same package, each is
  listed in its own answer.</span></p>

  <p class=""><span class="c6">&lt;package&gt;</span><span class=
  "c0">&#160;The name of the package described by the</span>
  <span class="c6">&lt;answerX&gt;</span><span class=
  "c8 c0">&#160;element.</span></p>

  <p class=""><span class="c8 c6">&lt;version&gt;</span></p>

  <p class="c10"><span class="c0">&#160;The version of the package.
  A package may exist in multiple versions even within the same
  distribution. In that case each version will have its own</span>
  <span class="c6">&lt;answerX&gt;</span><span class=
  "c8 c0">&#160;element.</span></p>

  <p class=""><span class="c6">&lt;section&gt;</span><span class=
  "c8 c0">Guess what.</span></p>

  <p class=""><span class="c8 c6">&lt;description&gt;</span></p>

  <p class="c10"><span class="c0">The base64 encoding of the short
  description of the package, i.e. the text from the Debian</span>
  <span class="c5 c0">control</span><span class="c0">&#160;file
  that starts after</span> <span class=
  "c5 c0">"Description:"</span><span class="c0">&#160;and extends
  to the end of the line. Neither</span> <span class=
  "c5 c0">"Description:"</span><span class="c0">&#160;nor the
  newline at the end of the line are included in the</span>
  <span class="c6">&lt;description&gt;</span><span class=
  "c8 c0">&#160;element.</span></p>

  <p class=""><span class="c8 c6">&lt;template&gt;</span></p>

  <p class="c10"><span class="c0">If the Debian package has
  a</span> <span class="c5 c0">templates</span><span class=
  "c0">&#160;file describing debconf-parameters, the</span>
  <span class="c6">&lt;template&gt;</span><span class=
  "c8 c0">&#160;element contains this file in its entirety encoded
  in base64.</span></p>

  <p class=""><span class="c8 c6">gosa-si-server note:</span></p>

  <p class="c10"><span class="c0">As always gosa-si-server inserts
  spurious whitespace into the base64 encodings.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="c27" id="h.3ws61p27du89"><span class=
  "c12 c6">gosa_get_available_kernel</span></h3>

  <p class=""><span class="c6">Purpose:</span></p>

  <p class="c10"><span class="c8 c0">GOsa&#11020;Server. Return a
  list of all available kernels for a certain release.</span></p>

  <p class="c10"><span class="c0">go-susi generates this list from
  the output of an external program specified by the configuration
  option</span> <span class=
  "c5 c0">kernel-list-hook.</span><span class="c0">&#160;The
  default is</span> <span class=
  "c5 c0">/usr/lib/go-susi/generate_kernel_list.</span></p>

  <p class="c7 c10"></p>

  <p class=""><span class="c6">Example message:</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">gosa_get_available_kernel</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">GOSA</span><span class="c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">GOSA</span><span class="c2 c6">&lt;/target&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;fai_release&gt;</span><span class=
  "c5 c0">plophos/4.1.0</span><span class=
  "c2 c6">&lt;/fai_release&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">Example reply:</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">get_available_kernel</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">GOSA</span><span class="c2 c6">&lt;/target&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;session_id&gt;</span><span class=
  "c5 c0">899</span><span class=
  "c2 c6">&lt;/session_id&gt;</span></p>

  <p class="c1"><span class=
  "c2 c6">&lt;get_available_kernel&gt;&lt;/get_available_kernel&gt;</span></p>

  <p class="c1"><span class="c4">&lt;answer1&gt;</span><span class=
  "c5 c0">vmlinuz-2.6.32-44-generic</span><span class=
  "c2 c6">&lt;/answer1&gt;</span></p>

  <p class="c1"><span class="c4">&lt;answer2&gt;</span><span class=
  "c5 c0">vmlinuz-3.2.0-24-generic</span><span class=
  "c2 c6">&lt;/answer2&gt;</span></p>

  <p class="c1"><span class="c2 c6">&#160;...</span></p>

  <p class="c1"><span class="c4">&lt;answerN&gt;</span><span class=
  "c5 c0">default</span><span class=
  "c2 c6">&lt;/answerN&gt;</span></p>

  <p class="c10"><span class="c4">&lt;/xml&gt;</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="c27 c39" id="h.28xo9vfahju"></h3>

  <h3 class="c27" id="h.n4mrnc8f9h1c"><span class=
  "c12 c6">gosa_show_log_by_mac</span></h3>

  <p class=""><span class="c8 c6">Purpose:</span></p>

  <p class="c10"><span class="c0">GOsa&#11020;Server. Returns all
  subdirectories of log files within the log file directory of the
  machine selected by the</span> <span class=
  "c6">&lt;mac&gt;</span><span class="c8 c0">&#160;element. The MAC
  address is case-insensitive.</span></p>

  <p class="c7 c10"></p>

  <p class=""><span class="c6">Example message:</span></p>

  <p class=""><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class=""><span class="c4">&#160;
  &lt;header&gt;</span><span class=
  "c5 c0">gosa_show_log_by_mac</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class=""><span class="c4">&#160;
  &lt;target&gt;</span><span class="c5 c0">GOSA</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class=""><span class="c4">&#160;
  &lt;source&gt;</span><span class="c5 c0">GOSA</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class=""><span class="c4">&#160;
  &lt;mac&gt;</span><span class="c5 c0">00:16:36:7c:db:3f</span><span class="c2 c6">&lt;/mac&gt;</span></p>

  <p class=""><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c6">Example reply:</span></p>

  <p class=""><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c10"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">show_log_by_mac</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c10"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c10"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">GOSA</span><span class="c2 c6">&lt;/target&gt;</span></p>

  <p class="c10"><span class=
  "c4">&lt;mac_00_16_36_7c_db_3f&gt;</span><span class=
  "c5 c0">install_20130304_112529</span><span class=
  "c2 c6">&lt;/mac_00_16_36_7c_db_3f&gt;</span></p>

  <p class="c10"><span class=
  "c4">&lt;mac_00_16_36_7c_db_3f&gt;</span><span class=
  "c5 c0">softupdate_20130207_155242</span><span class=
  "c2 c6">&lt;/mac_00_16_36_7c_db_3f&gt;</span></p>

  <p class="c10"><span class="c2 c6">...</span></p>

  <p class="c10"><span class=
  "c2 c6">&lt;show_log_by_mac&gt;&lt;/show_log_by_mac&gt;</span></p>

  <p class="c10"><span class=
  "c4">&lt;session_id&gt;</span><span class=
  "c5 c0">260</span><span class=
  "c2 c6">&lt;/session_id&gt;</span></p>

  <p class=""><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">The reply elements have the
  following meaning:</span></p>

  <p class=""><span class="c8 c6">&lt;mac_...&gt;</span></p>

  <p class="c10"><span class="c0">This element corresponds to
  the</span> <span class="c6">&lt;mac&gt;</span><span class=
  "c0">&#160;element in the request, but is always lowercase, even
  if the MAC address in</span> <span class=
  "c6">&lt;mac&gt;</span><span class="c8 c0">&#160;was
  not.</span></p>

  <p class="c10"><span class="c8 c0">For each subdirectory in the
  system&#8217;s log directory there is one element.</span></p>

  <p class="c10"><span class="c0">If no log files are available,
  the answer will not contain any</span> <span class=
  "c6">&lt;mac...&gt;</span><span class=
  "c8 c0">&#160;elements.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <p class="c7 c10"></p>

  <h3 class="c27" id="h.mgjs4al2n8iv"><span class=
  "c12 c6">gosa_show_log_files_by_date_and_mac</span></h3>

  <p class=""><span class="c8 c6">Purpose:</span></p>

  <p class="c10"><span class="c8 c0">GOsa&#11020;Server. Get the
  list of log files contained in a specific subdirectory of a
  machine&#8217;s log file directory.</span></p>

  <p class="c7 c10"></p>

  <p class=""><span class="c6">Example message:</span></p>

  <p class=""><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c10"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">gosa_show_log_files_by_date_and_mac</span><span class=
  "c4">&lt;/header&gt;<br />
  &lt;target&gt;</span><span class="c5 c0">GOSA</span><span class=
  "c4">&lt;/target&gt;<br />
  &lt;source&gt;</span><span class="c5 c0">GOSA</span><span class=
  "c4">&lt;/source&gt;<br />
  &lt;date&gt;</span><span class=
  "c5 c0">softupdate_20130207_151808</span><span class=
  "c4">&lt;/date&gt;<br />
  &lt;mac&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/mac&gt;</span></p>

  <p class=""><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class=""><span class="c6">&lt;mac&gt;</span><span class=
  "c8 c0">&#160;The MAC address (case-insensitive) of the machine
  for which to list log files.</span></p>

  <p class=""><span class="c6">&lt;date&gt;</span><span class=
  "c8 c0">&#160;The subdirectory name within the machine&#8217;s
  log file directory.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c6">Example reply:</span><span class=
  "c0"><br /></span><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c10"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">show_log_files_by_date_and_mac</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c10"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c4">&lt;/source&gt;<br />
  &lt;target&gt;</span><span class="c5 c0">GOSA</span><span class=
  "c2 c6">&lt;/target&gt;<br />
  &lt;show_log_files_by_date_and_mac&gt;</span></p>

  <p class="c10"><span class="c2 c0">&#160; ldap2fai.log</span></p>

  <p class="c10"><span class=
  "c2 c6">&lt;/show_log_files_by_date_and_mac&gt;</span></p>

  <p class="c10"><span class="c4">&#160;</span> <span class=
  "c5 c0">...</span><span class="c4"><br />
  &lt;show_log_files_by_date_and_mac&gt;<br /></span><span class=
  "c2 c0">&#160; shell.log</span></p>

  <p class="c10"><span class=
  "c4">&lt;/show_log_files_by_date_and_mac&gt;<br />
  &lt;session_id&gt;</span><span class=
  "c5 c0">1405</span><span class=
  "c2 c6">&lt;/session_id&gt;</span></p>

  <p class="c10"><span class=
  "c2 c6">&lt;show_log_files_by_date_and_mac&gt;&lt;/show_log_files_by_date_and_mac&gt;</span></p>

  <p class=""><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">The reply elements have the
  following meaning:</span></p>

  <p class=""><span class=
  "c6">&lt;show_log_files_by_date_and_mac&gt;</span></p>

  <p class="c10"><span class="c8 c0">Each of these elements
  contains the name of one of the log files present in the
  requested subdirectory.</span></p>

  <p class="c10"><span class="c6">Note:</span></p>

  <p class="c1"><span class="c0">One of the returned</span>
  <span class=
  "c6">&lt;show_log_files_by_date_and_mac&gt;</span><span class=
  "c8 c0">&#160;is always empty.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <p class="c7"></p>

  <h3 class="c27" id="h.87z05qg5bmin"><span class=
  "c12 c6">gosa_get_log_file_by_date_and_mac</span></h3>

  <p class=""><span class="c8 c6">Purpose:</span></p>

  <p class="c10"><span class="c8 c0">GOsa&#11020;Server. Get the
  contents of a specific log file.</span></p>

  <p class="c7 c10"></p>

  <p class=""><span class="c6">Example message:</span></p>

  <p class=""><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c10"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">gosa_get_log_file_by_date_and_mac</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c10"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">GOSA</span><span class="c2 c6">&lt;/target&gt;</span></p>

  <p class="c10"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">GOSA</span><span class="c2 c6">&lt;/source&gt;</span></p>

  <p class="c10"><span class="c4">&lt;date&gt;</span><span class=
  "c5 c0">install_20130204_152626</span><span class=
  "c2 c6">&lt;/date&gt;</span></p>

  <p class="c10"><span class="c4">&lt;mac&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/mac&gt;</span></p>

  <p class="c10"><span class=
  "c4">&lt;log_file&gt;</span><span class=
  "c5 c0">foo.log</span><span class=
  "c2 c6">&lt;/log_file&gt;</span></p>

  <p class=""><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class=""><span class="c6">&lt;mac&gt;</span><span class=
  "c8 c0">&#160;The MAC address (case-insensitive) of the machine
  for which to read a log file.</span></p>

  <p class=""><span class="c6">&lt;date&gt;</span><span class=
  "c8 c0">&#160;The subdirectory name within the machine&#8217;s
  log file directory where the log file is found.</span></p>

  <p class=""><span class="c6">&lt;log_file&gt;</span><span class=
  "c8 c0">&#160;The name of the log file to return.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c6">Example reply:</span></p>

  <p class=""><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c10"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">get_log_file_by_date_and_mac</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c10"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c10"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">GOSA</span><span class="c2 c6">&lt;/target&gt;</span></p>

  <p class="c10"><span class=
  "c4">&lt;foo.log&gt;</span><span class="c5 c0">VXBkY....i4uCg==</span><span class="c2 c6">&lt;/foo.log&gt;</span></p>

  <p class="c10"><span class=
  "c2 c6">&lt;get_log_file_by_date_and_mac&gt;&lt;/get_log_file_by_date_and_mac&gt;</span></p>

  <p class="c10"><span class=
  "c4">&lt;session_id&gt;</span><span class=
  "c5 c0">843</span><span class=
  "c2 c6">&lt;/session_id&gt;</span></p>

  <p class=""><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">The reply elements have the
  following meaning:</span></p>

  <p class=""><span class="c6">&lt;foo.log&gt;</span></p>

  <p class="c10"><span class="c0">The name of the element
  corresponds to the contents of the</span> <span class=
  "c6">&lt;log_file&gt;</span><span class="c8 c0">&#160;element in
  the request. The contents are the base64-encoded file
  contents.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">GOsa note:</span></p>

  <p class="c10"><span class="c0">When the tab &#8220;installation
  logs&#8221; for a specific machine is accessed for the first
  time, no log file is selected and GOsa creates an incorrect
  request where</span> <span class=
  "c6">&lt;log_file&gt;</span><span class="c8 c0">&#160;has the
  value &#8220;0&#8221;. gosa-si-server answers this invalid
  request with a likewise broken reply.</span></p>

  <p class="c7 c10"></p>
  <hr style="page-break-before:always;display:none;" />

  <p class="c7 c10"></p>

  <h3 class="" id="h.pff3kf2jf7hm"><span class=
  "c12 c6">gosa_query_audit</span></h3>

  <p class=""><span class="c8 c6">Purpose:</span></p>

  <p class="c10"><span class="c8 c0">GOsa&#11020;Server. Query the
  audit logs (see fai-audit-hook).</span></p>

  <p class="c7"></p>

  <p class=""><span class="c6">Example message:</span></p>

  <p class=""><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c10"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">gosa_query_audit</span><span class=
  "c4">&lt;/header&gt;<br />
  &lt;audit&gt;</span><span class=
  "c5 c0">packages</span><span class=
  "c2 c6">&lt;/audit&gt;</span></p>

  <p class="c10"><span class="c4">&lt;tstart&gt;</span><span class=
  "c5 c0">20161231235959</span><span class=
  "c2 c6">&lt;/tstart&gt;</span></p>

  <p class="c10"><span class="c4">&lt;tend&gt;</span><span class=
  "c5 c0">20171231235959</span><span class=
  "c2 c6">&lt;/tend&gt;</span></p>

  <p class="c10"><span class=
  "c2 c6">&lt;includeothers&gt;&lt;/includeothers&gt;</span></p>

  <p class="c10"><span class="c4">&lt;select&gt;</span><span class=
  "c5 c0">version</span><span class=
  "c2 c6">&lt;/select&gt;</span></p>

  <p class="c10"><span class="c4">&lt;select&gt;</span><span class=
  "c5 c0">status</span><span class=
  "c2 c6">&lt;/select&gt;</span></p>

  <p class="c10"><span class="c4">&lt;select&gt;</span><span class=
  "c5 c0">update</span><span class=
  "c2 c6">&lt;/select&gt;</span></p>

  <p class="c10"><span class="c4">&lt;select&gt;</span><span class=
  "c5 c0">macaddress</span><span class=
  "c2 c6">&lt;/select&gt;</span></p>

  <p class="c10"><span class="c4">&lt;select&gt;</span><span class=
  "c5 c0">ipaddress</span><span class=
  "c2 c6">&lt;/select&gt;</span></p>

  <p class="c10"><span class="c4">&lt;select&gt;</span><span class=
  "c5 c0">hostname</span><span class=
  "c2 c6">&lt;/select&gt;</span></p>

  <p class="c10"><span class="c4">&lt;select&gt;</span><span class=
  "c5 c0">lastaudit</span><span class=
  "c2 c6">&lt;/select&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;where&gt;</span></p>

  <p class="c1"><span class="c2 c6">&lt;clause&gt;</span></p>

  <p class="c16"><span class="c2 c6">&lt;phrase&gt;</span></p>

  <p class="c23"><span class="c4">&lt;key&gt;</span><span class=
  "c5 c0">bash</span><span class="c2 c6">&lt;/key&gt;</span></p>

  <p class="c16"><span class="c2 c6">&lt;/phrase&gt;</span></p>

  <p class="c1"><span class="c2 c6">&lt;/clause&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/where&gt;</span></p>

  <p class=""><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class=""><span class="c6">&lt;audit&gt;</span> <span class=
  "c0 c18">(exactly 1)</span><span class="c8 c0">&#160;</span></p>

  <p class="c10"><span class="c0">This name with an appended</span>
  <span class="c5 c0">".xml"</span><span class="c8 c0">&#160;is the
  file name of the audit files to be scanned.</span></p>

  <p class=""><span class="c6">&lt;tstart&gt;</span> <span class=
  "c0 c18">(optional)</span></p>

  <p class="c10"><span class="c0">Timestamp of the beginning
  (inclusive) of the audit period to be scanned. Note that this
  does not refer to the modification/creation times in the
  filesystem but the names of the</span> <span class=
  "c5 c0">audit_...</span><span class="c0">&#160;directories
  created when</span> <span class=
  "c5 c0">CLMSG_save_fai_log</span><span class=
  "c8 c0">&#160;receives the audit files. Underscores _ within the
  timestamp are ignored. Default if omitted is
  "00000101000000".</span></p>

  <p class=""><span class="c6">&lt;tend&gt;</span> <span class=
  "c0 c18">(optional)</span></p>

  <p class="c10"><span class="c0">Timestamp of the end (inclusive)
  of the audit period to be scanned. See</span> <span class=
  "c6">&lt;tstart&gt;.</span><span class="c8 c0">&#160;Default if
  omitted is "99991231235959".</span></p>

  <p class=""><span class="c6">&lt;includeothers&gt;</span>
  <span class="c0 c18">(optional)</span></p>

  <p class="c10"><span class="c0">The presence of this tag causes
  the reply to contain</span> <span class=
  "c6">&lt;nonmatching&gt;</span><span class="c0">&#160;elements
  with information about systems that contain audit data within the
  requested time period that does match the</span> <span class=
  "c6">&lt;where&gt;</span><span class=
  "c8 c0">&#160;query.</span></p>

  <p class="c10"><span class="c0">In addition to this the reply
  will also contain</span> <span class=
  "c6">&lt;noaudit&gt;</span><span class="c8 c0">&#160;elements
  with information about systems that do not have audit data in the
  requested time period.</span></p>

  <p class=""><span class="c6">&lt;where&gt;</span> <span class=
  "c0 c18">(optional)</span><span class="c8 c0">&#160;</span></p>

  <p class="c10"><span class="c0">The query syntax is the same as
  for</span> <span class=
  "c5 c0">gosa_query_jobdb</span><span class="c0">. The available
  column names are</span> <span class=
  "c6">&lt;macaddress&gt;</span><span class="c0">,</span>
  <span class="c6">&lt;key&gt;</span><span class="c0">&#160;and all
  custom child elements used in</span> <span class=
  "c6">&lt;entry&gt;</span><span class="c0">&#160;elements in the
  audit files selected by</span> <span class=
  "c6">&lt;audit&gt;.</span><span class="c0">&#160;If</span>
  <span class="c6">&lt;where&gt;</span><span class="c8 c0">&#160;is
  omitted, all entries are considered matching.</span></p>

  <p class=""><span class="c6">&lt;select&gt;</span><span class=
  "c0">&#160;</span><span class="c28 c0 c31 c18">(0 or
  more)</span></p>

  <p class="c10"><span class="c0">Each</span> <span class=
  "c6">&lt;select&gt;</span><span class="c0">&#160;element contains
  the name of a column that should be returned for each answer
  matching the query. If there is no</span> <span class=
  "c6">&lt;select&gt;</span><span class="c8 c0">&#160;element, it
  is unspecified which (if any) columns will be returned. You may
  request any of the custom columns as well as "macaddress",
  "ipaddress", "hostname" and "lastaudit". Note however that among
  these only "macaddress" and "lastaudit" are always
  available.</span></p>

  <p class="c10"><span class="c6">Note:</span><span class=
  "c0">&#160;Duplicate answers are</span> <span class=
  "c6">not</span><span class="c0">&#160;coalesced. For instance if
  you select "macaddress" and no other columns, you will receive as
  many answers with the same &lt;macaddress&gt; as there are
  &lt;entry&gt; elements in the audit data for the system with that
  MAC address. If you need coalescing of duplicate answers,</span>
  <span class="c5 c0">gosa_query_audit_aggregate</span><span class=
  "c8 c0">&#160;may be more appropriate.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">Example reply:</span></p>

  <p class=""><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c10"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">query_audit</span><span class="c4">&lt;/header&gt;<br />
  &lt;source&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c4">&lt;/source&gt;<br />
  &lt;target&gt;</span><span class="c5 c0">GOSA</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c10"><span class="c4">&lt;known&gt;</span><span class=
  "c5 c0">12</span><span class="c2 c6">&lt;/known&gt;</span></p>

  <p class="c10"><span class=
  "c4">&lt;unknown&gt;</span><span class="c5 c0">23</span><span class="c2 c6">&lt;/unknown&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;nonmatching&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">99:88:77:66:55:44</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;ipaddress&gt;</span><span class=
  "c5 c0">3.4.5.6</span><span class=
  "c2 c6">&lt;/ipaddress&gt;</span></p>

  <p class="c10"><span class=
  "c2 c6">&lt;/nonmatching&gt;</span></p>

  <p class="c10"><span class="c2 c6">...</span></p>

  <p class="c10"><span class="c2 c6">&lt;noaudit&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">99:88:77:66:55:44</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;lastaudit&gt;</span><span class=
  "c5 c0">12341230121212</span><span class=
  "c2 c6">&lt;/lastaudit&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/noaudit&gt;</span></p>

  <p class="c10"><span class="c2 c6">...<br />
  &lt;answer1&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;lastaudit&gt;</span><span class=
  "c5 c0">20170131235959</span><span class=
  "c2 c6">&lt;/lastaudit&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;macaddress&gt;</span><span class=
  "c5 c0">01:02:03:04:05:06</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;ipaddress&gt;</span><span class=
  "c5 c0">1.2.3.4</span><span class=
  "c2 c6">&lt;/ipaddress&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;version&gt;</span><span class=
  "c5 c0">1.2ubuntu1</span><span class=
  "c2 c6">&lt;/version&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;status&gt;</span><span class="c5 c0">ii</span><span class=
  "c2 c6">&lt;/status&gt;</span></p>

  <p class="c10"><span class="c2 c6">&#160; &#160;
  &lt;update&gt;&lt;/update&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/answer1&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;answer2&gt;</span></p>

  <p class="c10"><span class="c2 c6">&#160; &#160; ...</span></p>

  <p class="c10"><span class="c2 c6">&lt;/answer2&gt;</span></p>

  <p class="c10"><span class="c2 c6">...</span></p>

  <p class="c10"><span class=
  "c4">&lt;answerN&gt;</span><span class="c5 c0">...</span><span class="c2 c6">&lt;/answerN&gt;</span></p>

  <p class=""><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class=""><span class="c8 c6">The reply elements have the
  following meaning:</span></p>

  <p class=""><span class="c8 c6">&lt;known&gt;</span></p>

  <p class="c10"><span class="c8 c0">Number of systems that with
  &lt;audit&gt; information within the requested timestamp range.
  This includes those that do not have an &lt;entry&gt; that
  matches the &lt;where&gt; condition. However &lt;audit&gt; files
  that don't contain any &lt;entry&gt; at all do not
  count.</span></p>

  <p class=""><span class="c8 c6">&lt;unknown&gt;</span></p>

  <p class="c10"><span class="c8 c0">Number of systems that do not
  have &lt;audit&gt; information within the requested timestamp
  range. This includes systems that have sent corrupt or empty
  &lt;audit&gt; files.</span></p>

  <p class=""><span class="c8 c6">&lt;noaudit&gt;</span></p>

  <p class="c10"><span class="c8 c0">These elements contain
  (usually incomplete) information about systems that do not have
  the requested &lt;audit&gt; file within the requested timestamp
  range. May contain any of the subelements &lt;lastaudit&gt;,
  &lt;macaddress&gt;, &lt;ipaddress&gt; and/or &lt;hostname&gt; but
  usually only &lt;macaddress&gt; will be present.</span></p>

  <p class=""><span class="c8 c6">&lt;nonmatching&gt;</span></p>

  <p class="c10"><span class="c8 c0">These elements contain
  (sometimes incomplete) information about systems that do have the
  requested &lt;audit&gt; file within the requested timestamp
  range, but that have no &lt;entry&gt; that matches the
  &lt;where&gt; condition. May contain any of the subelements
  &lt;macaddress&gt;, &lt;ipaddress&gt;,&lt;lastaudit&gt; and/or
  &lt;hostname&gt;.</span></p>

  <p class=""><span class="c8 c6">&lt;lastaudit&gt;</span></p>

  <p class="c10"><span class="c8 c0">Timestamp of the most recent
  audit (if any) of the system, regardless of &lt;tstart&gt;,
  &lt;tend&gt;, &lt;audit&gt;.</span></p>

  <h3 class="c39" id="h.5yrzhqn3y3tc"></h3>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="c39" id="h.rlrfv9pdekcc"></h3>

  <h3 class="" id="h.2t7lsoilmbdq"><span class=
  "c12 c6">gosa_query_audit_aggregate</span></h3>

  <p class=""><span class="c8 c6">Purpose:</span></p>

  <p class="c10"><span class="c8 c0">GOsa&#11020;Server. Query the
  audit logs (see fai-audit-hook) with aggregate functions
  applied.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c6">Example message:</span></p>

  <p class=""><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c10"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">gosa_query_audit_aggregate</span><span class=
  "c4">&lt;/header&gt;<br />
  &lt;audit&gt;</span><span class=
  "c5 c0">packages</span><span class=
  "c2 c6">&lt;/audit&gt;</span></p>

  <p class="c10"><span class="c4">&lt;tstart&gt;</span><span class=
  "c5 c0">20161231235959</span><span class=
  "c2 c6">&lt;/tstart&gt;</span></p>

  <p class="c10"><span class="c4">&lt;tend&gt;</span><span class=
  "c5 c0">20171231235959</span><span class=
  "c2 c6">&lt;/tend&gt;</span></p>

  <p class="c10"><span class=
  "c2 c6">&lt;includeothers&gt;&lt;/includeothers&gt;</span></p>

  <p class="c10"><span class="c4">&lt;select&gt;</span><span class=
  "c5 c0">macaddress</span><span class=
  "c2 c6">&lt;/select&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;count&gt;</span></p>

  <p class="c1"><span class="c4">&lt;as&gt;</span><span class=
  "c5 c0">bashversions</span><span class=
  "c2 c6">&lt;/as&gt;</span></p>

  <p class="c1"><span class="c4">&lt;unique&gt;</span><span class=
  "c5 c0">version</span><span class=
  "c2 c6">&lt;/unique&gt;</span></p>

  <p class="c1"><span class="c2 c6">&lt;where&gt;</span></p>

  <p class="c16"><span class="c2 c6">&lt;clause&gt;</span></p>

  <p class="c23"><span class="c2 c6">&lt;phrase&gt;</span></p>

  <p class="c33"><span class="c4">&lt;key&gt;</span><span class=
  "c5 c0">bash</span><span class="c2 c6">&lt;/key&gt;</span></p>

  <p class="c23"><span class="c2 c6">&lt;/phrase&gt;</span></p>

  <p class="c16"><span class="c2 c6">&lt;/clause&gt;</span></p>

  <p class="c1"><span class="c2 c6">&lt;/where&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/count&gt;</span></p>

  <p class=""><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class=""><span class="c6">&lt;audit&gt;</span> <span class=
  "c0 c18">(exactly 1)</span><span class="c8 c0">&#160;</span></p>

  <p class="c10"><span class="c0">This name with an appended</span>
  <span class="c5 c0">".xml"</span><span class="c8 c0">&#160;is the
  file name of the audit files to be scanned.</span></p>

  <p class=""><span class="c6">&lt;tstart&gt;</span> <span class=
  "c0 c18">(optional)</span></p>

  <p class="c10"><span class="c0">Timestamp of the beginning
  (inclusive) of the audit period to be scanned. Note that this
  does not refer to the modification/creation times in the
  filesystem but the names of the</span> <span class=
  "c5 c0">audit_...</span><span class="c0">&#160;directories
  created when</span> <span class=
  "c5 c0">CLMSG_save_fai_log</span><span class=
  "c8 c0">&#160;receives the audit files. Underscores _ within the
  timestamp are ignored. Default if omitted is
  "00000101000000".</span></p>

  <p class=""><span class="c6">&lt;tend&gt;</span> <span class=
  "c0 c18">(optional)</span></p>

  <p class="c10"><span class="c0">Timestamp of the end (inclusive)
  of the audit period to be scanned. See</span> <span class=
  "c6">&lt;tstart&gt;.</span><span class="c8 c0">&#160;Default if
  omitted is "99991231235959".</span></p>

  <p class=""><span class="c6">&lt;includeothers&gt;</span>
  <span class="c0 c18">(optional)</span></p>

  <p class="c10"><span class="c0">The presence of this tag causes
  the reply to contain</span> <span class=
  "c6">&lt;noaudit&gt;</span><span class="c0">&#160;elements with
  information about systems that do not have audit data in the
  requested time period. There is</span> <span class="c6">no
  &lt;nonmatching&gt;</span><span class="c0">&#160;in the reply
  from</span> <span class=
  "c5 c0">gosa_query_audit_aggregate</span><span class=
  "c0">&#160;as opposed to</span> <span class=
  "c2 c0">gosa_query_audit.</span></p>

  <p class=""><span class="c6">&lt;select&gt;</span><span class=
  "c0">&#160;</span><span class="c28 c0 c31 c18">(0 or
  more)</span></p>

  <p class="c10"><span class="c0">Each</span> <span class=
  "c6">&lt;select&gt;</span><span class="c0">&#160;element contains
  the name of a column that should be returned for each answer
  matching the query. If there is no</span> <span class=
  "c6">&lt;select&gt;</span><span class="c0">&#160;element, there
  will be no</span> <span class=
  "c6">&lt;answerX&gt;</span><span class="c0">&#160;in the the
  reply, but</span> <span class=
  "c6">&lt;aggregate&gt;</span><span class="c8 c0">&#160;will still
  be there.</span></p>

  <p class="c10"><span class="c6">Note:</span><span class=
  "c0">&#160;Unlike</span> <span class=
  "c5 c0">gosa_query_audit</span><span class="c0">&#160;this
  function coalesces results, so there will not be any 2</span>
  <span class="c6">&lt;answerX&gt;</span><span class="c0">&#160;in
  the reply that have the exact same set of values for the whole
  set of</span> <span class="c6">&lt;select&gt;</span><span class=
  "c8 c0">&#160;</span></p>

  <p class="c10"><span class="c8 c0">columns.</span></p>

  <p class=""><span class="c6">&lt;count&gt;</span><span class=
  "c0">&#160;</span><span class="c28 c0 c31 c18">(0 or
  more)</span></p>

  <p class="c10"><span class="c8 c0">Report the number of matching
  entries.</span></p>

  <p class=""><span class="c6">&lt;as&gt;</span> <span class=
  "c0 c18">(required within</span> <span class=
  "c6 c18">&lt;count&gt;</span><span class="c0 c18">)</span></p>

  <p class="c10"><span class="c0">The name of the subelements
  in</span> <span class="c6">&lt;aggregate&gt;</span><span class=
  "c0">&#160;and</span> <span class=
  "c6">&lt;answerX&gt;</span><span class="c8 c0">&#160;under which
  to report the count.</span></p>

  <p class=""><span class="c6">&lt;unique&gt;</span> <span class=
  "c0 c18">(0 or more, only permitted within</span> <span class=
  "c6 c18">&lt;count&gt;</span><span class=
  "c0 c18">)</span><span class="c8 c0">&#160;</span></p>

  <p class="c10"><span class="c0">For each combination of</span>
  <span class="c6">&lt;select&gt;</span><span class=
  "c0">&#160;columns (each of which yields one</span> <span class=
  "c6">&lt;answerX&gt;</span><span class="c0">) only increment the
  count once for each unique value of the column specified
  inside</span> <span class="c8 c6">&lt;unique&gt;.</span></p>

  <p class="c10"><span class="c0">If multiple</span> <span class=
  "c6">&lt;unique&gt;</span><span class="c8 c0">&#160;are
  specified, the combination of all these columns has to be unique
  (which is not the same as all of them being unique
  individually).</span></p>

  <p class="c10"><span class="c0">The same applies to the</span>
  <span class="c6">&lt;aggregate&gt;</span><span class=
  "c8 c0">&#160;result.</span></p>

  <p class=""><span class="c6">&lt;where&gt;</span> <span class=
  "c0 c18">(optional, only permitted within</span> <span class=
  "c6 c18">&lt;count&gt;</span><span class=
  "c0 c18">)</span><span class="c8 c0">&#160;</span></p>

  <p class="c10"><span class="c0">The query syntax is the same as
  for</span> <span class=
  "c5 c0">gosa_query_jobdb</span><span class="c0">. The available
  column names are</span> <span class=
  "c6">&lt;macaddress&gt;</span><span class="c0">,</span>
  <span class="c6">&lt;key&gt;</span><span class="c0">&#160;and all
  custom child elements used in</span> <span class=
  "c6">&lt;entry&gt;</span><span class="c0">&#160;elements in the
  audit files selected by</span> <span class=
  "c6">&lt;audit&gt;.</span><span class="c0">&#160;Only matching
  entries will be counted. If</span> <span class=
  "c6">&lt;where&gt;</span><span class="c0">&#160;is omitted, all
  entries are counted (taking</span> <span class=
  "c6">&lt;unique&gt;</span><span class="c8 c0">&#160;into account
  if present).</span></p>

  <p class="c7 c10"></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">Example reply:</span></p>

  <p class=""><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c10"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">query_audit_aggregate</span><span class=
  "c4">&lt;/header&gt;<br />
  &lt;source&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c4">&lt;/source&gt;<br />
  &lt;target&gt;</span><span class="c5 c0">GOSA</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c10"><span class="c4">&lt;known&gt;</span><span class=
  "c5 c0">12</span><span class="c2 c6">&lt;/known&gt;</span></p>

  <p class="c10"><span class=
  "c4">&lt;unknown&gt;</span><span class="c5 c0">23</span><span class="c2 c6">&lt;/unknown&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;noaudit&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">99:88:77:66:55:44</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;lastaudit&gt;</span><span class=
  "c5 c0">12341230121212</span><span class=
  "c2 c6">&lt;/lastaudit&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/noaudit&gt;</span></p>

  <p class="c10"><span class="c2 c6">...<br />
  &lt;aggregate&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;bashversions&gt;</span><span class=
  "c5 c0">4</span><span class=
  "c2 c6">&lt;/bashversions&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/aggregate&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;answer1&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;macaddress&gt;</span><span class=
  "c5 c0">01:02:03:04:05:06</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c10"><span class="c4">&#160; &#160;
  &lt;bashversions&gt;</span><span class=
  "c5 c0">0</span><span class=
  "c2 c6">&lt;/bashversions&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/answer1&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;answer2&gt;</span></p>

  <p class="c10"><span class="c2 c6">&#160; &#160; ...</span></p>

  <p class="c10"><span class="c2 c6">&lt;/answer2&gt;</span></p>

  <p class="c10"><span class="c2 c6">...</span></p>

  <p class="c10"><span class=
  "c4">&lt;answerN&gt;</span><span class="c5 c0">...</span><span class="c2 c6">&lt;/answerN&gt;</span></p>

  <p class=""><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class=""><span class="c8 c6">The reply elements have the
  following meaning:</span></p>

  <p class=""><span class="c8 c6">&lt;known&gt;</span></p>

  <p class="c10"><span class="c8 c0">Number of systems that with
  &lt;audit&gt; information within the requested timestamp range.
  This includes those that do not have an &lt;entry&gt; that
  matches the &lt;where&gt; condition. However &lt;audit&gt; files
  that don't contain any &lt;entry&gt; at all do not
  count.</span></p>

  <p class=""><span class="c8 c6">&lt;unknown&gt;</span></p>

  <p class="c10"><span class="c8 c0">Number of systems that do not
  have &lt;audit&gt; information within the requested timestamp
  range. This includes systems that have sent corrupt or empty
  &lt;audit&gt; files.</span></p>

  <p class=""><span class="c8 c6">&lt;noaudit&gt;</span></p>

  <p class="c10"><span class="c8 c0">These elements contain
  (usually incomplete) information about systems that do not have
  the requested &lt;audit&gt; file within the requested timestamp
  range. May contain any of the subelements &lt;lastaudit&gt;,
  &lt;macaddress&gt;, &lt;ipaddress&gt; and/or &lt;hostname&gt; but
  usually only &lt;macaddress&gt; will be present.</span></p>

  <p class=""><span class="c8 c6">&lt;lastaudit&gt;</span></p>

  <p class="c10"><span class="c8 c0">Timestamp of the most recent
  audit (if any) of the system, regardless of &lt;tstart&gt;,
  &lt;tend&gt;, &lt;audit&gt;.</span></p>

  <p class=""><span class="c8 c6">&lt;aggregate&gt;</span></p>

  <p class="c10"><span class="c0">The numbers requested by</span>
  <span class="c6">&lt;count&gt;</span><span class=
  "c0">&#160;aggregated over all entries, regardless of the</span>
  <span class="c6">&lt;select&gt;</span><span class=
  "c8 c0">&#160;set.</span></p>

  <p class=""><span class="c8 c6">&lt;answerX&gt;</span></p>

  <p class="c10"><span class="c0">The numbers requested by</span>
  <span class="c6">&lt;count&gt;,</span><span class=
  "c0">&#160;counted for a unique combination of</span>
  <span class="c6">&lt;select&gt;</span><span class=
  "c0">&#160;values. E.g. if the query has</span> <span class=
  "c6">&lt;select&gt;</span><span class=
  "c0">macaddress</span><span class=
  "c6">&lt;/select&gt;</span><span class="c0">&#160;and no
  other</span> <span class="c6">&lt;select&gt;,</span><span class=
  "c0">&#160;then each</span> <span class=
  "c6">&lt;answerX&gt;</span><span class="c0">&#160;will correspond
  to exactly one MAC address. If there is a</span> <span class=
  "c6">&lt;select&gt;</span><span class="c0">&#160;for both
  "macaddress" and "key", then there will be one</span>
  <span class="c6">&lt;answerX&gt;</span><span class="c0">&#160;for
  each unique macaddress+key combination.</span></p>
  <hr style="page-break-before:always;display:none;" />
  <a id="id.5uju4li1h33b" name="id.5uju4li1h33b"></a>

  <h2 class="c32" id="h.mehsqejmttjq"><span class=
  "c15 c6">Miscellaneous</span></h2>

  <p class=""><span class="c8 c0">The messages in this section do
  not fit nicely in any of the other categories.</span></p>

  <h3 class="c27" id="h.lysjsrs0l1xj"><span class=
  "c12 c6">gosa_ping</span></h3>

  <p class=""><span class="c8 c6">Purpose:</span></p>

  <p class="c10"><span class="c8 c0">GOsa&#11020;Server. GOsa uses
  this message to determine if a specific client is on or off. GOsa
  uses this information e.g. to present the action "Wake up" only
  for clients that are off.</span></p>

  <p class="c7 c10"></p>

  <p class=""><span class="c6">Example message:</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">gosa_ping</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">GOSA</span><span class="c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">1c:6f:65:08:b5:4d</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c6">Example reply if client is
  ON:</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">got_new_ping</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class=
  "c2 c6">&lt;got_new_ping&gt;&lt;/got_new_ping&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">12.34.56.78:20083</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">1.2.3.4:20081</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">Reply if client is
  OFF:</span></p>

  <p class="c10"><span class="c0">If the client is off, the
  si-server closes the connection without reply.</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">GOsa notes:</span></p>

  <p class="c10"><span class="c8 c0">GOsa only checks if there is a
  reply but ignores the contents. This means even an error reply
  will be interpreted as the client being on.</span></p>

  <p class="c7 c10"></p>

  <p class=""><span class="c8 c6">go-susi note:</span></p>

  <p class="c10"><span class="c0">go-susi does not actually ping
  the client and wait for a pong. go-susi only checks if it can
  connect to the si-client port. This eliminates the need for
  server-server communication in case the client is registered at a
  peer and improves GOsa performance compared to the use of
  gosa-si-server.</span></p>

  <h3 class="" id="h.sp869tnshz6d"><span class=
  "c12 c6">panic</span></h3>

  <p class="c14"><span class="c8 c6">Purpose:</span></p>

  <p class="c14 c10"><span class="c8 c0">Admin&#10132;Server.
  Causes go-susi to abort with a full stack trace of all running
  goroutines. This function is go-susi specific and useful only for
  debugging.</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c6">Example message:</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;header&gt;</span><span class=
  "c5 c0">panic</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;/xml&gt;</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="" id="h.1f6kgewdm74c"><span class=
  "c12 c6">sistats</span></h3>

  <p class="c14"><span class="c8 c6">Purpose:</span></p>

  <p class="c14 c10"><span class="c8 c0">Admin&#10132;Server. Query
  various statistics about go-susi's operation. This function is
  go-susi specific.</span></p>

  <p class="c14 c7 c10"></p>

  <p class="c14"><span class="c6">Example message:</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;header&gt;</span><span class=
  "c5 c0">sistats</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c14 c7 c10"></p>

  <p class="c14"><span class="c8 c6">Example reply:</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;header&gt;</span><span class=
  "c5 c0">answer</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;source&gt;</span><span class=
  "c5 c0">10.10.10.8:20081</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;target&gt;</span><span class=
  "c5 c0">GOSA</span><span class="c2 c6">&lt;/target&gt;</span></p>

  <p class="c14 c1"><span class="c2 c6">&lt;answer1&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;Alloc&gt;</span><span class="c5 c0">788080</span><span class=
  "c2 c6">&lt;/Alloc&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;Architecture&gt;</span><span class=
  "c5 c0">386</span><span class=
  "c2 c6">&lt;/Architecture&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;BuckHashSys&gt;</span><span class=
  "c5 c0">0</span><span class="c2 c6">&lt;/BuckHashSys&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;Compiler&gt;</span><span class="c5 c0">gc</span><span class=
  "c2 c6">&lt;/Compiler&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;DebugGC&gt;</span><span class=
  "c5 c0">false</span><span class="c2 c6">&lt;/DebugGC&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;EnableGC&gt;</span><span class=
  "c5 c0">true</span><span class="c2 c6">&lt;/EnableGC&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;Frees&gt;</span><span class="c5 c0">337</span><span class=
  "c2 c6">&lt;/Frees&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;Go-Version&gt;</span><span class=
  "c5 c0">go1.0.2</span><span class=
  "c2 c6">&lt;/Go-Version&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;HeapAlloc&gt;</span><span class=
  "c5 c0">788080</span><span class=
  "c2 c6">&lt;/HeapAlloc&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;HeapIdle&gt;</span><span class=
  "c5 c0">36864</span><span class=
  "c2 c6">&lt;/HeapIdle&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;HeapInuse&gt;</span><span class=
  "c5 c0">1011712</span><span class=
  "c2 c6">&lt;/HeapInuse&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;HeapObjects&gt;</span><span class=
  "c5 c0">2440</span><span class=
  "c2 c6">&lt;/HeapObjects&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;HeapReleased&gt;</span><span class=
  "c5 c0">0</span><span class=
  "c2 c6">&lt;/HeapReleased&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;HeapSys&gt;</span><span class=
  "c5 c0">1048576</span><span class=
  "c2 c6">&lt;/HeapSys&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;LastGC&gt;</span><span class=
  "c5 c0">1352903012604979000</span><span class=
  "c2 c6">&lt;/LastGC&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;Lookups&gt;</span><span class="c5 c0">167</span><span class=
  "c2 c6">&lt;/Lookups&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;MCacheInuse&gt;</span><span class=
  "c5 c0">10656</span><span class=
  "c2 c6">&lt;/MCacheInuse&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;MCacheSys&gt;</span><span class=
  "c5 c0">131072</span><span class=
  "c2 c6">&lt;/MCacheSys&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;MSpanInuse&gt;</span><span class=
  "c5 c0">5044</span><span class=
  "c2 c6">&lt;/MSpanInuse&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;MSpanSys&gt;</span><span class=
  "c5 c0">131072</span><span class=
  "c2 c6">&lt;/MSpanSys&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;Mallocs&gt;</span><span class="c5 c0">2777</span><span class=
  "c2 c6">&lt;/Mallocs&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;NextGC&gt;</span><span class=
  "c5 c0">967232</span><span class="c2 c6">&lt;/NextGC&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;NumCPU&gt;</span><span class="c5 c0">2</span><span class=
  "c2 c6">&lt;/NumCPU&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;NumGC&gt;</span><span class="c5 c0">2</span><span class=
  "c2 c6">&lt;/NumGC&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;NumGoroutine&gt;</span><span class=
  "c5 c0">12</span><span class=
  "c2 c6">&lt;/NumGoroutine&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;OS&gt;</span><span class="c5 c0">linux</span><span class=
  "c2 c6">&lt;/OS&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;PauseTotalNs&gt;</span><span class=
  "c5 c0">1071000</span><span class=
  "c2 c6">&lt;/PauseTotalNs&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;Revision&gt;</span><span class=
  "c5 c0">48f6d79cc053</span><span class=
  "c2 c6">&lt;/Revision&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;StackInuse&gt;</span><span class=
  "c5 c0">49152</span><span class=
  "c2 c6">&lt;/StackInuse&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;StackSys&gt;</span><span class=
  "c5 c0">655360</span><span class=
  "c2 c6">&lt;/StackSys&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;Sys&gt;</span><span class="c5 c0">3145728</span><span class=
  "c2 c6">&lt;/Sys&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;TotalAlloc&gt;</span><span class=
  "c5 c0">833976</span><span class=
  "c2 c6">&lt;/TotalAlloc&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;Version&gt;</span><span class=
  "c5 c0">1.0.0</span><span class="c2 c6">&lt;/Version&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;mallinfo_arena&gt;</span><span class=
  "c5 c0">1048576</span><span class=
  "c2 c6">&lt;/mallinfo_arena&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;mallinfo_fordblks&gt;</span><span class=
  "c5 c0">1033272</span><span class=
  "c2 c6">&lt;/mallinfo_fordblks&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;mallinfo_hblkhd&gt;</span><span class=
  "c5 c0">0</span><span class=
  "c2 c6">&lt;/mallinfo_hblkhd&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;mallinfo_hblks&gt;</span><span class=
  "c5 c0">0</span><span class=
  "c2 c6">&lt;/mallinfo_hblks&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;mallinfo_keepcost&gt;</span><span class=
  "c5 c0">1029872</span><span class=
  "c2 c6">&lt;/mallinfo_keepcost&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;mallinfo_ordblks&gt;</span><span class=
  "c5 c0">16</span><span class=
  "c2 c6">&lt;/mallinfo_ordblks&gt;</span></p>

  <p class="c3"><span class="c4">&#160; &#160;
  &lt;mallinfo_uordblks&gt;</span><span class=
  "c5 c0">15304</span><span class=
  "c2 c6">&lt;/mallinfo_uordblks&gt;</span></p>

  <p class="c14 c1"><span class="c2 c6">&lt;/answer1&gt;</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c14 c7 c10"></p>

  <p class="c14"><span class="c8 c6">The reply elements have the
  following meaning:</span></p>

  <p class="c14 c10"><span class="c0">The reply elements are
  subject to change. They are purely for testing and debugging.
  Most of them are either self-explanatory or correspond directly
  to values from the Go runtime (</span><span class=
  "c17 c0"><a class="c9" href=
  "https://www.google.com/url?q=http://golang.org/pkg/runtime/&amp;sa=D&amp;ust=1469524604360000&amp;usg=AFQjCNE9nvgXuPmPMf0eneZZXdjjv3IEhg">http://golang.org/pkg/runtime/</a></span><span class="c8 c0">).</span></p>

  <p class="c14"><span class="c6">&lt;Version&gt;</span></p>

  <p class="c14 c10"><span class="c8 c0">The go-susi
  version.</span></p>

  <p class="c14"><span class=
  "c6">&lt;SusiPeersUp&gt;</span><span class=
  "c0">/</span><span class="c8 c6">&lt;SusiPeersDown&gt;</span></p>

  <p class="c14 c10"><span class="c8 c0">Number of working (Up) and
  non-working (Down) peers known to support the go-susi
  protocol.</span></p>

  <p class="c14"><span class=
  "c6">&lt;NonSusiPeersUp&gt;</span><span class=
  "c0">/</span><span class=
  "c8 c6">&lt;NonSusiPeersDown&gt;</span></p>

  <p class="c14 c10"><span class="c8 c0">Number of working (Up) and
  non-working (Down) peers that do not use the go-susi
  protocol.</span></p>

  <p class="c14"><span class="c6">&lt;KnownClients&gt;</span></p>

  <p class="c14 c10"><span class="c8 c0">Number of clients the
  server is aware of, including those registered at
  peers.</span></p>

  <p class="c14"><span class="c6">&lt;MyClientsUp&gt;</span></p>

  <p class="c14 c10"><span class="c8 c0">Number of clients
  registered at this server and currently reachable.</span></p>

  <p class="c14"><span class="c6">&lt;MyClientsDown&gt;</span></p>

  <p class="c14 c10"><span class="c8 c0">Number of clients
  registered at this server and currently unreachable (probably
  off).</span></p>

  <p class="c14"><span class=
  "c6">&lt;TotalRegistrations&gt;</span></p>

  <p class="c14 c10"><span class="c0">Total number of</span>
  <span class="c5 c0">here_i_am</span><span class=
  "c8 c0">&#160;messages received.</span></p>

  <p class="c14"><span class=
  "c6">&lt;MissedRegistrations&gt;</span></p>

  <p class="c14 c10"><span class="c0">Number of</span> <span class=
  "c5 c0">here_i_am</span><span class="c8 c0">&#160;messages to
  which go-susi did not manage to reply in less than 8s.</span></p>

  <p class="c14"><span class="c6">&lt;AvgRequestTime&gt;</span></p>

  <p class="c14 c10"><span class="c8 c0">Time in nanoseconds
  go-susi took to process requests averaged over the last 100. The
  time for reading the request from the network and writing the
  reply is not included.</span></p>

  <p class="c14"><span class="c6">&lt;mallinfo_arena&gt;</span></p>

  <p class="c14 c10"><span class="c8 c0">The number of non-mmap'ed
  bytes currently reserved by malloc-based memory management. This
  includes memory that has already been free()d but not returned to
  the OS, yet.</span></p>

  <p class="c14 c10"><span class="c6">Note:</span> <span class=
  "c0">malloc-based memory is not managed by the Go runtime and
  will not be garbage collected.</span></p>

  <p class="c14"><span class=
  "c8 c6">&lt;mallinfo_fordblks&gt;</span></p>

  <p class="c14 c10"><span class="c0">The number of bytes
  within</span> <span class=
  "c6">&lt;mallinfo_arena&gt;</span><span class="c8 c0">&#160;that
  have been free()d. These bytes have not been returned to the OS
  (i.e. they're reported as in-use in the output of top and ps)
  even though they are not actually used by the program. The memory
  management keeps these bytes reserved either because of memory
  fragmentation or to improve performance.</span></p>

  <p class="c14 c10"><span class="c6">Note:</span><span class=
  "c0">&#160;If</span> <span class=
  "c6">&lt;mallinfo_arena&gt;</span><span class=
  "c0">&#160;and</span> <span class=
  "c6">&lt;mallinfo_fordblks&gt;</span> <span class="c8 c0">keep
  growing together over the lifetime of the program &#160;this
  means that the program has problems with memory fragmentation.
  It's unlikely you'll ever see this.</span></p>

  <p class="c14 c10"><span class="c0">If the difference</span>
  <span class="c6">&lt;mallinfo_arena&gt;</span><span class=
  "c0">&#160;</span><span class="c6">-
  &lt;mallinfo_fordblks&gt;</span><span class="c8 c0">&#160;keeps
  growing over the lifetime of the program this means that the
  program has a memory leak. Report this as a bug.</span></p>

  <p class="c14"><span class=
  "c6">&lt;mallinfo_hblkhd&gt;</span></p>

  <p class="c14 c10"><span class="c0">Number of bytes allocated by
  malloc-based memory management using mmap(). This kind of memory,
  unlike</span> <span class=
  "c6">&lt;mallinfo_arena&gt;</span><span class="c8 c0">&#160;is
  always returned to the OS immediately when free()d, so all of
  these bytes are actually in use by the program.</span></p>

  <p class="c14 c10"><span class="c6">Note:</span> <span class=
  "c8 c0">If this number keeps growing over the lifetime of the
  program this means that the program has a memory leak. Report
  this as a bug.</span></p>

  <p class="c14"><span class=
  "c8 c6">&lt;mallinfo_keepcost&gt;</span></p>

  <p class="c14 c10"><span class="c0">Number of bytes in</span>
  <span class="c6">&lt;mallinfo_arena&gt;</span><span class=
  "c8 c0">&#160;that could be returned to the OS but are kept to
  make future allocations faster.</span></p>

  <p class="c14 c10"><span class="c6">Note:</span><span class=
  "c0">&#160;This number should always be close to</span>
  <span class="c6">&lt;mallinfo_fordblks&gt;</span><span class=
  "c8 c0">. If there's a large difference between the two it means
  there's an issue with memory fragmentation.</span></p>

  <p class="c14"><span class="c6">&lt;mallinfo_hblks&gt;</span></p>

  <p class="c14 c10"><span class="c0">The number of mmap'ed blocks
  that hold the memory reported as</span> <span class=
  "c6">&lt;mallinfo_hblkhd&gt;</span><span class=
  "c8 c0">.</span></p>

  <p class="c14 c10"><span class="c6">Note:</span> <span class=
  "c8 c0">This number should be fairly constant and small over the
  lifetime of the program. If it keeps growing this means the
  program has a memory leak. Report this as a bug.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <p class="c14 c7"></p>

  <h3 class="" id="h.4syp8tvmprfx"><span class=
  "c12 c6">gosa_trigger_reload_ldap_config</span></h3>

  <p class="c14"><span class="c8 c6">Purpose:</span></p>

  <p class="c14 c10"><span class="c0">GOsa&#10132;Server. Causes
  the server to send a</span> <span class=
  "c5 c0">new_ldap_config</span><span class="c8 c0">&#160;message
  with up-to-date data. GOsa sends this after operations on the
  client's LDAP object that have potentially changed the relevant
  attributes.</span></p>

  <p class="c14 c7 c10"></p>

  <p class="c14"><span class="c6">Example message:</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;header&gt;</span><span class=
  "c5 c0">gosa_trigger_reload_ldap_config</span><span class=
  "c4">&lt;/header&gt;<br />
  &lt;source&gt;</span><span class="c5 c0">GOSA</span><span class=
  "c4">&lt;/source&gt;<br />
  &lt;target&gt;</span><span class=
  "c5 c0">00:16:36:7c:db:3f</span><span class=
  "c4">&lt;/target&gt;<br />
  &lt;macaddress&gt;</span><span class=
  "c5 c0">00:16:36:7c:db:3f</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <h3 class="c27" id="h.9n1vwe81fzyi"><span class=
  "c12 c6">gosa_recreate_fai_release_db</span></h3>

  <p class=""><span class="c8 c6">Purpose:</span></p>

  <p class="c10"><span class="c8 c0">GOsa&#10132;Server. GOsa sends
  this message whenever a FAI class has been added, modified or
  removed.</span></p>

  <p class="c7 c10"></p>

  <p class=""><span class="c6">Example message:</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">gosa_recreate_fai_release_db</span><span class=
  "c4">&lt;/header&gt;<br />
  &lt;source&gt;</span><span class="c5 c0">GOSA</span><span class=
  "c4">&lt;/source&gt;<br />
  &lt;target&gt;</span><span class="c5 c0">GOSA</span><span class=
  "c4">&lt;/target&gt;<br />
  &lt;macaddress&gt;</span><span class=
  "c5 c0">GOSA</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c1"><span class=
  "c4">&lt;periodic&gt;</span><span class="c5 c0">none</span><span class="c2 c6">&lt;/periodic&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">go-susi note:</span></p>

  <p class="c10"><span class="c8 c0">Because gosa-si-server does
  not forward this message to peer servers, it is not a good idea
  to rely on it. Therefore go-susi does not use this message and
  instead uses a cache with a very short lifetime.</span></p>

  <p class="c10"><span class="c0">If this message is ever
  implemented in go-susi, go-susi will probably forward it to peers
  (depending on whether</span> <span class=
  "c6">&lt;source&gt;</span><span class="c8 c0">&#160;is GOSA or a
  peer, to avoid forwarding an already forwarded
  message).</span></p>
  <hr style="page-break-before:always;display:none;" />

  <p class="c14 c7"></p><a id="id.ys29afdlp9ml" name=
  "id.ys29afdlp9ml"></a>

  <h2 class="c32" id="h.fn2pc4k1bcbp"><span class=
  "c15 c6">Deprecated</span></h2>

  <p class=""><span class="c0">The messages in this section are
  concerned with user presence tracking and delivering messages to
  individual users. Like the homegrown encryption protocol this
  message delivery service is badly designed and go-susi does not
  support it. The</span> <span class=
  "c5 c0">[general]/send-user-msg</span><span class="c0">&#160;hook
  can be used to interface go-susi with an external messaging
  service such as Jabber or email.</span></p>

  <h3 class="" id="h.itw5nv66zjdc"><span class=
  "c12 c6">CLMSG_CURRENTLY_LOGGED_IN</span></h3>

  <p class="c14"><span class="c8 c6">Purpose:</span></p>

  <p class="c14 c10"><span class="c0">Client&#10132;Server. After
  the client has registered at the server it will send this message
  to tell the server the login names of all users currently logged
  in (including ssh logins). This corresponds to the users listed
  by the</span> <span class="c5 c0">who</span><span class=
  "c8 c0">&#160;command.</span></p>

  <p class="c14 c10"><span class="c0">Updates to the list of logged
  in users are transmitted via</span> <span class=
  "c5 c0">CLMSG_LOGOUT</span><span class="c0">&#160;and</span>
  <span class="c5 c0">CLMSG_LOGIN</span><span class=
  "c8 c0">&#160;messages.</span></p>

  <p class="c14 c10"><span class="c0">When the server receives this
  message, it sends an</span> <span class=
  "c5 c0">information_sharing</span><span class="c0">&#160;message
  with</span> <span class="c6">&lt;user_db&gt;</span><span class=
  "c8 c0">&#160;elements to all peers.</span></p>

  <p class="c14 c7 c10"></p>

  <p class="c14"><span class="c8 c6">Example message:</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;header&gt;</span><span class=
  "c5 c0">CLMSG_CURRENTLY_LOGGED_IN</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.146:20083</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.85:20081</span><span class=
  "c4">&lt;/target&gt;</span></p>

  <p class="c14 c1"><span class=
  "c2 c6">&lt;CLMSG_CURRENTLY_LOGGED_IN&gt;</span></p>

  <p class="c14 c1"><span class="c2 c0">&#160; &#160;felix.wolga
  serkan.soeldirim serkan.soeldirim</span></p>

  <p class="c14 c1"><span class=
  "c2 c6">&lt;/CLMSG_CURRENTLY_LOGGED_IN&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;timestamp&gt;</span><span class=
  "c5 c0">20130305113331</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class="c14"><span class=
  "c4">&lt;CLMSG_CURRENTLY_LOGGED_IN&gt;</span></p>

  <p class="c14 c10"><span class="c8 c0">a space-separated list of
  login names, including users with graphical as well as ssh
  sessions. The list may contain duplicate entries if a user has
  multiple simultaneous sessions.</span></p>

  <p class="c14"><span class="c2 c6">&lt;timestamp&gt;</span></p>

  <p class="c14 c10"><span class="c0">The</span> <span class=
  "c6">UTC</span><span class="c8 c0">&#160;time at which the
  message is being sent.</span></p>

  <p class="c14"><span class=
  "c4">&lt;macaddress&gt;</span><span class="c8 c0">&#160;MAC
  address of the sending client.</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">go-susi note:</span></p>

  <p class="c14 c10"><span class="c0">go-susi currently does not
  send</span> <span class=
  "c5 c0">information_sharing</span><span class=
  "c8 c0">&#160;messages.</span></p>

  <p class="c14 c7"></p>
  <hr style="page-break-before:always;display:none;" />

  <p class="c14 c7"></p>

  <h3 class="" id="h.p7etfjet6df2"><span class=
  "c12 c6">CLMSG_LOGIN</span></h3>

  <p class="c14"><span class="c8 c6">Purpose:</span></p>

  <p class="c14 c10"><span class="c8 c0">Client&#10132;Server. When
  a user opens a new session the client sends this message to the
  server.</span></p>

  <p class="c14 c10"><span class="c0">When the server receives this
  message, it sends an</span> <span class=
  "c5 c0">information_sharing</span><span class="c0">&#160;message
  with</span> <span class="c6">&lt;new_user&gt;</span><span class=
  "c8 c0">&#160;elements to all peers.</span></p>

  <p class="c14 c7 c10"></p>

  <p class="c14"><span class="c8 c6">Example message:</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;header&gt;</span><span class=
  "c5 c0">CLMSG_LOGIN</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.146:20083</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.85:20081</span><span class=
  "c4">&lt;/target&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;CLMSG_LOGIN&gt;</span><span class=
  "c5 c0">felix.wolga</span><span class=
  "c2 c6">&lt;/CLMSG_LOGIN&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;timestamp&gt;</span><span class=
  "c5 c0">20130305113331</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class="c14"><span class="c4">&lt;CLMSG_LOGIN&gt;</span></p>

  <p class="c14 c10"><span class="c8 c0">Login name of the user who
  has just opened a new session.</span></p>

  <p class="c14"><span class="c4">&lt;timestamp&gt;,
  &lt;macaddress&gt;</span><span class=
  "c0">&#160;see</span><span class=
  "c5 c0">&#160;CLMSG_CURRENTLY_LOGGED_IN.</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">gosa-si-client
  note:</span></p>

  <p class="c14 c10"><span class="c0">gosa-si-client does not seem
  to notice new ssh sessions, even though existing ssh sessions are
  included in the list from</span> <span class=
  "c5 c0">CLMSG_CURRENTLY_LOGGED_IN.</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">go-susi note:</span></p>

  <p class="c14 c10"><span class="c0">go-susi currently does not
  send</span> <span class=
  "c5 c0">information_sharing</span><span class=
  "c8 c0">&#160;messages.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <p class="c14 c7"></p>

  <h3 class="" id="h.o8zsmxn55w4"><span class=
  "c12 c6">CLMSG_LOGOUT</span></h3>

  <p class="c14"><span class="c8 c6">Purpose:</span></p>

  <p class="c14 c10"><span class="c8 c0">Client&#10132;Server. When
  a user terminates a login session the client sends this message
  to the server.</span></p>

  <p class="c14 c10"><span class="c0">When the server receives this
  message, it does</span> <span class=
  "c0 c18">not</span><span class="c0">&#160;send an</span>
  <span class="c5 c0">information_sharing</span><span class=
  "c8 c0">&#160;message to its peers.</span></p>

  <p class="c14 c7 c10"></p>

  <p class="c14"><span class="c8 c6">Example message:</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;header&gt;</span><span class=
  "c5 c0">CLMSG_LOGOUT</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.146:20083</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.85:20081</span><span class=
  "c4">&lt;/target&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;CLMSG_LOGOUT&gt;</span><span class=
  "c5 c0">felix.wolga</span><span class=
  "c2 c6">&lt;/CLMSG_LOGOUT&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;macaddress&gt;</span><span class=
  "c5 c0">00:0c:29:50:a3:52</span><span class=
  "c2 c6">&lt;/macaddress&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;timestamp&gt;</span><span class=
  "c5 c0">20130305113331</span><span class=
  "c2 c6">&lt;/timestamp&gt;</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class="c14"><span class="c4">&lt;CLMSG_LOGOUT&gt;</span></p>

  <p class="c14 c10"><span class="c8 c0">Login name of the user who
  has just closed a session. Note that the same user may still have
  other sessions open.</span></p>

  <p class="c14"><span class="c4">&lt;timestamp&gt;,
  &lt;macaddress&gt;</span><span class="c0">&#160;see</span>
  <span class="c2 c0">CLMSG_CURRENTLY_LOGGED_IN.</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">gosa-si-client
  note:</span></p>

  <p class="c14 c10"><span class="c0">gosa-si-client does not seem
  to notice when ssh sessions are terminated, even though existing
  ssh sessions are included in the list from</span> <span class=
  "c5 c0">CLMSG_CURRENTLY_LOGGED_IN.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="" id="h.1nxkurs4dznc"><span class=
  "c12 c6">information_sharing</span></h3>

  <p class="c14"><span class="c8 c6">Purpose:</span></p>

  <p class="c14 c10"><span class="c0">Server&#10132;Server. Informs
  the receiving server about users currently logged in at clients
  registered at the sending server. Whenever a client sends
  a</span> <span class="c5 c0">CLMSG_LOGIN</span><span class=
  "c0">&#160;message to its server, that server sends</span>
  <span class="c5 c0">information_sharing</span><span class=
  "c0">&#160;messages to its peers with</span> <span class=
  "c6">&lt;new_user&gt;</span><span class=
  "c8 c0">&#160;information.</span></p>

  <p class="c14 c10"><span class="c0">Whenever a client sends
  a</span> <span class=
  "c5 c0">CLMSG_CURRENTLY_LOGGED_IN</span><span class=
  "c0">&#160;message to its server, that server sends</span>
  <span class="c5 c0">information_sharing</span><span class=
  "c0">&#160;messages to its peers with</span> <span class=
  "c6">&lt;user_db&gt;</span><span class=
  "c8 c0">&#160;information.</span></p>

  <p class="c14 c10"><span class="c0">When the client sends</span>
  <span class="c5 c0">CLMSG_LOGOUT</span><span class=
  "c8 c0">&#160;to its server, gosa-si-server does not seem to
  forward that information to its peers.</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">Example messages:</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;header&gt;</span><span class=
  "c5 c0">information_sharing</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c4">&lt;/source&gt;<br />
  &lt;target&gt;</span><span class=
  "c5 c0">172.16.2.60:20081</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;user_db&gt;</span><span class=
  "c5 c0">172.16.2.88:20083;sharak.khun</span><span class=
  "c2 c6">&lt;/user_db&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;user_db&gt;</span><span class=
  "c5 c0">172.16.2.66:20083;thomas.fischmaul</span><span class=
  "c2 c6">&lt;/user_db&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;user_db&gt;</span><span class=
  "c5 c0">172.16.2.148:20083;thomas.fischmaul</span><span class=
  "c2 c6">&lt;/user_db&gt;</span></p>

  <p class="c14 c1"><span class=
  "c2 c6">&lt;information_sharing&gt;&lt;/information_sharing&gt;</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c14 c7"></p>

  <p class="c14 c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;header&gt;</span><span class=
  "c5 c0">information_sharing</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c4">&lt;/source&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.60:20081</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;new_user&gt;</span><span class=
  "c5 c0">172.16.2.148:20083;karl.klammer</span><span class=
  "c2 c6">&lt;/new_user&gt;</span></p>

  <p class="c14 c1"><span class=
  "c2 c6">&lt;information_sharing&gt;&lt;/information_sharing&gt;</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c14 c7"></p>

  <p class="c14 c7 c10"></p>

  <p class="c14"><span class="c8 c6">The message elements have the
  following meaning:</span></p>

  <p class="c14"><span class="c8 c6">&lt;user_db&gt;</span></p>

  <p class="c14 c10"><span class="c0">When a</span> <span class=
  "c6">&lt;user_db&gt;</span><span class="c0">&#160;element is
  present it means that the</span> <span class=
  "c5 c0">information_sharing</span><span class="c0">&#160;message
  lists</span> <span class="c0 c18">all</span><span class=
  "c0">&#160;users currently logged in at clients registered at
  the</span> <span class="c6">&lt;source&gt;</span><span class=
  "c0">&#160;server. Each such user is listed in its own</span>
  <span class="c6">&lt;user_db&gt;</span><span class=
  "c0">&#160;element. The receiving server should discard all old
  user information from the</span> <span class=
  "c6">&lt;source&gt;</span><span class="c8 c0">&#160;server and
  replace it with the new information.</span></p>

  <p class="c14"><span class="c8 c6">&lt;new_user&gt;</span></p>

  <p class="c14 c10"><span class="c0">The</span> <span class=
  "c6">&lt;new_user&gt;</span><span class="c0">&#160;element is
  like</span> <span class="c6">&lt;user_db&gt;</span><span class=
  "c0">&#160;with the difference that the</span> <span class=
  "c5 c0">information_sharing</span><span class="c0">&#160;message
  does not list all users. This means that the receiving server
  should add the new user information to the old information
  from</span> <span class="c6">&lt;source&gt;</span><span class=
  "c0">&#160;rather than discard all old information as it would do
  in the case of</span> <span class=
  "c6">&lt;user_db&gt;</span><span class="c8 c0">.</span></p>

  <p class="c14 c7"></p>

  <p class="c14"><span class="c8 c6">go-susi notes:</span></p>

  <p class="c14 c10"><span class="c0">Currently go-susi understands
  but does not send these messages.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="c27" id="h.le5ca3ebk6m4"><span class=
  "c12 c6">usr_msg</span></h3>

  <p class=""><span class="c8 c6">Purpose:</span></p>

  <p class="c10"><span class="c8 c0">Server&#10132;Client. Tell a
  client to present a popup message to the user.</span></p>

  <p class="c7 c10"></p>

  <p class=""><span class="c8 c6">Example message:</span></p>

  <p class="c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c1"><span class="c4">&lt;header&gt;</span><span class=
  "c5 c0">usr_msg</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c1"><span class="c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c1"><span class="c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.146:20083</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c1"><span class="c4">&lt;message&gt;</span><span class=
  "c5 c0">TmFjaHJpY2h0</span><span class=
  "c2 c6">&lt;/message&gt;</span></p>

  <p class="c1"><span class="c4">&lt;subject&gt;</span><span class=
  "c5 c0">QmV0cmVmZg==</span><span class=
  "c2 c6">&lt;/subject&gt;</span></p>

  <p class="c1"><span class="c4">&lt;usr&gt;</span><span class=
  "c5 c0">userid</span><span class="c2 c6">&lt;/usr&gt;</span></p>

  <p class="c1"><span class=
  "c2 c6">&lt;usr_msg&gt;&lt;/usr_msg&gt;</span></p>

  <p class="c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c7"></p>

  <p class=""><span class="c8 c6">go-susi note:</span></p>

  <p class="c10"><span class="c0">go-susi renames all</span>
  <span class="c6">&lt;usr&gt;</span><span class=
  "c0">&#160;elements to</span> <span class=
  "c6">&lt;user&gt;</span><span class="c0">, then calls</span>
  <span class="c5 c0">user-msg-hook.</span><span class=
  "c0">&#160;See</span> <span class=
  "c5 c0">job_send_user_msg</span><span class="c0">&#160;for more
  information.</span></p>

  <h3 class="c27" id="h.tjnsr0p4y1zm"><span class=
  "c12 c6">confirm_usr_msg</span></h3>

  <p class="c14"><span class="c8 c6">Purpose:</span></p>

  <p class="c14 c10"><span class="c0">Client&#10132;Server. Tells
  the server that a message sent to the client via</span>
  <span class="c5 c0">usr_msg</span><span class="c8 c0">&#160;has
  been presented to the user.</span></p>

  <p class="c14 c7 c10"></p>

  <p class="c14"><span class="c8 c6">Example message:</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;xml&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;header&gt;</span><span class=
  "c5 c0">confirm_usr_msg</span><span class=
  "c2 c6">&lt;/header&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;source&gt;</span><span class=
  "c5 c0">172.16.2.146:20083</span><span class=
  "c2 c6">&lt;/source&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;target&gt;</span><span class=
  "c5 c0">172.16.2.143:20081</span><span class=
  "c2 c6">&lt;/target&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;message&gt;</span><span class=
  "c5 c0">TmFjaHJpY2h0</span><span class=
  "c2 c6">&lt;/message&gt;</span></p>

  <p class="c14 c1"><span class=
  "c4">&lt;subject&gt;</span><span class=
  "c5 c0">QmV0cmVmZg==</span><span class=
  "c2 c6">&lt;/subject&gt;</span></p>

  <p class="c14 c1"><span class="c4">&lt;usr&gt;</span><span class=
  "c5 c0">userid</span><span class="c2 c6">&lt;/usr&gt;</span></p>

  <p class="c14 c1"><span class=
  "c2 c6">&lt;confirm_usr_msg&gt;&lt;/confirm_usr_msg&gt;</span></p>

  <p class="c14 c10"><span class="c2 c6">&lt;/xml&gt;</span></p>

  <p class="c14 c7 c10"></p>

  <p class="c14"><span class="c8 c6">go-susi note:</span></p>

  <p class="c14 c10"><span class="c0">go-susi does not support this
  message.</span></p>
  <hr style="page-break-before:always;display:none;" />
  <a id="id.qm42onlc5h25" name="id.qm42onlc5h25"></a>

  <h1 class="" id="h.7g7l42ni6zqg"><span class=
  "c29 c6">Appendix</span></h1><a id="id.ejujf2q7dp37" name=
  "id.ejujf2q7dp37"></a>

  <h2 class="" id="h.bumhouula4zt"><span class=
  "c15 c6">sibridge</span></h2>

  <p class=""><span class="c8 c0">Remote control for an
  si-server.</span></p>

  <h3 class="" id="h.gieyvwnkib9d"><span class=
  "c12 c6">SYNOPSIS</span></h3>

  <p class=""><span class="c2 c0">sibridge [args]
  [targetserver][:targetport]</span></p>

  <h3 class="" id="h.uveotml3h6xt"><span class=
  "c0">DESCRIPTION</span></h3>

  <p class=""><span class="c0">Remote control for an si-server
  at</span> <span class="c2 c0">targetserver:targetport.</span></p>

  <h3 class="" id="h.n3hj3y4xe5mb"><span class=
  "c0">OPTIONS</span></h3>

  <p class=""><span class="c2 c6">--help</span></p>

  <p class="c10"><span class="c8 c0">print usage and
  exit.</span></p>

  <p class=""><span class="c2 c6">--version</span></p>

  <p class="c10"><span class="c8 c0">print version and
  exit.</span></p>

  <p class=""><span class="c2 c6">-c &lt;file&gt;</span></p>

  <p class="c10"><span class="c0">read configuration from
  &lt;file&gt; instead of the default location (which is</span>
  <span class="c5 c0">/etc/gosa/gosa.conf</span><span class="c0">).
  The format of the configuration file is the same as for
  GOsa&#178; (</span><span class="c0 c18">not</span><span class=
  "c0">&#160;go-susi!) but only the</span> <span class=
  "c5 c0">&lt;location&gt;</span><span class="c0">&#160;sections
  matter. There has to be a</span> <span class=
  "c5 c0">&lt;location&gt;</span><span class="c0">&#160;section
  for</span> <span class="c2 c0">targetserver.</span></p>

  <p class=""><span class="c2 c6">-l &lt;port&gt;</span></p>

  <p class="c10"><span class="c8 c0">listen for socket connections
  on &lt;port&gt;. Always uses TLS without STARTTLS (unlike
  go-susi). TLS client authentication is required. GOsa extensions
  with appropriate access control bits need to be present in the
  client certificate.</span></p>

  <p class="c10"><span class="c0">If the</span> <span class=
  "c5 c0">caCertificate</span><span class="c0">&#160;attribute
  of</span> <span class="c5 c0">&lt;location&gt;</span><span class=
  "c8 c0">&#160;in the config file lists multiple paths, client
  certificates may be signed by any of these CAs.</span></p>

  <p class=""><span class="c2 c6">-e &lt;string&gt;</span></p>

  <p class="c10"><span class="c0">execute commands from
  &lt;string&gt;.</span></p>

  <p class=""><span class="c2 c6">-f &lt;file&gt;</span></p>

  <p class="c10"><span class="c8 c0">execute commands from
  &lt;file&gt;. If &lt;file&gt; is not an ordinary file, it will be
  processed concurrently with other special files and data from
  other -e and -f arguments. This permits using FIFOs and other
  special files for input.</span></p>

  <p class=""><span class="c2 c6">-i</span></p>

  <p class="c10"><span class="c8 c0">Read from stdin even if -l, -e
  or -f is used. Normally these switches suppress interactive
  mode.</span></p>

  <p class=""><span class="c2 c6">-v</span></p>

  <p class="c10"><span class="c0">log</span> <span class=
  "c8 c0">INFO level log messages (by default only ERRORs are
  logged). INFO level messages may aid the administrator in
  debugging problems.</span></p>

  <p class=""><span class="c2 c6">-vv</span></p>

  <p class="c10"><span class="c8 c0">log INFO and DEBUG level log
  messages. DEBUG level messages are useful only for developers and
  may produce so much data that it affects performance. They also
  contain cleartext passwords.</span></p>

  <h3 class="" id="h.6rx898z6itc8"><span class="c12 c6">TLS
  CERTIFICATES</span></h3>

  <p class=""><span class="c0">In order to connect to an sibridge
  put into listening mode with the</span> <span class=
  "c5 c0">-l</span><span class="c8 c0">&#160;switch a client must
  present a certificate. GOsa extensions are required and most
  access controls apply to sibridge in an obvious way. E.g. the bit
  GosaAccessControl.GosaAccessJobs.install controls whether
  sibridge will accept commands that create new install jobs. Note
  that the effective permissions a user connecting to sibridge are
  the intersection of the permissions granted by the client
  certificate and the certificate sibridge uses to connect to
  go-susi, which is always the certificate configured in sibridge's
  configuration file, regardless of what certificate is used to
  connect to sibridge.</span></p>

  <p class=""><span class="c8 c0">The following list contains
  aspects in which sibridge's handling of access controls differs
  from go-susi's or is non-obvious:</span></p>

  <ul class="c21 lst-kix_nxjzkw9ekwnk-0 start">
    <li class="c11 c10"><span class="c8 c0">sibridge ignores
    GosaAccessLDAPIncoming. Adding an empty GosaAccessLDAPIncoming
    list in combination with not setting the GosaAccessMisc.peer
    bit is an easy way to make sure that a certificate can not be
    used to connect to go-susi directly.</span></li>

    <li class="c11 c10"><span class="c0">sibridge</span>
    <span class="c0 c18">does</span><span class="c8 c0">&#160;check
    GosaConnectionLimits.communicateWith. It applies to the machine
    and port sibridge is listening at, not the go-susi target. In
    other words you can use communicateWith to specify which
    sibridge instances a certificate can be used to talk
    to.</span></li>

    <li class="c11 c10"><span class="c0">In order to use the</span>
    <span class="c5 c0">raw</span><span class=
    "c8 c0">&#160;command, the client needs the
    GosaAccessMisc.debug permission.</span></li>

    <li class="c11 c10"><span class="c0">Commands</span>
    <span class="c5 c0">kill, foo-&gt;, .description, .gocomment,
    .release, .classes</span><span class="c0">&#160;and</span>
    <span class="c5 c0">.deb/.repo</span><span class=
    "c0">&#160;require the GosaAccessLDAPUpdate.dh permission.
    Commands</span> <span class="c5 c0">kill</span><span class=
    "c0">&#160;and</span> <span class=
    "c5 c0">foo-&gt;</span><span class="c8 c0">&#160;additionally
    require GosaAccessLDAPDetectedHardware.dn.</span></li>

    <li class="c11 c10">
      <span class="c0">The commands</span> <span class=
      "c5 c0">examine</span><span class="c0">&#160;and</span>
      <span class="c5 c0">xx</span><span class="c0">&#160;require
      GosaAccessQuery.queryAll.</span>
      <hr style="page-break-before:always;display:none;" />
    </li>
  </ul><a id="id.jjgoi9ch9ywz" name="id.jjgoi9ch9ywz"></a>

  <h2 class="c24" id="h.p43j0wkucxlz"><span class=
  "c15 c6">generate_package_list</span></h2>

  <p class=""><span class="c0">Debian repository scanner to serve
  as</span> <span class="c2 c0">package-list-hook.</span></p>

  <h3 class="c27" id="h.7kplqidsegca"><span class=
  "c12 c6">SYNOPSIS</span></h3>

  <p class=""><span class="c2 c0">export
  PackageListCacheDir=...</span></p>

  <p class=""><span class="c2 c0">export
  PackageListDebconf=...</span></p>

  <p class=""><span class="c2 c0">export
  PackageListFAIrepository=...</span></p>

  <p class=""><span class="c2 c0">export Verbose=...</span></p>

  <p class=""><span class=
  "c5 c0">/usr/lib/go-susi/generate_package_list</span></p>

  <h3 class="c27" id="h.4p55nppm0mq2"><span class=
  "c12 c6">DESCRIPTION</span></h3>

  <p class=""><span class="c0">generate_package_list scans a list
  of Debian repositories, extracts package information and prints
  it to stdout in LDIF format as required for use as
  package-list-hook. For details about this format, see the section
  about package-list-hook in the documentation on go-susi's
  configuration options.</span></p>

  <h3 class="" id="h.80bfn3ok2vz7"><span class=
  "c12 c6">WARNING</span></h3>

  <p class=""><span class="c0">If requested (see ENVIRONMENT
  section below) generate_package_list will scan</span>
  <span class="c0 c18">all</span><span class="c0">&#160;Debian
  packages in the target repositories for debconf-templates. This
  requires that</span> <span class="c0 c18">all</span><span class=
  "c0">&#160;packages be transferred at least partially and will
  cause significant network traffic. It will also take a lot of
  time. Because generate_package_list has an internal timeout of 1h
  after which it will stop scanning, it may be necessary to call it
  multiple times to complete the scan. Packages that were scanned
  in a previous run will not be rescanned. Their data will be used
  from the cache instead.</span></p>

  <h3 class="c27" id="h.pw7zmxe7trmy"><span class=
  "c12 c6">ENVIRONMENT</span></h3>

  <p class=""><span class="c8 c0">The parameters to control
  generate_package_list are passed via environment variables.
  Remember that the names of environment variables are
  case-sensitive!</span></p>

  <p class="c7"></p>

  <p class=""><span class="c2 c6">PackageListCacheDir</span></p>

  <p class="c10"><span class="c0">Path of a directory where
  generate_package_list should store its cache file.</span></p>

  <p class=""><span class="c2 c6">PackageListDebconf</span></p>

  <p class="c10"><span class="c8 c0">Controls which .deb packages
  will be (partially) downloaded for extracting debconf-templates.
  The following values are possible:</span></p>

  <p class="c10"><span class="c5 c0">cache:</span><span class=
  "c8 c0">&#160;Do not scan any packages for templates. Templates
  information already in the cache will be used.</span></p>

  <p class="c10"><span class="c5 c0">depends:</span><span class=
  "c8 c0">&#160;Only packages that have a Depends or Pre-Depends
  line that includes the word "debconf" will be scanned.</span></p>

  <p class="c10"><span class="c0 c18">everything
  else:</span><span class="c0">&#160;Scan all packages whose
  debconf-templates (or lack thereof) are not yet registered in the
  cache. See WARNING section above.</span></p>

  <p class=""><span class=
  "c2 c6">PackageListFAIrepository</span></p>

  <p class="c10"><span class="c0">A space-separated list of strings
  in the same format as the FAIrepository LDAP attribute. All of
  the corresponding repositories will be scanned.</span></p>

  <p class=""><span class="c2 c6">Verbose</span></p>

  <p class="c10"><span class="c0">If set to 1, 2, 3 or 4
  generate_package_list will output informative messages to stderr.
  Higher numbers produce more output.</span></p>
  <hr style="page-break-before:always;display:none;" />
  <a id="id.fgzi8uchaq8v" name="id.fgzi8uchaq8v"></a>

  <h2 class="" id="h.3chfrh90z9ft"><span class=
  "c15 c6">initrd_autopack</span></h2>

  <p class=""><span class="c8 c0">A godsend for people
  developing/debugging initrd.img</span></p>

  <h3 class="c36" id="h.b4p9n1w3grfh"><span class=
  "c12 c6">SYNOPSIS</span></h3>

  <p class=""><span class="c5 c0">/usr/lib/go-susi/initrd_autopack
  &lt;tftp_dir&gt; &lt;extract_dir&gt;</span></p>

  <h3 class="c36" id="h.9u6o9qfwa26i"><span class=
  "c12 c6">DESCRIPTION</span></h3>

  <p class="c14"><span class=
  "c8 c0">/usr/lib/go-susi/initrd_autopack is a TFTP hook that
  allows you to maintain your initrd.img as an extracted directory
  tree. When the file is requested, initrd_autopack will
  automatically compress it. The compressed file will be kept so
  that recompression happens only when there have been changes in
  the extracted directory tree.</span></p>

  <h3 class="c36" id="h.dqyfzc39cpkr"><span class=
  "c12 c6">OPTIONS</span></h3>

  <p class=""><span class="c2 c6">tftp_dir</span></p>

  <p class="c10"><span class="c0">A TFTP request for /initrd.img
  addresses the path</span> <span class=
  "c6">tftp_dir</span><span class="c8 c0">/initrd.img. If this file
  exists and is up-to-date with respect to the corresponding
  extracted directory tree, it will be served directly. If this
  file does not exist or the extracted directory tree has been
  changed since the last recompression, the extracted directory
  tree will be compressed and stored at this location and then
  served.</span></p>

  <p class=""><span class="c2 c6">extract_dir</span></p>

  <p class="c10"><span class="c0">A TFTP request for /initrd.img
  corresponds to an extracted directory</span> <span class=
  "c6">extract_dir</span><span class="c0">/initrd.img. If this
  directory does not exist, but the corresponding</span>
  <span class="c6">tftp_dir</span><span class="c0">/initrd.img
  does, then</span> <span class="c6">tftp_dir</span><span class=
  "c0">/initrd.img will be extracted. This means that to start
  working on the insides of an initrd.img, you can just throw it
  into</span> <span class="c6">tftp_dir</span><span class="c8 c0">/
  and boot it once. Afterwards you will find an extracted directory
  corresponding to the initrd.img that you can make your
  modifications to.</span></p>
  <hr style="page-break-before:always;display:none;" />

  <p class="c7 c10"></p><a id="id.55eiknlqs8ut" name=
  "id.55eiknlqs8ut"></a>

  <h2 class="" id="h.fiklmh4wvmzp"><span class="c15 c6">TLS
  Certificates</span></h2>

  <p class=""><span class="c8 c0">Details on X.509 certificates for
  establishing TLS connections with go-susi</span></p>

  <h3 class="" id="h.o7klfc2r3utv"><span class=
  "c12 c6">DESCRIPTION</span></h3>

  <p class=""><span class="c8 c0">go-susi requires that all parties
  connecting via TLS present a valid certificate signed by a
  trusted CA (i.e. it requires TLS client authentication). In
  addition to the basic validity and trust checks, go-susi
  evaluates several certificate extensions, if present in the
  connecting party's certificate, to determine what messages
  go-susi will accept from that party and what actions go-susi will
  take in reaction to these messages.</span></p>

  <h3 class="" id="h.7y1jg8wwidfm"><span class=
  "c12 c6">subjectAltName</span></h3>

  <p class=""><span class="c8 c0">The certificate must contain the
  subjectAltName extension and the connecting party's IP address
  has to match one of the entries in subjectAltName. The following
  types of subjectAltName entries are supported:</span></p>

  <p class="c7"></p>

  <p class=""><span class="c2 c6">iPAddress</span></p>

  <p class="c10"><span class="c0">If the address in the certificate
  ends in one or more 0-bytes (e.g. 1.2.3.0 or 1.2.0.0), it is
  interpreted as a wildcard address that will match all IP
  addresses from the corresponding /24, /16 or /8 subnet. The
  address 0.0.0.0 means that</span> <span class=
  "c0 c18">every</span><span class="c8 c0">&#160;IP address will be
  accepted. The address 127.0.0.1 may be used to match parties
  connecting from the same machine that go-susi is running
  on.</span></p>

  <p class=""><span class="c2 c6">dNSName</span></p>

  <p class="c10"><span class="c8 c0">If the dNSName can be resolved
  to an IP, this IP must match the connecting party's IP. If it can
  not be resolved, the connecting party's IP will be converted to a
  name by reverse DNS and that name must match the certificate's
  dNSName. In this case the dNSName may start with a "*" which
  &#160;is interpreted as a wildcard. E.g. dNSName "*.example.com"
  matches name "foo.bar.example.com".</span></p>

  <p class=""><span class="c2 c6">registeredID</span></p>

  <p class="c10"><span class="c8 c0">The following predefined
  OBJECT IDENTIFIERs are supported:</span></p>

  <p class="c10"><span class="c0">&#160;<br />
  DEFINITIONS IMPLICIT TAGS ::=<br />
  BEGIN<br />
  id-msb OBJECT IDENTIFIER ::= { 1 3 6 1 4 1 45753 }<br />
  id-msb-gosa OBJECT IDENTIFIER ::= { id-msb 1 }<br />
  &#160;<br /></span><span class=
  "c6">gosa-gn-my-server</span><span class="c8 c0">&#160;OBJECT
  IDENTIFIER ::= { id-msb-gosa 1 }</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- corresponds to the
  IP address of the server to which the</span></p>

  <p class="c10"><span class="c0">&#160; -- receiving go-susi has
  sent its most recent</span> <span class=
  "c5 c0">here_i_am</span><span class=
  "c8 c0">&#160;message.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- Note: go-susi
  updates this IP address before sending the</span></p>

  <p class="c10"><span class="c0">&#160; --</span> <span class=
  "c5 c0">here_i_am</span><span class="c8 c0">&#160;to make sure
  that it will accept a reply from a</span></p>

  <p class="c10"><span class="c0">&#160; -- server that only has a
  gosa-gn-my-server certificate.<br />
  &#160;<br /></span><span class=
  "c6">gosa-gn-config-file</span><span class="c8 c0">&#160;OBJECT
  IDENTIFIER ::= { id-msb-gosa 2 }</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- corresponds to the
  set of all servers explicitly listed in the</span></p>

  <p class="c10"><span class="c0">&#160; --</span> <span class=
  "c5 c0">[server]/ip</span><span class="c0">&#160;and</span>
  <span class="c5 c0">[ServerPackages]/address</span><span class=
  "c8 c0">&#160;configuration</span></p>

  <p class="c10"><span class="c0">&#160; --
  settings.</span><span class="c8 c0">&#160;All these entries will
  be treated as if they were dNSName</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- or iPAddress entries
  in the certificate (depending on whether they</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- are names or numeric
  addresses).</span></p>

  <p class="c10"><span class="c0">&#160;<br /></span> <span class=
  "c6">gosa-gn-srv-record</span><span class="c8 c0">&#160;OBJECT
  IDENTIFIER ::= { id-msb-gosa 3 }</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- corresponds to the
  set of all servers listed in DNS SRV records for</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- the service
  "gosa-si" with protocol "tcp". All these records will
  be</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- treated as if they
  were dNSName entries in the certificate.</span></p>

  <p class="c10"><span class="c0">&#160; -- If</span> <span class=
  "c5 c0">[server]/dns-lookup</span><span class=
  "c0">&#160;or</span> <span class=
  "c5 c0">[ServerPackages]/dns-lookup</span><span class=
  "c8 c0">&#160;is set</span></p>

  <p class="c10"><span class="c0">&#160; -- to "false" in the
  configuration file, gosa-gn-srv-record has no effect.<br />
  &#160;<br /></span><span class=
  "c6">gosa-gn-my-peer</span><span class="c8 c0">&#160;OBJECT
  IDENTIFIER ::= { id-msb-gosa 4 }</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- corresponds to the
  set of all servers with whom the receiving go-susi</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- has established
  server-server-communication.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- Note: A server whose
  certificate is bound to gosa-gn-my-peer can</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- not establish
  server-server-communication on its own initiative.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- However, once a
  server with a more powerful certificate has</span></p>

  <p class="c10"><span class="c0">&#160; -- contacted it
  with</span> <span class="c5 c0">new_server</span><span class=
  "c8 c0">&#160;it may respond and this will lead</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- to a peer
  relationship.<br />
  <br />
  END<br /></span></p>

  <h3 class="" id="h.8cv517swdkbd"><span class="c12 c6">Connection
  and data transfer limits</span></h3>

  <p class=""><span class="c8 c0">The following certificate
  extension may be used to impose or relax limits on the party
  presenting this certificate. Except for the communicateWith field
  which has some general usefulness, the fields in this extension
  are rarely useful. The default limits are appropriate for most
  cases. You should not include this extension in a certificate
  without a good reason to do so.</span></p>

  <p class="c10"><span class="c0"><br />
  DEFINITIONS IMPLICIT TAGS ::=<br />
  BEGIN<br />
  &#160;<br />
  gosa-ce-connectionLimits OBJECT IDENTIFIER ::= { id-msb-gosa 5
  }<br />
  &#160;<br />
  GosaConnectionLimits ::= SEQUENCE {<br />
  &#160;<br /></span><span class="c0">&#160;</span> <span class=
  "c6">totalTime</span><span class="c8 c0">&#160;[0] INTEGER
  OPTIONAL,</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- Number of
  milliseconds after which the connection will be
  terminated</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- regardless of the
  amount of data transferred. In particular this will</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- terminate transfers
  that take too long due to actual or simulated</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- transmission
  errors.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- A number &lt;= 0
  means no time limit.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- Note: A non-0
  setting in a certificate used for</span></p>

  <p class="c10"><span class="c8 c0">&#160; --
  server-server-communication may cause job database
  inconsistencies</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- between the
  respective servers.</span></p>

  <p class="c10"><span class="c0">&#160; -- Do not use it in
  certificates used for server-server-communication.<br />
  &#160;<br /></span><span class="c0">&#160;</span> <span class=
  "c6">totalBytes</span><span class="c8 c0">&#160;[1] INTEGER
  OPTIONAL,</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- Maximum number of
  bytes allowed over a single connection.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- Both bytes read and
  written count towards this limit.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- (The same connection
  may be used for multiple messages.)</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- A number &lt;= 0
  means no limit.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- Note: A non-0
  setting in a certificate used for</span></p>

  <p class="c10"><span class="c8 c0">&#160; --
  server-server-communication may cause job database
  inconsistencies</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- between the
  respective servers.</span></p>

  <p class="c10"><span class="c0">&#160; -- Do not use it in
  certificates used for server-server-communication.<br />
  &#160;<br />
  &#160;</span><span class="c6">messageBytes</span><span class=
  "c8 c0">&#160;[2] INTEGER OPTIONAL,</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- Maximum number of
  bytes allowed for a single message.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- Reply bytes do not
  count against this limit.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- (The same connection
  may be used for multiple messages.)</span></p>

  <p class="c10"><span class="c0">&#160; -- A number &lt;= 0 means
  no limit.<br />
  &#160;<br />
  &#160;</span><span class="c6">connPerHour</span><span class=
  "c8 c0">&#160;[3] INTEGER OPTIONAL,</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- Maximum number of
  connection attempts per hour from the same IP</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- address. If the
  number is exceeded the connection will be rejected.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- Repeated connection
  attempts after the limit has been exceeded</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- may prolong the
  lockout indefinitely.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- Tracking of
  connections per time per IP is approximate only.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- It is guaranteed
  that if a cool IP connects and then makes</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- connPerHour further
  connections before 1h has elapsed since</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- the first
  connection, this will trigger lockout. It is also
  guaranteed</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- that making no
  connections for 1h will completely cool down an IP.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- The limit cannot be
  evaded by opening parallel connections.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- A number &lt;= 0
  means no limit.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- Note: This counts
  successful and unsuccessful connection attempts.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- Once established a
  connection may be held open indefinitely without</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- incurring any
  further strikes against this limit.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- Note 2: To make
  rejection of IPs that have exceeded their limits</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- as fast as possible,
  limits are stored in a DB after TLS handshake</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- but consulted before
  the TLS handshake. Connections from the</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- same IP with
  differing certificate limits will cause issues such as</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- locking out
  legitimate clients and permitting illegitimate clients
  to</span></p>

  <p class="c10"><span class="c0">&#160; -- exceed their
  limits.<br />
  &#160;<br />
  &#160;</span><span class="c6">connParallel</span><span class=
  "c8 c0">&#160;[4] INTEGER OPTIONAL,</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- Maximum number of
  parallel connections from the same IP address.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- A number &lt;= 0
  means no limit.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- Note: To make
  rejection of IPs that have exceeded their limits</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- as fast as possible,
  limits are stored in a DB after TLS handshake</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- but consulted before
  the TLS handshake. Connections from the</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- same IP with
  differing certificate limits will cause issues such as</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- locking out
  legitimate clients and permitting illegitimate clients
  to</span></p>

  <p class="c10"><span class="c0">&#160; -- exceed their
  limits.<br />
  &#160;<br />
  &#160;</span><span class="c6">maxLogFiles</span><span class=
  "c8 c0">&#160;[5] INTEGER OPTIONAL,</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- Maximum number of
  files allowed in a CLMSG_SAVE_FAI_LOG message.</span></p>

  <p class="c10"><span class="c0">&#160; -- A number &lt;= 0 means
  no limit.<br />
  &#160;<br />
  &#160;</span><span class="c6">maxAnswers</span><span class=
  "c8 c0">&#160;[6] INTEGER OPTIONAL,</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- Maximum number of
  &lt;answerX&gt; elements that will be returned in a
  query</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- reply. This is
  particularly relevant to prevent DOS by requesting all</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- packages from the
  package database.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- A number &lt;= 0
  means no limit.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- Note: A non-0
  setting in a certificate used for</span></p>

  <p class="c10"><span class="c8 c0">&#160; --
  server-server-communication may cause job database
  inconsistencies</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- between the
  respective servers.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- Do not use it in
  certificates used for server-server-communication.<br />
  &#160; &#160;</span></p>

  <p class="c10"><span class="c0">&#160;</span> <span class=
  "c6">communicateWith</span><span class="c8 c0">&#160;[7] SEQUENCE
  OF UTF8String OPTIONAL</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- List of DNS names
  and/or IP addresses with or without port number.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- DNS names may start
  with a "*" as wildcard character</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- (e.g.
  "*.example.com:20081").</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- A connection is only
  permitted with another system if that system's</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- IP/Name/Port matches
  one of the entries in this list.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- When system A and
  system B verify each</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- other's certificates
  at the beginning of a connection, system A will</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- terminate
  theconnection immediately if system B's certificate
  contains</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- a
  communicateWiththat does not match system A. It does not
  matter</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- which system
  initiated the connection.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- An empty list
  prevents all incoming and outgoing connections.<br />
  }<br />
  &#160; &#160;<br />
  END<br /></span></p>

  <h3 class="c39" id="h.e4laqldzi9zn"></h3>
  <hr style="page-break-before:always;display:none;" />

  <h3 class="c39" id="h.vsdw5poaw05o"></h3>

  <h3 class="" id="h.exo83ys82p8g"><span class="c12 c6">Access
  control by feature</span></h3>

  <p class=""><span class="c8 c0">By default go-susi will refuse to
  answer queries or take any kind of action that has some
  persistent effect. The following certificate extension may be
  used to selectively permit queries and actions in reaction to
  messages from the owner of a certificate with this extension.
  This extension is optional for client certificates if you can
  live without automatic creation of LDAP objects for new systems
  and without automatic updating of cn/ipHostNumber in reaction to
  DNS changes. For server certificates however (including the one
  used by GOsa) this extension is required to allow essential
  functions.<br /></span></p>

  <p class="c10"><span class="c8 c0"><br />
  DEFINITIONS IMPLICIT TAGS ::=<br />
  BEGIN<br />
  &#160;<br />
  gosa-ce-accessControl OBJECT IDENTIFIER ::= { id-msb-gosa 6
  }<br />
  &#160;<br />
  GosaAccessControl ::= SEQUENCE {<br />
  &#160;misc &#160;[0] GosaAccessMisc &#160;OPTIONAL,<br />
  &#160;query [1] GosaAccessQuery OPTIONAL,<br />
  &#160;jobs &#160;[2] GosaAccessJobs &#160;OPTIONAL,<br />
  &#160;incoming &#160; [3] GosaAccessLDAPIncoming OPTIONAL,<br />
  &#160;ldapUpdate [4] GosaAccessLDAPUpdate &#160; OPTIONAL,<br />
  &#160;detectedHw [5] GosaAccessLDAPDetectedHardware
  OPTIONAL<br />
  }<br />
  &#160;<br />
  GosaAccessMisc ::= BIT STRING {</span></p>

  <p class="c10"><span class="c0">&#160;<br />
  &#160;</span><span class="c6">debug</span><span class=
  "c0">(0),</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- This flag permits
  access to functions that are only meant for</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- debugging. These
  functions pose a security risk. This flag</span></p>

  <p class="c10"><span class="c0">&#160; -- should not be set in a
  certificate used for production systems.<br />
  &#160; &#160;<br />
  &#160;</span><span class="c6">wake</span><span class=
  "c8 c0">(1),</span></p>

  <p class="c10"><span class="c0">&#160; -- This flag enables the
  server-to-server function trigger_wake.<br />
  &#160; &#160;<br />
  &#160;</span><span class="c6">peer</span><span class=
  "c8 c0">(2)</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- This flag enables
  the messages new_server,</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- confirm_new_server
  and foreign_job_updates, that are the backbone</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- of server-to-server
  communication.</span></p>

  <p class="c10"><span class="c0">&#160; -- For servers listed
  in</span> <span class=
  "c5 c0">[ServerPackages]/address</span><span class=
  "c8 c0">&#160;in the config file</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- this flag is always
  assumed to be set, even if they present a</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- certificate without
  it. This allows setting up server-to-server</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- communication via
  configuration files without issuing certificates with</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- the peer
  flag.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- NOTE: This exception
  does NOT extend to servers listed in DNS!<br />
  }<br />
  &#160;<br />
  GosaAccessQuery ::= BIT STRING {</span></p>

  <p class="c10"><span class="c0">&#160;<br />
  &#160;</span><span class="c6">queryAll</span><span class=
  "c8 c0">(0),</span></p>

  <p class="c10"><span class="c0">&#160; -- This flag
  enables</span> <span class="c0 c18">all</span><span class=
  "c8 c0">&#160;messages that query information. This
  includes</span></p>

  <p class="c10"><span class="c0">&#160; -- database queries such
  as</span> <span class="c5 c0">gosa_query_jobdb</span><span class=
  "c8 c0">&#160;and messages like</span></p>

  <p class="c10"><span class="c0">&#160; --</span> <span class=
  "c5 c0">sistats</span><span class="c0">&#160;and</span>
  <span class="c5 c0">gosa_ping</span><span class=
  "c8 c0">.</span></p>

  <p class="c10"><span class="c0">&#160; -- If this flag is set,
  other flags of</span> <span class=
  "c5 c0">GosaAccessQuery</span><span class="c8 c0">&#160;have no
  effect.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- If it is 0, the
  other flags may be used to enable queries on an</span></p>

  <p class="c10"><span class="c0">&#160; -- individual basis.
  &#160;<br />
  &#160;<br />
  &#160;</span><span class="c6">queryJobs</span><span class=
  "c8 c0">(1)</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- This flag only
  enables the message gosa_query_jobdb.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- This flag is always
  assumed to be set when the message comes from</span></p>

  <p class="c10"><span class="c0">&#160; -- a peer server
  (see</span> <span class=
  "c5 c0">gosa-gn-my-peer</span><span class="c8 c0">) because
  server-to-server</span></p>

  <p class="c10"><span class="c0">&#160; -- communication uses
  these queries to synchronize job databases.<br />
  }<br />
  &#160;<br />
  GosaAccessJobs ::= BIT STRING {<br />
  &#160;<br />
  &#160;</span><span class="c6">jobsAll</span><span class=
  "c8 c0">(0),</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- This flag enables
  creating, removing and modifying of jobs. If this</span></p>

  <p class="c10"><span class="c0">&#160; -- flag is set, the
  other</span> <span class=
  "c5 c0">GosaAccessJobs</span><span class="c8 c0">&#160;flags have
  no effect. If this</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- flag is 0, the other
  flags may be used to enable individual job</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- messages.</span></p>

  <p class="c10"><span class="c0">&#160; -- NOTE: Even though this
  flag enables</span> <span class=
  "c5 c0">job_trigger_activate_new</span><span class=
  "c8 c0">,</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- the creation of new
  system objects in LDAP requires additional rights</span></p>

  <p class="c10"><span class="c0">&#160; -- from</span>
  <span class="c5 c0">GosaAccessLDAP*</span><span class=
  "c0">.<br />
  &#160;<br />
  &#160;</span><span class="c6">lock</span><span class=
  "c8 c0">(1),</span></p>

  <p class="c10"><span class="c0">&#160; -- This flag
  enables</span> <span class=
  "c5 c0">job_trigger_action_lock</span><span class=
  "c8 c0">&#160;and</span></p>

  <p class="c10"><span class="c0">&#160; --</span> <span class=
  "c5 c0">gosa_trigger_action_lock.</span><span class="c0"><br />
  &#160; &#160;<br />
  &#160;</span><span class="c6">unlock</span><span class=
  "c8 c0">(2),</span></p>

  <p class="c10"><span class="c0">&#160; -- This flag
  enables</span> <span class=
  "c5 c0">job_set_activated_for_installation</span><span class=
  "c8 c0">,</span></p>

  <p class="c10"><span class="c0">&#160; --</span> <span class=
  "c5 c0">gosa_set_activated_for_installation</span><span class=
  "c0">,</span> <span class=
  "c5 c0">job_trigger_action_activate</span><span class=
  "c8 c0">&#160;and</span></p>

  <p class="c10"><span class="c0">&#160; --</span> <span class=
  "c5 c0">gosa_trigger_action_activate</span><span class=
  "c0">.<br />
  &#160;<br />
  &#160;</span><span class="c6">shutdown</span><span class=
  "c8 c0">(3),</span></p>

  <p class="c10"><span class="c0">&#160; -- This flag
  enables</span> <span class=
  "c5 c0">job_trigger_action_halt</span><span class=
  "c8 c0">,</span></p>

  <p class="c10"><span class="c0">&#160; --</span> <span class=
  "c5 c0">job_trigger_action_reboot</span><span class="c0">,</span>
  <span class="c5 c0">gosa_trigger_action_halt</span><span class=
  "c8 c0">&#160;and</span></p>

  <p class="c10"><span class="c0">&#160; --</span> <span class=
  "c5 c0">gosa_trigger_action_reboot</span><span class="c0">.<br />
  &#160; &#160;<br />
  &#160;</span><span class="c6">wake</span><span class="c8 c0">(4),
  &#160;</span></p>

  <p class="c10"><span class="c0">&#160; -- This flag
  enables</span> <span class=
  "c5 c0">job_trigger_action_wake</span><span class=
  "c8 c0">&#160;and</span></p>

  <p class="c10"><span class="c0">&#160; --</span> <span class=
  "c5 c0">gosa_trigger_action_wake</span><span class="c0">.<br />
  &#160;<br />
  &#160;</span><span class="c6">abort</span><span class=
  "c8 c0">(5),</span></p>

  <p class="c10"><span class="c0">&#160; -- This flag
  enables</span> <span class=
  "c5 c0">job_trigger_action_faireboot</span><span class=
  "c8 c0">,</span></p>

  <p class="c10"><span class="c0">&#160; --</span> <span class=
  "c5 c0">gosa_trigger_action_faireboot</span><span class=
  "c0">,</span> <span class=
  "c5 c0">job_trigger_action_localboot</span><span class=
  "c8 c0">&#160;and</span></p>

  <p class="c10"><span class="c0">&#160; --</span> <span class=
  "c5 c0">gosa_trigger_action_localboot</span><span class="c0">.
  These messages abort running FAI jobs.<br />
  &#160; &#160;<br />
  &#160;</span><span class="c6">install</span><span class=
  "c8 c0">(6),</span></p>

  <p class="c10"><span class="c0">&#160; -- This flag
  enables</span> <span class=
  "c5 c0">job_trigger_action_reinstall</span><span class=
  "c8 c0">&#160;and</span></p>

  <p class="c10"><span class="c0">&#160; --</span> <span class=
  "c5 c0">gosa_trigger_action_reinstall</span><span class=
  "c0">.<br />
  &#160;<br />
  &#160;</span><span class="c6">update</span><span class=
  "c8 c0">(7),</span></p>

  <p class="c10"><span class="c0">&#160; -- This flag
  enables</span> <span class=
  "c5 c0">job_trigger_action_update</span><span class=
  "c8 c0">&#160;and</span></p>

  <p class="c10"><span class="c0">&#160; --</span> <span class=
  "c5 c0">gosa_trigger_action_update</span><span class="c0">.<br />
  &#160;<br />
  &#160;</span><span class="c6">modifyJobs</span><span class=
  "c8 c0">(8),</span></p>

  <p class="c10"><span class="c0">&#160; -- This flag
  enables</span> <span class=
  "c5 c0">gosa_delete_jobdb_entry</span><span class=
  "c8 c0">&#160;and</span></p>

  <p class="c10"><span class="c0">&#160; --</span> <span class=
  "c5 c0">gosa_update_status_jobdb_entry</span><span class=
  "c0">.<br />
  &#160;<br />
  &#160;</span><span class="c6">newSys</span><span class=
  "c8 c0">(9)</span></p>

  <p class="c10"><span class="c0">&#160; -- This flag
  enables</span> <span class=
  "c5 c0">gosa_trigger_activate_new</span><span class=
  "c8 c0">&#160;and</span></p>

  <p class="c10"><span class="c0">&#160; --</span> <span class=
  "c5 c0">job_trigger_activate_new</span><span class=
  "c8 c0">.</span></p>

  <p class="c10"><span class="c8 c6">&#160;</span></p>

  <p class="c10"><span class="c6">&#160; userMsg</span><span class=
  "c8 c0">(10)</span></p>

  <p class="c10"><span class="c0">&#160; -- This flag
  enables</span> <span class=
  "c5 c0">job_send_user_msg</span><span class="c8 c0">.</span></p>

  <p class="c7 c10"></p>

  <p class="c10"><span class="c6">&#160; audit</span><span class=
  "c8 c0">(11)</span></p>

  <p class="c10"><span class="c0">&#160; -- This flag
  enables</span> <span class=
  "c5 c0">job_trigger_action_audit</span><span class=
  "c8 c0">&#160;and</span></p>

  <p class="c10"><span class="c0">&#160; --</span> <span class=
  "c5 c0">gosa_trigger_action_audit</span><span class=
  "c0">.</span><span class="c8 c0"><br />
  }<br />
  &#160;</span></p>

  <p class="c10"><span class="c0">&#160;<br /></span> <span class=
  "c6">GosaAccessLDAPIncoming</span><span class="c8 c0">&#160;::=
  SEQUENCE OF UTF8String</span></p>

  <p class="c10"><span class="c8 c0">-- This is a list of URIs of
  LDAP servers, each optionally followed by</span></p>

  <p class="c10"><span class="c8 c0">-- a DN (e.g.
  ldaps://ldap.foo.de:389/ou=incoming,o=foo,c=de).</span></p>

  <p class="c10"><span class="c8 c0">-- The server component of the
  URI may start with "*" as</span></p>

  <p class="c10"><span class="c8 c0">-- a wildcard and the DN may
  either start or end with a "*". Both</span></p>

  <p class="c10"><span class="c8 c0">-- parts are permitted to be
  just "*" (e.g. ldap://*/*).</span></p>

  <p class="c10"><span class="c0">-- When a client sends its</span>
  <span class="c5 c0">here_i_am</span><span class="c8 c0">&#160;to
  a server and the client's</span></p>

  <p class="c10"><span class="c0">-- certificate contains a</span>
  <span class="c5 c0">GosaAccessLDAPIncoming</span><span class=
  "c8 c0">&#160;list, the</span></p>

  <p class="c10"><span class="c8 c0">-- registration will be denied
  if none of the LDAP servers in the</span></p>

  <p class="c10"><span class="c8 c0">-- list matches the one used
  by the contacted server.</span></p>

  <p class="c10"><span class="c8 c0">-- If present, an entry's
  optional DN has to match the contacted</span></p>

  <p class="c10"><span class="c0">-- server's</span> <span class=
  "c5 c0">[server]/new-systems-base</span><span class=
  "c8 c0">&#160;configuration option</span></p>

  <p class="c10"><span class="c8 c0">-- and registration will
  succeed even if there is no LDAP object for</span></p>

  <p class="c10"><span class="c8 c0">-- the client yet.</span></p>

  <p class="c10"><span class="c8 c0">-- If the optional DN is
  missing from the list entry, then registration</span></p>

  <p class="c10"><span class="c8 c0">-- will succeed only if LDAP
  already contains an object for</span></p>

  <p class="c10"><span class="c8 c0">-- the client.</span></p>

  <p class="c10"><span class="c0">-- An empty</span> <span class=
  "c5 c0">GosaAccessLDAPIncoming</span><span class=
  "c8 c0">&#160;list prevents registration</span></p>

  <p class="c10"><span class="c8 c0">-- with any server.</span></p>

  <p class="c10"><span class="c0">-- If the</span> <span class=
  "c5 c0">GosaAccessLDAPIncoming</span><span class=
  "c8 c0">&#160;list is not present at all in the</span></p>

  <p class="c10"><span class="c8 c0">-- certificate, this is
  equivalent to a list ["ldap://*", "ldaps://*"]</span></p>

  <p class="c10"><span class="c8 c0">-- which permits registration
  at any server but only if there is an</span></p>

  <p class="c10"><span class="c8 c0">-- existing LDAP object for
  the client.</span></p>

  <p class="c10"><span class="c8 c0">-- NOTE: The protocol part of
  list entries is significant. An entry that</span></p>

  <p class="c10"><span class="c8 c0">-- starts with "ldaps:" will
  only allow registration at servers that talk to</span></p>

  <p class="c10"><span class="c8 c0">-- LDAP via a secure
  connection.<br />
  &#160;<br />
  GosaAccessLDAPUpdate ::= BIT STRING {</span></p>

  <p class="c10"><span class="c0"><br />
  &#160;</span><span class="c6">cn</span><span class=
  "c8 c0">(0),</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- When a client
  registers at a server and the cn of the</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- client's LDAP entry
  (as found by its MAC address)</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- does not match the
  reverse DNS of its IP, the server's</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- behaviour depends on
  this flag in the client's certificate:</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- If the flag is set,
  the registration succeeds and the LDAP</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- entry is updated
  with the new name.</span></p>

  <p class="c10"><span class="c0">&#160; -- If the flag is unset
  or</span> <span class=
  "c5 c0">GosaAccessLDAPUpdate</span><span class="c8 c0">&#160;is
  not present</span></p>

  <p class="c10"><span class="c0">&#160; -- in the certificate,
  registration will fail.<br />
  &#160;<br />
  &#160;</span><span class="c6">ip</span><span class=
  "c8 c0">(1),</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- When a client
  registers at a server and the ipHostNumber of the</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- client's LDAP entry
  (as found by its MAC address)</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- does not match the
  client's IP, the server's</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- behaviour depends on
  this flag in the client's certificate:</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- If the flag is set,
  the registration succeeds and the LDAP</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- entry is updated
  with the new IP.</span></p>

  <p class="c10"><span class="c0">&#160; -- If the flag is unset
  or</span> <span class=
  "c5 c0">GosaAccessLDAPUpdate</span><span class="c8 c0">&#160;is
  not present</span></p>

  <p class="c10"><span class="c0">&#160; -- in the certificate,
  registration will fail.<br />
  &#160;<br />
  &#160;</span><span class="c6">mac</span><span class=
  "c8 c0">(2),</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- When a client
  registers at a server and there is no LDAP entry for
  its</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- MAC address, but
  there is an LDAP entry whose ipHostNumber</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- matches the client's
  IP, then the server's behaviour depends on this</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- flag:</span></p>

  <p class="c10"><span class="c0">&#160; -- If the flag is unset
  (or</span> <span class=
  "c5 c0">GosaAccessLDAPUpdate</span><span class="c8 c0">&#160;is
  not present)</span></p>

  <p class="c10"><span class="c0">&#160; -- registration will fail
  even if</span> <span class=
  "c5 c0">GosaAccessLDAPIncoming</span><span class=
  "c8 c0">&#160;would permit</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- creation of a new
  LDAP entry.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- If the flag is set
  and the cn of the existing LDAP entry matches the</span></p>

  <p class="c10"><span class="c0">&#160; -- reverse DNS of the
  client's IP, or the</span> <span class="c6">cn</span><span class=
  "c8 c0">&#160;flag is set, then the</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- macaddress attribute
  of the existing entry will be updated and</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- registration
  succeeds.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- If the flag is set
  but the client's reverse DNS does not match the cn</span></p>

  <p class="c10"><span class="c0">&#160; -- and the</span>
  <span class="c6">cn</span><span class="c8 c0">&#160;flag is not
  set, then registration will fail even if</span></p>

  <p class="c10"><span class="c0">&#160; --</span> <span class=
  "c5 c0">GosaAccessLDAPIncoming</span><span class="c0">&#160;would
  permit creating a new LDAP entry.<br />
  &#160;<br />
  &#160;</span><span class="c6">dh</span><span class=
  "c8 c0">(3)</span></p>

  <p class="c10"><span class="c0">&#160; -- This flag enables using
  the</span> <span class=
  "c5 c0">detected_hardware</span><span class="c8 c0">&#160;message
  to modify</span></p>

  <p class="c10"><span class="c0">&#160; -- existing LDAP entries.
  If this flag is unset or &#160;</span><span class=
  "c5 c0">GosaAccessLDAPUpdate</span></p>

  <p class="c10"><span class="c0">&#160; -- is not present, the
  server will only accept</span> <span class=
  "c5 c0">detected_hardware</span><span class="c8 c0">&#160;if
  there</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- is no existing LDAP
  entry. This is not necessary for normal FAI/GOsa</span></p>

  <p class="c10"><span class="c8 c0">&#160; --
  operation.</span></p>

  <p class="c10"><span class="c0">&#160; -- See also</span>
  <span class=
  "c5 c0">GosaAccessLDAPDetectedHardware</span><span class=
  "c0">.<br />
  }<br />
  &#160;<br /></span><span class=
  "c6">GosaAccessLDAPDetectedHardware</span><span class=
  "c8 c0">&#160;::= BIT STRING {</span></p>

  <p class="c10"><span class="c0">-- ATTENTION! The following flags
  enable extended functionality of<br />
  -- the</span> <span class=
  "c5 c0">detected_hardware</span><span class="c8 c0">&#160;message
  that permits a variety of modifications</span></p>

  <p class="c10"><span class="c8 c0">-- of LDAP objects.</span></p>

  <p class="c10"><span class="c0">-- The</span> <span class=
  "c6">template</span><span class="c8 c0">&#160;flag has some use
  cases in a certificate used in a FAIROOT</span></p>

  <p class="c10"><span class="c8 c0">-- for installing new clients.
  All of the other flags are useful only for</span></p>

  <p class="c10"><span class="c8 c0">-- special applications such
  as interfacing with other software distribution</span></p>

  <p class="c10"><span class="c8 c0">-- systems or batch importing
  systems into LDAP.</span></p>

  <p class="c10"><span class="c8 c0">-- Do not use any of the below
  flags in a certificate unless you have a</span></p>

  <p class="c10"><span class="c8 c0">-- specific reason to do
  so.<br />
  &#160;</span></p>

  <p class="c10"><span class="c0">&#160;</span> <span class=
  "c6">unprompted</span><span class="c8 c0">(0),</span></p>

  <p class="c10"><span class="c0">&#160; -- This flag allows the
  sending of the</span> <span class=
  "c5 c0">detected_hardware</span><span class="c8 c0">&#160;message
  to a</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- server even if that
  server has not requested it by sending a</span></p>

  <p class="c10"><span class="c0">&#160; --</span> <span class=
  "c5 c0">detect_hardware</span><span class=
  "c0">&#160;message.<br />
  &#160;<br />
  &#160;</span><span class="c6">template</span><span class=
  "c8 c0">(1),</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- This flag tells the
  server that it should use template objects (see</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- description of
  detected_hardware message) when processing a</span></p>

  <p class="c10"><span class="c0">&#160; --</span> <span class=
  "c5 c0">detected_hardware</span><span class=
  "c0">&#160;message.<br />
  &#160;<br />
  &#160;</span><span class="c6">dn</span><span class=
  "c8 c0">(2),</span></p>

  <p class="c10"><span class="c0">&#160; -- This flag permits the
  sender of</span> <span class=
  "c5 c0">detected_hardware</span><span class="c8 c0">&#160;to
  specify the DN</span></p>

  <p class="c10"><span class="c0">&#160; -- of the LDAP object to
  create in the</span> <span class=
  "c5 c0">detected_hardware</span><span class=
  "c8 c0">&#160;message, even</span></p>

  <p class="c10"><span class="c0">&#160; -- if that DN is not in
  the tree configured as</span> <span class=
  "c5 c0">[server]/new-systems-base</span><span class=
  "c8 c0">.</span></p>

  <p class="c10"><span class="c0">&#160; -- In combination with
  the</span> <span class="c6">dh</span> <span class=
  "c0">flag</span> <span class="c0">from</span> <span class=
  "c5 c0">GosaAccessLDAPUpdate</span></p>

  <p class="c10"><span class="c0">&#160; --</span> <span class=
  "c0">this even permits moving of systems within the LDAP
  directory.<br />
  &#160;<br />
  &#160;</span><span class="c6">cn</span><span class=
  "c8 c0">(3),</span></p>

  <p class="c10"><span class="c0">&#160; -- This flag permits the
  sender of</span> <span class=
  "c5 c0">detected_hardware</span><span class="c8 c0">&#160;to
  specify the CN</span></p>

  <p class="c10"><span class="c0">&#160; -- of the LDAP object to
  create in the</span> <span class=
  "c5 c0">detected_hardware</span><span class=
  "c8 c0">&#160;message,</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- even if it does not
  match the name obtained from reverse DNS of</span></p>

  <p class="c10"><span class="c0">&#160; -- the sender's IP.<br />
  &#160; &#160;<br />
  &#160;</span><span class="c6">ipHostNumber</span><span class=
  "c8 c0">(4),</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- This flag permits
  the sending of a detected_hardware message containing</span></p>

  <p class="c10"><span class="c0">&#160; -- a &lt;ipHostNumber&gt;
  element with a different IP than that of the sender.<br />
  &#160;<br />
  &#160;</span><span class="c6">macAddress</span><span class=
  "c8 c0">(5)</span></p>

  <p class="c10"><span class="c0">&#160; -- This flag permits
  specifying the MAC address in a</span> <span class=
  "c2 c0">detected_hardware</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- message. Without
  this flag the MAC address from the most recent</span></p>

  <p class="c10"><span class="c0">&#160; --</span> <span class=
  "c5 c0">here_i_am</span><span class="c0">&#160;or</span>
  <span class="c5 c0">new_foreign_client</span><span class=
  "c8 c0">&#160;is used that matches the &lt;source&gt;</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- of the
  detected_hardware message.</span></p>

  <p class="c10"><span class="c8 c0">&#160; -- ATTENTION! This flag
  allows the creation of multiple LDAP objects</span></p>

  <p class="c10"><span class="c0">&#160; -- with the same</span>
  <span class="c5 c0">macAddress</span><span class="c8 c0">.<br />
  }<br />
  <br />
  END<br /></span></p>

  <p class="c7"><span class="c0"><br />
  <br /></span></p>
  <hr style="page-break-before:always;display:none;" />

  <p class="c7"></p><a id="id.l8s0fislnev7" name=
  "id.l8s0fislnev7"></a>

  <h1 class="" id="h.jjoyi1fwsh2p"><span class=
  "c29 c6">License</span></h1>

  <p class=""><span class="c0">This document is Copyright &#169;
  2012,2013 Matthias S. Benkmann and licensed under the
  CC-BY-SA-3.0 license as found at</span> <span class=
  "c17 c0"><a class="c9" href=
  "https://www.google.com/url?q=http://creativecommons.org/licenses/by-sa/3.0/deed.en_US&amp;sa=D&amp;ust=1469524604607000&amp;usg=AFQjCNG04GlHLmVEtbLDHauv9EeVcxWeXg">
  http://creativecommons.org/licenses/by-sa/3.0/deed.en_US</a></span><span class="c0">.</span></p>
</body>
</html>
